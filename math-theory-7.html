<!DOCTYPE html>
<!-- Language set to Portuguese BR -->
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Módulo 7: Medidas de Tendência Central</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Reset & Base Styles --- */
        :root {
            --primary-color: #007bff; /* Blue */
            --secondary-color: #6c757d; /* Gray */
            --background-light: #f8f9fa;
            --background-dark: #343a40;
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --accent-color: #ffc107; /* Yellow */
            --success-color: #28a745; /* Green */
            --error-color: #dc3545; /* Red */
            --mean-color: #17a2b8; /* Cyan */
            --median-color: #fd7e14; /* Orange */
            --mode-color: #6f42c1; /* Purple */
            --border-radius: 8px;
            --transition-speed: 0.3s;
            --animation-speed: 0.6s; /* Control fade-in speed */
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            --nav-primary: #6e48aa;
            --nav-success: #4cc9f0;
            --nav-dark: #1a1a2e;
            --footer-border-color: #495057;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.7;
            background-color: var(--background-light); color: var(--text-dark);
            overflow-x: hidden; display: flex; flex-direction: column; min-height: 100vh;
        }
        main { flex-grow: 1; }

        /* --- Utility Classes --- */
        .container { max-width: 960px; margin: 0 auto; padding: 0 15px; }
        .text-center { text-align: center; }
        .highlight { color: var(--primary-color); font-weight: bold; }
        .formula {
            font-family: 'Courier New', Courier, monospace;
            background-color: #e9ecef;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem auto;
            display: inline-block;
            border: 1px solid #ced4da;
            font-size: 1.1rem;
            max-width: 90%;
            overflow-x: auto;
        }

        /* Elements to be animated by observer */
        .fade-in-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity var(--animation-speed) ease-out, transform var(--animation-speed) ease-out;
        }
        .fade-in-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Add delays for staggering */
        .delay-1.visible { transition-delay: 0.1s; }
        .delay-2.visible { transition-delay: 0.2s; }
        .delay-3.visible { transition-delay: 0.3s; }
        .delay-4.visible { transition-delay: 0.4s; }
        .delay-5.visible { transition-delay: 0.5s; }
        .delay-6.visible { transition-delay: 0.6s; }
        .delay-7.visible { transition-delay: 0.7s; }


        .button-group { margin-top: 2rem; display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; }
        .action-button {
             display: inline-flex; align-items: center; justify-content: center; gap: 0.5em;
             padding: 0.8rem 1.5rem; font-size: 1rem; font-weight: bold;
             color: var(--text-light); background-color: var(--primary-color); border: none;
             border-radius: var(--border-radius); cursor: pointer;
             transition: background-color var(--transition-speed), transform var(--transition-speed), filter var(--transition-speed), box-shadow var(--transition-speed), opacity var(--animation-speed) ease-out, transform var(--animation-speed) ease-out; /* Add animation transition */
             margin-top: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             text-decoration: none; line-height: 1.2;
             opacity: 0; /* Start hidden if animated */
             transform: translateY(20px); /* Start offset if animated */
        }
        .action-button.visible { /* Make visible via observer */
            opacity: 1;
            transform: translateY(0);
        }
        .action-button i.fas {}
        .action-button:hover:not(:disabled) { background-color: #0056b3; transform: translateY(-2px) !important; box-shadow: 0 4px 8px rgba(0,0,0,0.15); } /* Use !important to override initial transform */
        .action-button:disabled { background-color: var(--secondary-color); cursor: not-allowed; transform: none !important; box-shadow: none; opacity: 0.7; }
        .action-button.success { background-color: var(--success-color); }
        .action-button.success:hover:not(:disabled) { background-color: #218838; }
        .action-button.secondary { background-color: var(--secondary-color); }
        .action-button.secondary:hover:not(:disabled) { background-color: #5a6268; }
        .action-button:active:not(:disabled) { transform: translateY(1px) scale(0.98) !important; filter: brightness(0.95); }

        /* --- Animations --- */
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 5px rgba(0, 123, 255, 0.3); } 50% { transform: scale(1.03); box-shadow: 0 0 15px rgba(0, 123, 255, 0.6); } 100% { transform: scale(1); box-shadow: 0 0 5px rgba(0, 123, 255, 0.3); } }
        @keyframes tada { from { transform: scale3d(1, 1, 1); } 10%, 20% { transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg); } 30%, 50%, 70%, 90% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg); } 40%, 60%, 80% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg); } to { transform: scale3d(1, 1, 1); } }
        .tada-anim { animation: tada 1s ease; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        @keyframes iconAppearCorrect { 0% { transform: scale(0.5) rotate(-15deg); opacity: 0; } 60% { transform: scale(1.2) rotate(5deg); opacity: 1; } 100% { transform: scale(1) rotate(0deg); opacity: 1; } }

        /* --- Minimal Retractable Nav --- */
        .minimal-nav-button { position: fixed; top: 15px; right: 15px; z-index: 1001; background-color: rgba(52, 58, 64, 0.75); color: var(--text-light); border: none; border-radius: var(--border-radius); padding: 8px 12px; cursor: pointer; transition: background-color var(--transition-speed), opacity var(--transition-speed), transform var(--transition-speed); font-size: 1.1rem; opacity: 0.6; box-shadow: 0 2px 5px rgba(0,0,0,0.2); line-height: 1; }
        .minimal-nav-button:hover { background-color: rgba(52, 58, 64, 0.95); opacity: 1; transform: scale(1.05); }
        .minimal-nav { position: fixed; top: 60px; right: 15px; z-index: 1000; background-color: var(--background-dark); border-radius: var(--border-radius); box-shadow: 0 5px 15px rgba(0,0,0,0.3); padding: 0.8rem; opacity: 0; transform: translateY(-15px) scale(0.95); transform-origin: top right; pointer-events: none; transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease; min-width: 200px; }
        body.nav-active .minimal-nav { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        .minimal-nav ul { list-style: none; margin: 0; padding: 0; }
        .minimal-nav ul li { margin-bottom: 5px; }
        .minimal-nav ul li:last-child { margin-bottom: 0; }
        .minimal-nav ul li a { display: flex; align-items: center; color: var(--text-light); text-decoration: none; padding: 0.6rem 1rem; border-radius: 4px; transition: background-color var(--transition-speed), color var(--transition-speed); white-space: nowrap; font-weight: 400; font-size: 0.95rem; }
        .minimal-nav ul li a i.fas { margin-right: 10px; width: 1.2em; text-align: center; opacity: 0.8; transition: opacity var(--transition-speed); }
        .minimal-nav ul li a:hover { background-color: var(--primary-color); color: var(--text-light); }
        .minimal-nav ul li a:hover i.fas { opacity: 1; }

        /* --- Header --- */
        .main-header { background: linear-gradient(135deg, var(--primary-color), #0056b3); color: var(--text-light); padding: 4rem 0 6rem; text-align: center; position: relative; overflow: hidden; }
        .main-header .container { /* Start visible */ }
        .main-header h1 { font-family: var(--font-title); font-size: 3rem; margin-bottom: 0.5rem; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); }
        .main-header p { font-size: 1.2rem; font-weight: 300; opacity: 0.9; }
        .header-shape { position: absolute; border-radius: 50%; background-color: rgba(255, 255, 255, 0.1); animation: pulse 5s infinite ease-in-out alternate; }
        .shape1 { width: 150px; height: 150px; bottom: -50px; left: 10%; animation-duration: 6s; }
        .shape2 { width: 80px; height: 80px; top: 50px; right: 15%; animation-duration: 4s; }
        .shape3 { width: 50px; height: 50px; bottom: 20px; right: 30%; animation-duration: 7s; }

        /* --- Section Styling --- */
        section { padding: 4rem 0; border-bottom: 1px solid #eee; }
        main section:last-of-type { border-bottom: none; padding-bottom: 0;}
        section h2 { font-family: var(--font-title); font-size: 2.2rem; color: var(--primary-color); margin-bottom: 2rem; text-align: center; position: relative; padding-bottom: 10px; }
        section h2::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 60px; height: 4px; background-color: var(--accent-color); border-radius: 2px; }

        /* --- Welcome Section --- */
        #welcome-m7 p { font-size: 1.1rem; max-width: 700px; margin: 0 auto 1rem; text-align: center; }

        /* --- Central Tendency Sections (Mean, Median, Mode) --- */
        .measure-card { /* Animated by observer */
            background-color: #fff; padding: 2rem; border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0,0,0,0.08); margin-top: 2rem;
            opacity: 0; transform: translateY(20px); /* Start state */
            transition: opacity var(--animation-speed) ease-out, transform var(--animation-speed) ease-out;
            border-left: 5px solid; /* Color indicator */
        }
        .measure-card.visible { opacity: 1; transform: translateY(0); }
        #mean .measure-card { border-left-color: var(--mean-color); }
        #median .measure-card { border-left-color: var(--median-color); }
        #mode .measure-card { border-left-color: var(--mode-color); }

        .measure-card h3 {
            font-family: var(--font-body); font-weight: 700; font-size: 1.8rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.8rem;
        }
        #mean h3 { color: var(--mean-color); }
        #median h3 { color: var(--median-color); }
        #mode h3 { color: var(--mode-color); }
        .measure-card h3 i { font-size: 1.5rem; }

        .measure-card .definition { font-style: italic; color: var(--secondary-color); margin-bottom: 1.5rem; }
        .measure-card .calculation ul, .measure-card .pros-cons ul { list-style: none; padding-left: 0; }
        .measure-card .calculation li, .measure-card .pros-cons li { margin-bottom: 0.8rem; position: relative; padding-left: 1.8em; }
        .measure-card .calculation li::before, .measure-card .pros-cons li::before {
             position: absolute; left: 0; top: 0px; font-family: "Font Awesome 5 Free"; font-weight: 900; font-size: 1em;
             width: 1.2em; text-align: center;
        }
        .measure-card .calculation li::before { content: '\f0da'; color: var(--primary-color); } /* fa-chevron-right */
        .measure-card .pros-cons .pro::before { content: '\f058'; color: var(--success-color); } /* fa-check-circle */
        .measure-card .pros-cons .con::before { content: '\f057'; color: var(--error-color); } /* fa-times-circle */

        .measure-card .example {
            background-color: #f8f9fa; border: 1px dashed #ced4da; padding: 1rem;
            border-radius: var(--border-radius); margin-top: 1.5rem; font-size: 0.95rem;
        }
        .measure-card .example strong { color: var(--primary-color); }
        .measure-card code { background-color: #e9ecef; padding: 0.2em 0.5em; border-radius: 4px; font-family: 'Courier New', Courier, monospace; color: #333; }

        /* --- Comparison Section --- */
        #comparison-m7 .comparison-table {
            width: 100%; margin-top: 2rem; border-collapse: collapse;
            background-color: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.07);
        }
        #comparison-m7 th, #comparison-m7 td {
            border: 1px solid #dee2e6; padding: 0.9rem 1rem; text-align: left;
            vertical-align: top;
        }
        #comparison-m7 th {
            background-color: var(--primary-color); color: var(--text-light); font-weight: bold;
            font-family: var(--font-body);
        }
        #comparison-m7 td:first-child { font-weight: bold; color: var(--secondary-color); }
        #comparison-m7 tr:nth-child(even) { background-color: #f8f9fa; }
        #comparison-m7 .highlight-mean { color: var(--mean-color); font-weight: bold; }
        #comparison-m7 .highlight-median { color: var(--median-color); font-weight: bold; }
        #comparison-m7 .highlight-mode { color: var(--mode-color); font-weight: bold; }

        /* --- Application Section --- */
         #application-ai-m7 ul { list-style: none; padding-left: 0; }
         #application-ai-m7 li { background-color: #fff; margin-bottom: 1rem; padding: 1.2rem 1.5rem; border-radius: var(--border-radius); box-shadow: 0 3px 8px rgba(0,0,0,0.06); display: flex; align-items: flex-start; gap: 1rem; }
         #application-ai-m7 li i { font-size: 1.5rem; color: var(--primary-color); margin-top: 3px; }
         #application-ai-m7 li strong { display: block; margin-bottom: 0.3rem; color: var(--primary-color); }

        /* --- Knowledge Check Section --- */
        #knowledge-check-m7 { background-color: #e9ecef; }
        .quiz-container { /* Animated by observer */
             background-color: #fff; padding: 2rem; border-radius: var(--border-radius); box-shadow: 0 5px 15px rgba(0,0,0,0.1); max-width: 700px; margin: 2rem auto 0;
             opacity: 0; transition: opacity var(--animation-speed) ease-out; /* Only fade opacity */
        }
        .quiz-container.visible { opacity: 1; }
        .quiz-question { font-size: 1.2rem; font-weight: bold; margin-bottom: 1.5rem; color: var(--text-dark); }
        .quiz-options button { display: block; width: 100%; padding: 1rem; margin-bottom: 1rem; text-align: left; font-size: 1rem; background-color: #f8f9fa; border: 1px solid #ced4da; border-radius: var(--border-radius); cursor: pointer; transition: background-color var(--transition-speed), border-color var(--transition-speed), transform var(--transition-speed); }
        .quiz-options button:not(:disabled):hover { background-color: #e2e6ea; border-color: #adb5bd; transform: translateX(5px); }
        .quiz-options button:disabled { cursor: default; opacity: 0.7; }
        .quiz-options button.correct { background-color: #d4edda; border-color: var(--success-color); color: #155724; font-weight: bold; }
        .quiz-options button.incorrect { background-color: #f8d7da; border-color: var(--error-color); color: #721c24; font-weight: bold; }
        .quiz-options button.incorrect.shake { animation: shake 0.5s ease; }
        .quiz-feedback { margin-top: 1.5rem; padding: 1rem; border-radius: var(--border-radius); font-weight: bold; text-align: center; opacity: 0; transition: opacity 0.5s ease, height 0.5s ease, margin-bottom 0.5s ease; height: 0; overflow: hidden; margin-bottom: 0;}
        .quiz-feedback.visible { opacity: 1; height: auto; margin-bottom: 1rem; }
        .quiz-feedback.correct { background-color: #d4edda; color: #155724; }
        .quiz-feedback.incorrect { background-color: #f8d7da; color: #721c24; }
        #next-question-btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.5em; margin: 1.5rem auto 0; padding: 0.8rem 1.5rem; font-size: 1rem; font-weight: bold; color: var(--text-light); background-color: var(--primary-color); border: none; border-radius: var(--border-radius); cursor: pointer; transition: background-color var(--transition-speed), transform var(--transition-speed), opacity 0.3s, visibility 0.3s; opacity: 0; visibility: hidden; }
        #next-question-btn:hover:not(:disabled) { background-color: #0056b3; transform: scale(1.05); }
        #next-question-btn.visible { opacity: 1; visibility: visible; }
        #next-question-btn:disabled { background-color: var(--secondary-color); cursor: not-allowed; transform: none; opacity: 0.7; }


        /* --- Completion Section Styling --- */
        .completion-section { padding: 4rem 0; text-align: center; background-color: var(--background-light); }
        .completion-section .icon { font-size: 4rem; color: var(--success-color); margin-bottom: 1rem; display: inline-block; animation: iconAppearCorrect 1s ease-out 0.5s forwards; opacity: 0; /* Initial state for animation */}
        /* Ensure completion elements are targeted by observer */
        .completion-section h2, .completion-section p {
            opacity: 0; transform: translateY(20px);
            transition: opacity var(--animation-speed) ease-out, transform var(--animation-speed) ease-out;
        }
        .completion-section h2.visible, .completion-section p.visible {
            opacity: 1; transform: translateY(0);
        }
        .completion-section .button-group { margin-top: 2.5rem; }
        .completion-section h2 { font-family: var(--font-title); font-size: 2.2rem; color: var(--primary-color); margin-bottom: 1rem; }
        .completion-section h2::after { display: none; }
        .completion-section p { font-size: 1.1rem; margin-top: 1rem; color: var(--secondary-color); max-width: 700px; margin-left: auto; margin-right: auto; line-height: 1.8; }


        /* --- Footer Styling --- */
        .main-footer {
            background-color: var(--background-light);
            color: var(--text-light);
            text-align: center;
            padding: 2rem 0;
            font-size: 0.9rem;
            margin-top: auto;
            border-top: 1px solid var(--background-light);
            opacity: 0.85;
        }
        .main-footer p { margin: 0; line-height: 1.5; }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            html { font-size: 15px; }
            .main-header h1 { font-size: 2.5rem; } .main-header p { font-size: 1.1rem; }
            section h2 { font-size: 1.8rem; }
            .measure-card h3 { font-size: 1.6rem; }
            .minimal-nav { min-width: 180px; } .minimal-nav ul li a { padding: 0.6rem 0.8rem; }
            .completion-section h2 { font-size: 2rem; }
            .completion-section .button-group { flex-direction: column; align-items: center; gap: 0.8rem; }
            .completion-section .action-button { width: 80%; max-width: 350px; margin-top: 0; }
            .main-footer { padding: 1.5rem 0; }
            #comparison-m7 th, #comparison-m7 td { padding: 0.7rem 0.8rem; font-size: 0.9rem; }
            #application-ai-m7 li { flex-direction: column; align-items: center; text-align: center; }
            #application-ai-m7 li i { margin-bottom: 0.5rem; }
        }
        @media (max-width: 480px) {
            html { font-size: 14px; }
            .main-header h1 { font-size: 2rem; } .main-header p { font-size: 1rem; }
            section h2 { font-size: 1.6rem; }
            .measure-card h3 { font-size: 1.4rem; }
            .measure-card .example { font-size: 0.9rem; }
            .quiz-options button { padding: 0.8rem; font-size: 0.95rem; }
            .minimal-nav-button { top: 10px; right: 10px; padding: 6px 10px; font-size: 1rem; }
            .minimal-nav { top: 48px; right: 10px; min-width: 160px; }
            .minimal-nav ul li a { padding: 0.5rem 0.7rem; font-size: 0.9rem;}
            .minimal-nav ul li a i.fas { margin-right: 8px; }
            .completion-section .icon { font-size: 3.5rem; }
            .completion-section h2 { font-size: 1.8rem; } .completion-section p { font-size: 1rem; }
            .completion-section .action-button { width: 90%; max-width: 300px; }
            .main-footer { padding: 1rem 0; font-size: 0.85rem; }
            #comparison-m7 th, #comparison-m7 td { padding: 0.6rem; font-size: 0.85rem; }
            #application-ai-m7 li { padding: 1rem 1.2rem; }
        }

    </style>
</head>
<body>

    <!-- ========= Minimal Nav Handle ========= -->
    <button id="minimal-nav-toggle" class="minimal-nav-button" aria-label="Alternar Menu de Navegação" aria-expanded="false">
        <i class="fas fa-bars"></i>
    </button>

    <!-- ========= Minimal Nav Panel ========= -->
    <nav id="minimal-nav-panel" class="minimal-nav">
        <ul>
            <!-- IMPORTANT: Changed ctp to math and module number to 7 -->
            <li><a href="math-practice-7.html"><i class="fas fa-pencil-alt fa-fw"></i> <span data-translate="nav_practice">Iniciar Prática</span></a></li>
            <li><a href="math-advanced-7.html"><i class="fas fa-flask fa-fw"></i> <span data-translate="nav_advanced">Prática Avançada</span></a></li>
            <li><a href="math-dashboard.html"><i class="fas fa-list fa-fw"></i> <span data-translate="nav_menu">Menu do Curso</span></a></li>
             <hr style="border: none; border-top: 1px solid var(--secondary-color); margin: 8px 0;">
             <!-- Section links updated for Module 7 content -->
             <li><a href="#welcome-m7"><i class="fas fa-door-open fa-fw"></i> <span data-translate="nav_welcome_m7">Boas-vindas M7</span></a></li>
             <li><a href="#mean"><i class="fas fa-calculator fa-fw"></i> <span data-translate="nav_mean">Média</span></a></li>
             <li><a href="#median"><i class="fas fa-sort-amount-down fa-fw"></i> <span data-translate="nav_median">Mediana</span></a></li>
             <li><a href="#mode"><i class="fas fa-chart-bar fa-fw"></i> <span data-translate="nav_mode">Moda</span></a></li>
             <li><a href="#comparison-m7"><i class="fas fa-balance-scale fa-fw"></i> <span data-translate="nav_comparison">Comparação</span></a></li>
             <li><a href="#application-ai-m7"><i class="fas fa-brain fa-fw"></i> <span data-translate="nav_application">Aplicações</span></a></li>
             <li><a href="#knowledge-check-m7"><i class="fas fa-check-double fa-fw"></i> <span data-translate="nav_quiz">Teste Rápido</span></a></li>
             <li><a href="#completion-m7"><i class="fas fa-flag-checkered fa-fw"></i> <span data-translate="completion_theory_title_m7">Conclusão</span></a></li>
        </ul>
    </nav>

    <header class="main-header">
        <div class="header-shape shape1"></div>
        <div class="header-shape shape2"></div>
        <div class="header-shape shape3"></div>
        <div class="container"> <!-- Start visible -->
            <!-- IMPORTANT: Title and subtitle updated for Module 7 -->
            <h1 data-translate="header_title_m7">Módulo 7: Medidas de Tendência Central</h1>
            <p data-translate="header_subtitle_m7">Encontrando o "centro" dos seus dados: Média, Mediana e Moda.</p>
        </div>
    </header>

    <main>
        <!-- ========= Welcome Section M7 ========= -->
        <section id="welcome-m7">
            <div class="container">
                <h2 class="fade-in-on-scroll" data-translate="welcome_title_m7">🎯 Onde os Dados se Concentram?</h2>
                <p class="fade-in-on-scroll delay-1" data-translate="welcome_p1_m7">
                    Bem-vindo ao Módulo 7! Em análise de dados e IA, frequentemente lidamos com grandes conjuntos de informações. Uma das primeiras etapas para entender esses dados é encontrar um valor "típico" ou "central". Isso é conhecido como <span class="highlight">tendência central</span>.
                </p>
                <p class="fade-in-on-scroll delay-2" data-translate="welcome_p2_m7">
                    Neste módulo, exploraremos as três medidas mais comuns de tendência central: a <span class="highlight">Média</span>, a <span class="highlight">Mediana</span> e a <span class="highlight">Moda</span>. Cada uma oferece uma perspectiva diferente sobre o "centro" dos dados e tem suas próprias aplicações e limitações. Vamos descobrir como calculá-las e quando usar cada uma!
                </p>
            </div>
        </section>

        <!-- ========= Mean Section ========= -->
        <section id="mean">
            <div class="container">
                <h2 class="fade-in-on-scroll" data-translate="mean_title">Média Aritmética (Mean)</h2>
                <p class="text-center fade-in-on-scroll delay-1" data-translate="mean_subtitle">A medida de tendência central mais conhecida: o valor médio.</p>

                <div class="measure-card fade-in-on-scroll delay-2">
                    <h3><i class="fas fa-calculator"></i> <span data-translate="mean_card_title">Média</span></h3>
                    <p class="definition" data-translate="mean_definition">
                        A média aritmética é a soma de todos os valores em um conjunto de dados dividida pelo número total de valores.
                    </p>

                    <h4><i class="fas fa-cogs"></i> <span data-translate="calculation_title">Cálculo</span></h4>
                    <div class="calculation">
                        <ul>
                            <li data-translate="mean_step1">Some todos os valores (Σx) no conjunto de dados.</li>
                            <li data-translate="mean_step2">Conte o número total de valores (n).</li>
                            <li data-translate="mean_step3">Divida a soma pelo número total de valores (Σx / n).</li>
                        </ul>
                        <div class="text-center">
                           <code class="formula" data-translate="mean_formula">Média (μ ou x̄) = (x₁ + x₂ + ... + x<sub style="font-size: 0.7em;">n</sub>) / n = Σx / n</code>
                        </div>
                    </div>

                    <h4><i class="fas fa-balance-scale-right"></i> <span data-translate="pros_cons_title">Prós e Contras</span></h4>
                    <div class="pros-cons">
                        <ul>
                           <li class="pro" data-translate="mean_pro1">Utiliza todos os valores do conjunto de dados.</li>
                           <li class="pro" data-translate="mean_pro2">É a medida mais comum e fácil de entender para dados simétricos.</li>
                           <li class="con" data-translate="mean_con1">Altamente sensível a valores extremos (<span class="highlight">outliers</span>). Um único valor muito alto ou baixo pode distorcer significativamente a média.</li>
                           <li class="con" data-translate="mean_con2">Não é ideal para dados muito assimétricos (<span class="highlight">skewed data</span>).</li>
                        </ul>
                    </div>

                    <h4><i class="fas fa-lightbulb"></i> <span data-translate="example_title">Exemplo</span></h4>
                    <div class="example" data-translate="mean_example">
                        Considere as notas [7, 8, 6, 9, 10]. <br>
                        <strong>Soma:</strong> 7 + 8 + 6 + 9 + 10 = 40 <br>
                        <strong>Número de valores (n):</strong> 5 <br>
                        <strong>Média:</strong> 40 / 5 = <code>8</code>. <br>
                        Agora, adicione um outlier [7, 8, 6, 9, 10, <strong>0</strong>]. <br>
                        <strong>Soma:</strong> 40 + 0 = 40 <br>
                        <strong>Número de valores (n):</strong> 6 <br>
                        <strong>Nova Média:</strong> 40 / 6 ≈ <code>6.67</code>. Veja como o outlier puxou a média para baixo!
                    </div>
                     <div class="example" data-translate="mean_example_python">
                        <strong>Em Python:</strong> Para uma lista <code>dados = [7, 8, 6, 9, 10]</code>, a média é <code>sum(dados) / len(dados)</code>.
                    </div>
                </div>
            </div>
        </section>

        <!-- ========= Median Section ========= -->
        <section id="median">
            <div class="container">
                <h2 class="fade-in-on-scroll" data-translate="median_title">Mediana (Median)</h2>
                <p class="text-center fade-in-on-scroll delay-1" data-translate="median_subtitle">O valor que divide o conjunto de dados ordenado ao meio.</p>

                <div class="measure-card fade-in-on-scroll delay-2">
                    <h3><i class="fas fa-sort-amount-down"></i> <span data-translate="median_card_title">Mediana</span></h3>
                    <p class="definition" data-translate="median_definition">
                        A mediana é o valor central de um conjunto de dados que foi ordenado do menor para o maior. Metade dos dados está abaixo da mediana e metade está acima.
                    </p>

                    <h4><i class="fas fa-cogs"></i> <span data-translate="calculation_title">Cálculo</span></h4>
                    <div class="calculation">
                        <ul>
                            <li data-translate="median_step1">Ordene o conjunto de dados em ordem crescente.</li>
                            <li data-translate="median_step2">Se o número de valores (n) for ímpar, a mediana é o valor exatamente no meio (posição (n+1)/2).</li>
                            <li data-translate="median_step3">Se o número de valores (n) for par, a mediana é a média dos dois valores centrais (posições n/2 e (n/2)+1).</li>
                        </ul>
                    </div>

                    <h4><i class="fas fa-balance-scale-right"></i> <span data-translate="pros_cons_title">Prós e Contras</span></h4>
                    <div class="pros-cons">
                        <ul>
                           <li class="pro" data-translate="median_pro1">Robusta a valores extremos (<span class="highlight">outliers</span>). Não é afetada por valores muito altos ou baixos nas pontas.</li>
                           <li class="pro" data-translate="median_pro2">Boa medida de tendência central para dados assimétricos (<span class="highlight">skewed data</span>).</li>
                           <li class="con" data-translate="median_con1">Não utiliza todos os valores do conjunto de dados para seu cálculo (apenas os centrais após ordenação).</li>
                           <li class="con" data-translate="median_con2">Pode ser um pouco mais complexa de calcular manualmente para grandes datasets do que a média.</li>
                        </ul>
                    </div>

                    <h4><i class="fas fa-lightbulb"></i> <span data-translate="example_title">Exemplo</span></h4>
                    <div class="example" data-translate="median_example_odd">
                        Notas: [7, 8, 6, 9, 10]. <br>
                        <strong>Ordenado:</strong> [6, 7, <strong>8</strong>, 9, 10] (n=5, ímpar) <br>
                        <strong>Posição central:</strong> (5+1)/2 = 3ª posição. <br>
                        <strong>Mediana:</strong> <code>8</code>.
                    </div>
                     <div class="example" data-translate="median_example_even">
                        Notas com outlier: [7, 8, 6, 9, 10, 0]. <br>
                        <strong>Ordenado:</strong> [0, 6, <strong>7, 8</strong>, 9, 10] (n=6, par) <br>
                        <strong>Posições centrais:</strong> 6/2 = 3ª e (6/2)+1 = 4ª posições. Valores: 7 e 8. <br>
                        <strong>Mediana:</strong> (7 + 8) / 2 = <code>7.5</code>. Note como a mediana mudou menos que a média com o outlier!
                    </div>
                     <div class="example" data-translate="median_example_python">
                        <strong>Em Python (com NumPy):</strong> Usando a biblioteca NumPy: <code>import numpy as np</code>, <code>dados = [0, 6, 7, 8, 9, 10]</code>, a mediana é <code>np.median(dados)</code>.
                    </div>
                </div>
            </div>
        </section>

        <!-- ========= Mode Section ========= -->
        <section id="mode">
            <div class="container">
                <h2 class="fade-in-on-scroll" data-translate="mode_title">Moda (Mode)</h2>
                <p class="text-center fade-in-on-scroll delay-1" data-translate="mode_subtitle">O valor que aparece com maior frequência no conjunto de dados.</p>

                <div class="measure-card fade-in-on-scroll delay-2">
                    <h3><i class="fas fa-chart-bar"></i> <span data-translate="mode_card_title">Moda</span></h3>
                    <p class="definition" data-translate="mode_definition">
                        A moda é o valor ou categoria que ocorre mais vezes em um conjunto de dados. Um conjunto pode ter uma moda (unimodal), duas modas (bimodal), múltiplas modas (multimodal) ou nenhuma moda (se todos os valores ocorrerem com a mesma frequência).
                    </p>

                    <h4><i class="fas fa-cogs"></i> <span data-translate="calculation_title">Cálculo</span></h4>
                    <div class="calculation">
                        <ul>
                            <li data-translate="mode_step1">Conte a frequência de cada valor distinto no conjunto de dados.</li>
                            <li data-translate="mode_step2">O valor (ou valores) com a maior frequência é a moda.</li>
                            <li data-translate="mode_step3">Se nenhum valor se repetir mais que os outros, não há moda.</li>
                        </ul>
                    </div>

                    <h4><i class="fas fa-balance-scale-right"></i> <span data-translate="pros_cons_title">Prós e Contras</span></h4>
                    <div class="pros-cons">
                        <ul>
                           <li class="pro" data-translate="mode_pro1">Pode ser usada para dados numéricos e <span class="highlight">categóricos</span> (qualitativos), como cores, tipos de produto, etc.</li>
                           <li class="pro" data-translate="mode_pro2">Não é afetada por outliers.</li>
                           <li class="pro" data-translate="mode_pro3">Identifica o valor mais comum, o que pode ser muito útil em certos contextos (ex: item mais vendido).</li>
                           <li class="con" data-translate="mode_con1">Pode não existir ou pode haver múltiplas modas, tornando a interpretação menos direta.</li>
                           <li class="con" data-translate="mode_con2">Pode não representar bem o centro dos dados, especialmente se a moda ocorrer perto das extremidades da distribuição.</li>
                            <li class="con" data-translate="mode_con3">Não utiliza todos os valores do conjunto de dados.</li>
                        </ul>
                    </div>

                    <h4><i class="fas fa-lightbulb"></i> <span data-translate="example_title">Exemplo</span></h4>
                    <div class="example" data-translate="mode_example_numeric">
                        Respostas de pesquisa (escala 1-5): [4, 5, 3, 4, 2, 4, 5, 1, 4] <br>
                        <strong>Frequências:</strong> 1(1), 2(1), 3(1), <strong>4(4)</strong>, 5(2) <br>
                        <strong>Moda:</strong> <code>4</code> (unimodal).
                    </div>
                    <div class="example" data-translate="mode_example_categorical">
                        Cores favoritas: [Azul, Verde, Azul, Vermelho, Verde, Azul] <br>
                        <strong>Frequências:</strong> <strong>Azul(3)</strong>, Verde(2), Vermelho(1) <br>
                        <strong>Moda:</strong> <code>Azul</code>.
                    </div>
                    <div class="example" data-translate="mode_example_bimodal">
                        Dados: [10, 20, 30, 20, 10, 40] <br>
                        <strong>Frequências:</strong> <strong>10(2)</strong>, <strong>20(2)</strong>, 30(1), 40(1) <br>
                        <strong>Moda:</strong> <code>10 e 20</code> (bimodal).
                    </div>
                    <div class="example" data-translate="mode_example_none">
                        Dados: [1, 2, 3, 4, 5] <br>
                        <strong>Frequências:</strong> Todos os valores ocorrem 1 vez. <br>
                        <strong>Moda:</strong> <code>Nenhuma</code>.
                    </div>
                     <div class="example" data-translate="mode_example_python">
                        <strong>Em Python (com SciPy ou statistics):</strong> Usando a biblioteca SciPy: <code>from scipy import stats</code>, <code>dados = [4, 5, 3, 4, 2, 4, 5, 1, 4]</code>, a moda é <code>stats.mode(dados)</code>. Ou com `statistics`: `import statistics`, `statistics.mode(dados)`.
                    </div>
                </div>
            </div>
        </section>

        <!-- ========= Comparison Section M7 ========= -->
        <section id="comparison-m7">
            <div class="container">
                <h2 class="fade-in-on-scroll" data-translate="comparison_title_m7">📊 Média vs. Mediana vs. Moda: Quando Usar?</h2>
                <p class="text-center fade-in-on-scroll delay-1" data-translate="comparison_subtitle_m7">Escolhendo a medida certa para a sua análise.</p>

                <div class="fade-in-on-scroll delay-2">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th data-translate="comparison_header_feature">Característica</th>
                                <th data-translate="comparison_header_mean">Média</th>
                                <th data-translate="comparison_header_median">Mediana</th>
                                <th data-translate="comparison_header_mode">Moda</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-translate="comparison_row_datatype">Tipo de Dado</td>
                                <td data-translate="comparison_cell_mean_datatype">Numérico (Intervalar/Ratio)</td>
                                <td data-translate="comparison_cell_median_datatype">Numérico (Ordinal, Intervalar/Ratio)</td>
                                <td data-translate="comparison_cell_mode_datatype">Numérico e Categórico (Nominal, Ordinal)</td>
                            </tr>
                            <tr>
                                <td data-translate="comparison_row_outliers">Sensibilidade a Outliers</td>
                                <td class="highlight-mean" data-translate="comparison_cell_mean_outliers">Alta</td>
                                <td class="highlight-median" data-translate="comparison_cell_median_outliers">Baixa / Nenhuma</td>
                                <td class="highlight-mode" data-translate="comparison_cell_mode_outliers">Baixa / Nenhuma</td>
                            </tr>
                             <tr>
                                <td data-translate="comparison_row_distribution">Uso em Distribuição Simétrica</td>
                                <td data-translate="comparison_cell_mean_sym">Ideal (Média ≈ Mediana ≈ Moda)</td>
                                <td data-translate="comparison_cell_median_sym">Bom</td>
                                <td data-translate="comparison_cell_mode_sym">Bom</td>
                            </tr>
                            <tr>
                                <td data-translate="comparison_row_skewed">Uso em Distribuição Assimétrica</td>
                                <td data-translate="comparison_cell_mean_skew">Menos ideal (puxada pela cauda longa)</td>
                                <td class="highlight-median" data-translate="comparison_cell_median_skew">Geralmente preferível</td>
                                <td data-translate="comparison_cell_mode_skew">Pode ser útil, mas pode não representar o centro</td>
                            </tr>
                             <tr>
                                <td data-translate="comparison_row_existence">Existência/Unicidade</td>
                                <td data-translate="comparison_cell_mean_exist">Sempre existe e é única</td>
                                <td data-translate="comparison_cell_median_exist">Sempre existe e é única</td>
                                <td data-translate="comparison_cell_mode_exist">Pode não existir, ou pode haver múltiplas modas</td>
                            </tr>
                            <tr>
                                <td data-translate="comparison_row_usage">Principal Vantagem</td>
                                <td data-translate="comparison_cell_mean_usage">Usa todos os dados, base para muitas estatísticas</td>
                                <td data-translate="comparison_cell_median_usage">Robusta a outliers, boa para dados assimétricos</td>
                                <td data-translate="comparison_cell_mode_usage">Aplicável a dados categóricos, identifica o mais comum</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                 <p class="text-center fade-in-on-scroll delay-3" data-translate="comparison_conclusion_m7" style="margin-top: 2rem;">
                    A escolha depende do <span class="highlight">tipo de dados</span> que você tem e do que você <span class="highlight">quer representar</span> sobre eles. Muitas vezes, analisar as três juntas oferece a visão mais completa!
                 </p>
            </div>
        </section>

        <!-- ========= Application Section M7 ========= -->
        <section id="application-ai-m7">
             <div class="container">
                 <h2 class="fade-in-on-scroll" data-translate="application_title_m7">💡 Aplicações em IA e Computação</h2>
                 <p class="text-center fade-in-on-scroll delay-1" data-translate="application_subtitle_m7">Como essas medidas nos ajudam em cenários práticos.</p>

                <ul class="fade-in-on-scroll delay-2">
                    <li data-translate="application_item1">
                        <i class="fas fa-database"></i>
                        <div>
                            <strong>Sumarização de Dados:</strong> Fornecer uma visão rápida e resumida de conjuntos de dados numéricos (ex: idade média dos usuários, tempo mediano de sessão, categoria de produto modal).
                        </div>
                    </li>
                     <li data-translate="application_item2">
                        <i class="fas fa-fill-drip"></i>
                         <div>
                             <strong>Pré-processamento / Imputação de Dados Faltantes:</strong> Usar a média, mediana ou moda para preencher valores ausentes em um dataset, dependendo da distribuição e tipo da variável (ex: preencher idade faltante com a média, categoria faltante com a moda).
                         </div>
                    </li>
                     <li data-translate="application_item3">
                        <i class="fas fa-chart-line"></i>
                        <div>
                             <strong>Análise Exploratória de Dados (EDA):</strong> Entender a distribuição central de features (variáveis) antes de construir modelos de Machine Learning. Comparar média e mediana pode indicar assimetria.
                        </div>
                    </li>
                     <li data-translate="application_item4">
                        <i class="fas fa-tachometer-alt"></i>
                         <div>
                             <strong>Avaliação de Desempenho:</strong> Calcular métricas médias de desempenho de sistemas ou modelos (ex: tempo médio de resposta de uma API, taxa média de erro de um classificador). A mediana pode ser usada para robustez.
                         </div>
                    </li>
                     <li data-translate="application_item5">
                         <i class="fas fa-code"></i>
                         <div>
                            <strong>Desenvolvimento de Algoritmos:</strong> Algumas técnicas, como k-Means clustering, usam a média (centroide) como parte fundamental do seu funcionamento.
                        </div>
                    </li>
                </ul>
             </div>
        </section>

        <!-- ========= Knowledge Check Section M7 ========= -->
        <section id="knowledge-check-m7">
            <div class="container">
                <h2 class="fade-in-on-scroll" data-translate="quiz_title">🧠 Teste Rápido!</h2>
                <div class="quiz-container fade-in-on-scroll delay-1"> <!-- Observe container -->
                    <div id="quiz-area">
                         <p style="text-align: center; padding: 2rem 0;">Carregando quiz...</p>
                    </div>
                    <div id="quiz-feedback" class="quiz-feedback"></div>
                    <button id="next-question-btn" data-translate="quiz_next_button">Próxima Pergunta</button>
                </div>
            </div>
        </section>

        <!-- ========= Completion Section M7 ========= -->
        <section id="completion-m7" class="completion-section"> <!-- Added ID for nav link -->
            <div class="container">
                 <div class="icon">
                    <i class="fas fa-calculator"></i>
                    <i class="fas fa-sort-amount-down"></i>
                    <i class="fas fa-chart-bar"></i>
                    <i class="fas fa-star"></i>
                </div>
                <!-- IMPORTANT: Title and description updated for Module 7 -->
                <h2 class="fade-in-on-scroll delay-1" data-translate="completion_theory_title_m7">Teoria do Módulo 7 Completa!</h2>
                <p class="fade-in-on-scroll delay-2" data-translate="completion_theory_desc_m7">
                    Excelente! Você agora compreende as três principais medidas de tendência central: Média, Mediana e Moda. Saber calculá-las e, mais importante, quando usar cada uma, é essencial para analisar dados de forma eficaz em IA e ciência de dados. <br>
                    Pronto para aplicar esse conhecimento? Vá para a <strong>Zona de Prática</strong> ou a <strong>Prática Avançada</strong> do Módulo 7.
                </p>
                <div class="button-group">
                    <!-- Buttons observed -->
                    <!-- IMPORTANT: Links updated to math-dashboard, math-practice-7, math-advanced-7 -->
                    <a href="math-dashboard.html" class="action-button secondary fade-in-on-scroll delay-3"><i class="fas fa-list"></i> <span data-translate="nav_menu">Menu do Curso</span></a>
                    <a href="math-practice-7.html" class="action-button success fade-in-on-scroll delay-4"><i class="fas fa-pencil-alt"></i> <span data-translate="nav_practice">Iniciar Prática</span></a>
                    <a href="math-advanced-7.html" class="action-button secondary fade-in-on-scroll delay-5"><i class="fas fa-flask"></i> <span data-translate="nav_advanced">Prática Avançada</span></a>
                </div>
            </div>
        </section>

    </main>

    <footer class="main-footer">
        <div class="container">
            <p data-translate="footer_copyright"></p>
        </div>
    </footer>

    <script>
    // --- Translations Object (Portuguese Only - Module 7) ---
    const translations = {
        pt: {
            // General
            "page_title": "Módulo 7: Medidas de Tendência Central",
            "nav_practice": "Iniciar Prática",
            "nav_advanced": "Prática Avançada",
            "nav_menu": "Menu do Curso",
            "calculation_title": "Cálculo",
            "pros_cons_title": "Prós e Contras",
            "example_title": "Exemplo",
            "footer_copyright": "© 2024 Matemática para IA. Todos os direitos reservados.",
            "quiz_title": "🧠 Teste Rápido!",
            "quiz_next_button": "Próxima Pergunta",
            "quiz_feedback_correct": "Correto! 🎉",
            "quiz_feedback_incorrect": "Não foi bem assim! A resposta correta era: {correctAnswerText}",
            "quiz_final_score_title": "Teste Rápido Completo!",
            "quiz_final_score_summary": "Você respondeu {score} de {total} perguntas corretamente.",
            "quiz_final_score_perfect": "Excelente! Você compreendeu bem as medidas de tendência central.",
            "quiz_final_score_good": "Bom trabalho! Continue praticando para solidificar os conceitos.",

            // Header
            "header_title_m7": "Módulo 7: Medidas de Tendência Central",
            "header_subtitle_m7": "Encontrando o 'centro' dos seus dados: Média, Mediana e Moda.",

            // Nav Specific M7
            "nav_welcome_m7": "Boas-vindas M7",
            "nav_mean": "Média",
            "nav_median": "Mediana",
            "nav_mode": "Moda",
            "nav_comparison": "Comparação",
            "nav_application": "Aplicações",
            "nav_quiz": "Teste Rápido", // Reused key is fine
            "completion_theory_title_m7": "Conclusão", // Reused key adjusted below

            // Welcome M7
            "welcome_title_m7": "🎯 Onde os Dados se Concentram?",
            "welcome_p1_m7": "Bem-vindo ao Módulo 7! Em análise de dados e IA, frequentemente lidamos com grandes conjuntos de informações. Uma das primeiras etapas para entender esses dados é encontrar um valor 'típico' ou 'central'. Isso é conhecido como <span class=\"highlight\">tendência central</span>.",
            "welcome_p2_m7": "Neste módulo, exploraremos as três medidas mais comuns de tendência central: a <span class=\"highlight\">Média</span>, a <span class=\"highlight\">Mediana</span> e a <span class=\"highlight\">Moda</span>. Cada uma oferece uma perspectiva diferente sobre o 'centro' dos dados e tem suas próprias aplicações e limitações. Vamos descobrir como calculá-las e quando usar cada uma!",

            // Mean Section
            "mean_title": "Média Aritmética (Mean)",
            "mean_subtitle": "A medida de tendência central mais conhecida: o valor médio.",
            "mean_card_title": "Média",
            "mean_definition": "A média aritmética é a soma de todos os valores em um conjunto de dados dividida pelo número total de valores.",
            "mean_step1": "Some todos os valores (Σx) no conjunto de dados.",
            "mean_step2": "Conte o número total de valores (n).",
            "mean_step3": "Divida a soma pelo número total de valores (Σx / n).",
            "mean_formula": "Média (μ ou x̄) = (x₁ + x₂ + ... + x<sub style=\"font-size: 0.7em;\">n</sub>) / n = Σx / n",
            "mean_pro1": "Utiliza todos os valores do conjunto de dados.",
            "mean_pro2": "É a medida mais comum e fácil de entender para dados simétricos.",
            "mean_con1": "Altamente sensível a valores extremos (<span class=\"highlight\">outliers</span>). Um único valor muito alto ou baixo pode distorcer significativamente a média.",
            "mean_con2": "Não é ideal para dados muito assimétricos (<span class=\"highlight\">skewed data</span>).",
            "mean_example": "Considere as notas [7, 8, 6, 9, 10]. <br> <strong>Soma:</strong> 7 + 8 + 6 + 9 + 10 = 40 <br> <strong>Número de valores (n):</strong> 5 <br> <strong>Média:</strong> 40 / 5 = <code>8</code>. <br> Agora, adicione um outlier [7, 8, 6, 9, 10, <strong>0</strong>]. <br> <strong>Soma:</strong> 40 + 0 = 40 <br> <strong>Número de valores (n):</strong> 6 <br> <strong>Nova Média:</strong> 40 / 6 ≈ <code>6.67</code>. Veja como o outlier puxou a média para baixo!",
            "mean_example_python": "<strong>Em Python:</strong> Para uma lista <code>dados = [7, 8, 6, 9, 10]</code>, a média é <code>sum(dados) / len(dados)</code>.",

            // Median Section
            "median_title": "Mediana (Median)",
            "median_subtitle": "O valor que divide o conjunto de dados ordenado ao meio.",
            "median_card_title": "Mediana",
            "median_definition": "A mediana é o valor central de um conjunto de dados que foi ordenado do menor para o maior. Metade dos dados está abaixo da mediana e metade está acima.",
            "median_step1": "Ordene o conjunto de dados em ordem crescente.",
            "median_step2": "Se o número de valores (n) for ímpar, a mediana é o valor exatamente no meio (posição (n+1)/2).",
            "median_step3": "Se o número de valores (n) for par, a mediana é a média dos dois valores centrais (posições n/2 e (n/2)+1).",
            "median_pro1": "Robusta a valores extremos (<span class=\"highlight\">outliers</span>). Não é afetada por valores muito altos ou baixos nas pontas.",
            "median_pro2": "Boa medida de tendência central para dados assimétricos (<span class=\"highlight\">skewed data</span>).",
            "median_con1": "Não utiliza todos os valores do conjunto de dados para seu cálculo (apenas os centrais após ordenação).",
            "median_con2": "Pode ser um pouco mais complexa de calcular manualmente para grandes datasets do que a média.",
            "median_example_odd": "Notas: [7, 8, 6, 9, 10]. <br> <strong>Ordenado:</strong> [6, 7, <strong>8</strong>, 9, 10] (n=5, ímpar) <br> <strong>Posição central:</strong> (5+1)/2 = 3ª posição. <br> <strong>Mediana:</strong> <code>8</code>.",
            "median_example_even": "Notas com outlier: [7, 8, 6, 9, 10, 0]. <br> <strong>Ordenado:</strong> [0, 6, <strong>7, 8</strong>, 9, 10] (n=6, par) <br> <strong>Posições centrais:</strong> 6/2 = 3ª e (6/2)+1 = 4ª posições. Valores: 7 e 8. <br> <strong>Mediana:</strong> (7 + 8) / 2 = <code>7.5</code>. Note como a mediana mudou menos que a média com o outlier!",
            "median_example_python": "<strong>Em Python (com NumPy):</strong> Usando a biblioteca NumPy: <code>import numpy as np</code>, <code>dados = [0, 6, 7, 8, 9, 10]</code>, a mediana é <code>np.median(dados)</code>.",

            // Mode Section
            "mode_title": "Moda (Mode)",
            "mode_subtitle": "O valor que aparece com maior frequência no conjunto de dados.",
            "mode_card_title": "Moda",
            "mode_definition": "A moda é o valor ou categoria que ocorre mais vezes em um conjunto de dados. Um conjunto pode ter uma moda (unimodal), duas modas (bimodal), múltiplas modas (multimodal) ou nenhuma moda (se todos os valores ocorrerem com a mesma frequência).",
            "mode_step1": "Conte a frequência de cada valor distinto no conjunto de dados.",
            "mode_step2": "O valor (ou valores) com a maior frequência é a moda.",
            "mode_step3": "Se nenhum valor se repetir mais que os outros, não há moda.",
            "mode_pro1": "Pode ser usada para dados numéricos e <span class=\"highlight\">categóricos</span> (qualitativos), como cores, tipos de produto, etc.",
            "mode_pro2": "Não é afetada por outliers.",
            "mode_pro3": "Identifica o valor mais comum, o que pode ser muito útil em certos contextos (ex: item mais vendido).",
            "mode_con1": "Pode não existir ou pode haver múltiplas modas, tornando a interpretação menos direta.",
            "mode_con2": "Pode não representar bem o centro dos dados, especialmente se a moda ocorrer perto das extremidades da distribuição.",
            "mode_con3": "Não utiliza todos os valores do conjunto de dados.",
            "mode_example_numeric": "Respostas de pesquisa (escala 1-5): [4, 5, 3, 4, 2, 4, 5, 1, 4] <br> <strong>Frequências:</strong> 1(1), 2(1), 3(1), <strong>4(4)</strong>, 5(2) <br> <strong>Moda:</strong> <code>4</code> (unimodal).",
            "mode_example_categorical": "Cores favoritas: [Azul, Verde, Azul, Vermelho, Verde, Azul] <br> <strong>Frequências:</strong> <strong>Azul(3)</strong>, Verde(2), Vermelho(1) <br> <strong>Moda:</strong> <code>Azul</code>.",
            "mode_example_bimodal": "Dados: [10, 20, 30, 20, 10, 40] <br> <strong>Frequências:</strong> <strong>10(2)</strong>, <strong>20(2)</strong>, 30(1), 40(1) <br> <strong>Moda:</strong> <code>10 e 20</code> (bimodal).",
             "mode_example_none": "Dados: [1, 2, 3, 4, 5] <br> <strong>Frequências:</strong> Todos os valores ocorrem 1 vez. <br> <strong>Moda:</strong> <code>Nenhuma</code>.",
            "mode_example_python": "<strong>Em Python (com SciPy ou statistics):</strong> Usando a biblioteca SciPy: <code>from scipy import stats</code>, <code>dados = [4, 5, 3, 4, 2, 4, 5, 1, 4]</code>, a moda é <code>stats.mode(dados)</code>. Ou com `statistics`: `import statistics`, `statistics.mode(dados)`.",

             // Comparison Section M7
             "comparison_title_m7": "📊 Média vs. Mediana vs. Moda: Quando Usar?",
             "comparison_subtitle_m7": "Escolhendo a medida certa para a sua análise.",
             "comparison_header_feature": "Característica",
             "comparison_header_mean": "Média",
             "comparison_header_median": "Mediana",
             "comparison_header_mode": "Moda",
             "comparison_row_datatype": "Tipo de Dado",
             "comparison_cell_mean_datatype": "Numérico (Intervalar/Ratio)",
             "comparison_cell_median_datatype": "Numérico (Ordinal, Intervalar/Ratio)",
             "comparison_cell_mode_datatype": "Numérico e Categórico (Nominal, Ordinal)",
             "comparison_row_outliers": "Sensibilidade a Outliers",
             "comparison_cell_mean_outliers": "Alta",
             "comparison_cell_median_outliers": "Baixa / Nenhuma",
             "comparison_cell_mode_outliers": "Baixa / Nenhuma",
             "comparison_row_distribution": "Uso em Distribuição Simétrica",
            "comparison_cell_mean_sym": "Ideal (Média ≈ Mediana ≈ Moda)",
            "comparison_cell_median_sym": "Bom",
            "comparison_cell_mode_sym": "Bom",
            "comparison_row_skewed": "Uso em Distribuição Assimétrica",
            "comparison_cell_mean_skew": "Menos ideal (puxada pela cauda longa)",
            "comparison_cell_median_skew": "Geralmente preferível",
            "comparison_cell_mode_skew": "Pode ser útil, mas pode não representar o centro",
            "comparison_row_existence": "Existência/Unicidade",
            "comparison_cell_mean_exist": "Sempre existe e é única",
            "comparison_cell_median_exist": "Sempre existe e é única",
            "comparison_cell_mode_exist": "Pode não existir, ou pode haver múltiplas modas",
            "comparison_row_usage": "Principal Vantagem",
            "comparison_cell_mean_usage": "Usa todos os dados, base para muitas estatísticas",
            "comparison_cell_median_usage": "Robusta a outliers, boa para dados assimétricos",
            "comparison_cell_mode_usage": "Aplicável a dados categóricos, identifica o mais comum",
            "comparison_conclusion_m7": "A escolha depende do <span class=\"highlight\">tipo de dados</span> que você tem e do que você <span class=\"highlight\">quer representar</span> sobre eles. Muitas vezes, analisar as três juntas oferece a visão mais completa!",

            // Application Section M7
            "application_title_m7": "💡 Aplicações em IA e Computação",
            "application_subtitle_m7": "Como essas medidas nos ajudam em cenários práticos.",
            "application_item1": "<strong>Sumarização de Dados:</strong> Fornecer uma visão rápida e resumida de conjuntos de dados numéricos (ex: idade média dos usuários, tempo mediano de sessão, categoria de produto modal).",
            "application_item2": "<strong>Pré-processamento / Imputação de Dados Faltantes:</strong> Usar a média, mediana ou moda para preencher valores ausentes em um dataset, dependendo da distribuição e tipo da variável (ex: preencher idade faltante com a média, categoria faltante com a moda).",
            "application_item3": "<strong>Análise Exploratória de Dados (EDA):</strong> Entender a distribuição central de features (variáveis) antes de construir modelos de Machine Learning. Comparar média e mediana pode indicar assimetria.",
            "application_item4": "<strong>Avaliação de Desempenho:</strong> Calcular métricas médias de desempenho de sistemas ou modelos (ex: tempo médio de resposta de uma API, taxa média de erro de um classificador). A mediana pode ser usada para robustez.",
             "application_item5": "<strong>Desenvolvimento de Algoritmos:</strong> Algumas técnicas, como k-Means clustering, usam a média (centroide) como parte fundamental do seu funcionamento.",

            // Quiz M7
             "quiz_q1_m7": "Qual medida de tendência central é mais afetada por valores extremos (outliers)?",
             "quiz_q1_m7_opt1": "Média", "quiz_q1_m7_opt2": "Mediana", "quiz_q1_m7_opt3": "Moda", "quiz_q1_m7_opt4": "Nenhuma delas",
             "quiz_q2_m7": "Para o conjunto de dados [10, 20, 15, 20, 25], qual é a Mediana?",
             "quiz_q2_m7_opt1": "15", "quiz_q2_m7_opt2": "18", "quiz_q2_m7_opt3": "20", "quiz_q2_m7_opt4": "25",
             "quiz_q3_m7": "Qual medida é mais apropriada para descrever a cor de camisa mais popular em uma loja?",
             "quiz_q3_m7_opt1": "Média", "quiz_q3_m7_opt2": "Mediana", "quiz_q3_m7_opt3": "Moda", "quiz_q3_m7_opt4": "Amplitude",
             "quiz_q4_m7": "Considere os dados [5, 6, 7, 7, 8, 9, 10]. Quais medidas são iguais neste conjunto?",
             "quiz_q4_m7_opt1": "Média e Mediana", "quiz_q4_m7_opt2": "Mediana e Moda", "quiz_q4_m7_opt3": "Média e Moda", "quiz_q4_m7_opt4": "Média, Mediana e Moda",


            // Completion M7
            "completion_theory_title_m7": "Teoria do Módulo 7 Completa!", // Adjusted key name slightly
            "completion_theory_desc_m7": "Excelente! Você agora compreende as três principais medidas de tendência central: Média, Mediana e Moda. Saber calculá-las e, mais importante, quando usar cada uma, é essencial para analisar dados de forma eficaz em IA e ciência de dados. <br> Pronto para aplicar esse conhecimento? Vá para a <strong>Zona de Prática</strong> ou a <strong>Prática Avançada</strong> do Módulo 7."
        }
    };

    // --- Global Variables ---
    let currentQuestionIndex = 0;
    let score = 0;
    const lang = 'pt'; // Hardcoded language

    // --- DOM Elements (Get them once) ---
    const navToggleButton = document.getElementById('minimal-nav-toggle');
    const navPanel = document.getElementById('minimal-nav-panel');
    const body = document.body;
    const quizArea = document.getElementById('quiz-area');
    const feedbackArea = document.getElementById('quiz-feedback');
    const nextButton = document.getElementById('next-question-btn');
    // No specific code output simulation for this module in the template JS

    // --- Functions ---

    function getTranslation(key, replacements = {}) {
         let text = translations[lang]?.[key] ?? `[${key}]`;
         for (const placeholder in replacements) {
             const regex = new RegExp(`\\{${placeholder}\\}`, 'g');
             text = text.replace(regex, replacements[placeholder]);
         }
         // Basic sanitization for innerHTML to allow specific tags
         const allowedTags = /<\/?(code|strong|span|br|i|b|em|sub)>|(&[a-z0-9#]+;)/gi;
         const tags = text.match(allowedTags) || [];
         const sanitizedText = text.split(allowedTags).map(part => part.replace(/</g, "&lt;").replace(/>/g, "&gt;")).join('');
         let reconstructedText = sanitizedText;
         tags.forEach(tag => {
            reconstructedText = reconstructedText.replace('&lt;', '<').replace('&gt;', '>'); // Very basic replacement, assumes simple structure
         });
         // More robust sanitation might be needed for complex HTML
         // For this case, just allowing the specified tags:
         const safeHtmlRegex = /<\/?(code|strong|span|br|i|b|em|sub)>/gi;
         if(safeHtmlRegex.test(text)) {
            return text; // Return original if it contains allowed HTML
         }
         return text.replace(/</g, "&lt;").replace(/>/g, "&gt;"); // Otherwise escape
    }

    function applyTranslations() {
         document.querySelectorAll('[data-translate]').forEach(el => {
             const key = el.getAttribute('data-translate');
             let translation = translations[lang]?.[key] ?? `[${key}]`; // Get raw translation

              if (el.tagName === 'TITLE') { document.title = translation.replace(/<[^>]*>/g, ""); } // Strip tags for title
              else if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') { /* Skip form elements */ }
              else {
                  // Allow specific HTML tags safely within these containers or if the translation itself contains them
                   const safeHtmlRegex = /<\/?(code|strong|span|br|i|b|em|sub)>/gi;
                   let containsSafeHtml = safeHtmlRegex.test(translation);
                   let isSafeContainer = el.closest('.example, .definition, .pros-cons li, .calculation li, p, li div, .formula, .quiz-feedback, .completion-section p');

                   if (containsSafeHtml || isSafeContainer) {
                      el.innerHTML = translation; // Use innerHTML for safe content
                   } else {
                      el.textContent = translation; // Use textContent for others
                   }
              }
         });
    }

    // --- Quiz Data & Functions (Module 7) ---
    const quizData = [
         { questionKey: "quiz_q1_m7", optionKeys: ["quiz_q1_m7_opt1", "quiz_q1_m7_opt2", "quiz_q1_m7_opt3", "quiz_q1_m7_opt4"], correctAnswer: 0 }, // Média é mais afetada
         { questionKey: "quiz_q2_m7", optionKeys: ["quiz_q2_m7_opt1", "quiz_q2_m7_opt2", "quiz_q2_m7_opt3", "quiz_q2_m7_opt4"], correctAnswer: 2 }, // Dados: [10, 15, 20, 20, 25]. Mediana é 20.
         { questionKey: "quiz_q3_m7", optionKeys: ["quiz_q3_m7_opt1", "quiz_q3_m7_opt2", "quiz_q3_m7_opt3", "quiz_q3_m7_opt4"], correctAnswer: 2 }, // Moda para dados categóricos
         { questionKey: "quiz_q4_m7", optionKeys: ["quiz_q4_m7_opt1", "quiz_q4_m7_opt2", "quiz_q4_m7_opt3", "quiz_q4_m7_opt4"], correctAnswer: 1 }  // Dados: [5, 6, 7, 7, 8, 9, 10]. Ordenado. n=7. Mediana=7 (4ª pos). Moda=7. Média = (5+6+7+7+8+9+10)/7 = 52/7 ≈ 7.43. Mediana e Moda são iguais.
    ];

    function loadQuestion() {
          if (!quizArea) return; // Ensure quizArea exists

          // If we reached the end, show score
          if (currentQuestionIndex >= quizData.length) {
              if (!quizArea.querySelector('[data-translate="quiz_final_score_title"]')) { // Avoid re-rendering score
                 showFinalScore();
              }
              return;
          }

          const currentQuiz = quizData[currentQuestionIndex];
          const questionText = translations[lang][currentQuiz.questionKey] ?? `[${currentQuiz.questionKey}]`; // Get raw text
          // Generate HTML for question and options
          quizArea.innerHTML = `
              <div class="quiz-question">${currentQuestionIndex + 1}. ${questionText.replace(/`(.*?)`/g, '<code>$1</code>')}</div>
              <div class="quiz-options">
                  ${currentQuiz.optionKeys.map((optionKey, index) => {
                      const optionText = translations[lang][optionKey] ?? `[${optionKey}]`; // Get raw text
                      return `<button class="quiz-option-btn" data-index="${index}">${optionText.replace(/`(.*?)`/g, '<code>$1</code>')}</button>`;
                  }).join('')}
              </div>
          `;

          // Reset feedback and next button
          if (feedbackArea) {
            feedbackArea.classList.remove('visible', 'correct', 'incorrect');
            feedbackArea.textContent = '';
            feedbackArea.style.height = '0'; // Reset height
            feedbackArea.style.marginBottom = '0'; // Reset margin
          }
          if (nextButton) {
            nextButton.classList.remove('visible');
            nextButton.disabled = true;
          }

          // Add event listeners to the new buttons
          quizArea.querySelectorAll('.quiz-option-btn').forEach(button => {
              button.addEventListener('click', handleAnswer);
          });
    }

    function handleAnswer(event) {
         const selectedButton = event.target;
         const selectedIndex = parseInt(selectedButton.dataset.index);
         const correctIndex = quizData[currentQuestionIndex].correctAnswer;
         const correctOptionKey = quizData[currentQuestionIndex].optionKeys[correctIndex];

         // Disable all options
         quizArea.querySelectorAll('.quiz-option-btn').forEach(btn => {
            btn.disabled = true;
            btn.classList.remove('shake'); // Remove shake if present from previous incorrect
         });

         if (!feedbackArea || !nextButton) return; // Ensure elements exist

         feedbackArea.classList.add('visible');

         if (selectedIndex === correctIndex) {
             selectedButton.classList.add('correct');
             feedbackArea.innerHTML = translations[lang]['quiz_feedback_correct'] ?? '[quiz_feedback_correct]'; // Use innerHTML for potential icon
             feedbackArea.classList.add('correct');
             feedbackArea.classList.remove('incorrect');
             score++;
             selectedButton.classList.add('tada-anim');
         } else {
             selectedButton.classList.add('incorrect');
             const rawCorrectAnswerText = translations[lang][correctOptionKey] ?? `[${correctOptionKey}]`;
             const formattedCorrectAnswer = rawCorrectAnswerText.replace(/`(.*?)`/g, '<code>$1</code>');
             const feedbackText = (translations[lang]['quiz_feedback_incorrect'] ?? '[quiz_feedback_incorrect]').replace('{correctAnswerText}', `<strong>${formattedCorrectAnswer}</strong>`);
             feedbackArea.innerHTML = feedbackText; // Use innerHTML for strong tag
             feedbackArea.classList.add('incorrect');
             feedbackArea.classList.remove('correct');
             // Highlight the correct button as well
             const correctButton = quizArea.querySelector(`.quiz-option-btn[data-index="${correctIndex}"]`);
             if(correctButton) correctButton.classList.add('correct');
             selectedButton.classList.add('shake');
         }

         // Remove animation classes after they finish
          selectedButton.addEventListener('animationend', () => {
               selectedButton.classList.remove('tada-anim', 'shake');
          }, { once: true });

         // Make feedback area adjust height and margin smoothly
         feedbackArea.style.height = feedbackArea.scrollHeight + 'px';
         feedbackArea.style.marginBottom = '1rem';


         // Show and enable next button
         nextButton.classList.add('visible');
         nextButton.disabled = false;
     }

     function showFinalScore() {
            if (!quizArea) return;
            const totalQuestions = quizData.length;
            // Determine message based on score percentage
            let resultMessageKey = (score / totalQuestions) >= 0.75 ? 'quiz_final_score_perfect' : 'quiz_final_score_good'; // 75% threshold

            const titleText = translations[lang]['quiz_final_score_title'] ?? '[quiz_final_score_title]';
            const summaryText = (translations[lang]['quiz_final_score_summary'] ?? '[quiz_final_score_summary]').replace('{score}', score).replace('{total}', totalQuestions);
            const resultMessageText = translations[lang][resultMessageKey] ?? `[${resultMessageKey}]`;

            quizArea.innerHTML = `
               <div class="quiz-question text-center" style="font-size: 1.5rem;">${titleText}</div>
               <p class="text-center" style="font-size: 1.2rem; margin-bottom: 1rem;">${summaryText}</p>
               <p class="text-center" style="color: ${score === totalQuestions ? 'var(--success-color)' : 'var(--primary-color)'}; font-weight: bold;">${resultMessageText}</p>
            `;
            if (feedbackArea) feedbackArea.classList.remove('visible'); // Hide feedback area
            if (nextButton) nextButton.style.display = 'none'; // Hide next button
            quizArea.scrollIntoView({ behavior: 'smooth', block: 'center' }); // Scroll score into view
     }


    // --- Intersection Observer Setup ---
    function setupObservers() {
        const observerOptions = {
            root: null, // relative to viewport
            rootMargin: '0px',
            threshold: 0.1 // Trigger when 10% of the element is visible
        };

        const observerCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Optional: Unobserve after it becomes visible to save resources
                    // observer.unobserve(entry.target);
                }
                // Optional: Remove 'visible' if it scrolls out of view
                // else {
                //     entry.target.classList.remove('visible');
                // }
            });
        };

        const animationObserver = new IntersectionObserver(observerCallback, observerOptions);

        // Observe elements with the fade-in class
        document.querySelectorAll('.fade-in-on-scroll').forEach(el => {
            animationObserver.observe(el);
        });

        // No specific JS simulation like in M3 for M7, so the codeOutputObserver is removed/not needed here.
    }

    // --- Event Listeners Setup ---
    function setupEventListeners() {
        // Navbar Toggle
        if (navToggleButton && navPanel) {
            navToggleButton.addEventListener('click', (event) => {
                event.stopPropagation();
                body.classList.toggle('nav-active');
                navToggleButton.setAttribute('aria-expanded', body.classList.contains('nav-active'));
            });

            // Close nav if clicking outside
            document.addEventListener('click', (event) => {
                if (body.classList.contains('nav-active') && !navPanel.contains(event.target) && event.target !== navToggleButton && !navToggleButton.contains(event.target)) {
                    body.classList.remove('nav-active');
                    navToggleButton.setAttribute('aria-expanded', 'false');
                }
            });

            // Close nav on link click
            navPanel.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', (e) => {
                    // Check if it's an internal link
                    if (link.getAttribute('href').startsWith('#')) {
                         // Allow default scroll behavior
                        // Close panel slightly delayed
                        setTimeout(() => {
                            body.classList.remove('nav-active');
                            navToggleButton.setAttribute('aria-expanded', 'false');
                        }, 150);
                    }
                    // External links will navigate away anyway
                });
            });

            // Close nav on Escape key
            document.addEventListener('keydown', (event) => {
                 if (event.key === 'Escape' && body.classList.contains('nav-active')) {
                     body.classList.remove('nav-active');
                     navToggleButton.setAttribute('aria-expanded', 'false');
                 }
             });
        }

        // Quiz Next Button
        if (nextButton) {
            nextButton.addEventListener('click', () => {
                if (!nextButton.disabled) {
                    currentQuestionIndex++;
                    loadQuestion(); // Load the next question
                }
            });
        } else {
            console.error("Elemento #next-question-btn não encontrado.");
        }
    }

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        // Check if elements needed for quiz exist before proceeding
        if (!quizArea) console.error("Elemento #quiz-area não encontrado.");
        if (!feedbackArea) console.error("Elemento #quiz-feedback não encontrado.");

        applyTranslations();    // Apply translations first
        setupEventListeners();  // Set up interactive elements
        setupObservers();       // Set up animations

        if (quizArea) {
            loadQuestion();     // Load the first quiz question if container exists
        }
    });

    </script>

</body>
</html>