<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Knowledge Check: Module 27 - Searching - Complete Python</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Copied from ctp-dashboard.html) --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --background-sidebar: #ffffff;
            --background-header: linear-gradient(135deg, #0d6efd, #0a58ca);
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --info-color: #0dcaf0;
            --video-color: #fd7e14;
            --check-color: #6f42c1;
            --certificate-color: #d63384;
            --chat-panel-bg: #ffffff;
            --chat-box-bg: #f8f9fa;
            --chat-bot-bg: #e9ecef;
            --chat-bot-text: #343a40;
            --chat-user-bg: #d1e7ff;
            --chat-user-text: #0a58ca;
            --chat-error-bg: #f8d7da;
            --chat-error-text: #842029;
            --chat-border-color: #dee2e6;
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 6px 18px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            /* Colors for lang switcher */
             --lang-select-border: var(--certificate-color);
             --lang-select-bg: rgba(255, 255, 255, 0.1);
             --lang-select-bg-hover: rgba(255, 255, 255, 0.15);
             --lang-option-bg: var(--background-card);
             --lang-option-text: var(--text-dark);
             --lang-arrow-color: var(--certificate-color);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            padding-bottom: 4rem; /* Ensure footer space */
        }

        /* --- Basic Layout --- */
        .knowledge-check-container { max-width: 900px; margin: 2rem auto; padding: 2rem; background-color: var(--background-card); border-radius: var(--border-radius); box-shadow: var(--card-shadow); border: 1px solid var(--border-color); }

        /* --- Header Bar --- */
        .kc-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 1.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid var(--primary-color); }
        .kc-header h1 { font-family: var(--font-title); font-size: 1.8rem; color: var(--text-dark); margin: 0; }
        .kc-header .back-button { text-decoration: none; color: var(--primary-color); background-color: #e7f1ff; padding: 0.5rem 1rem; border-radius: 5px; font-size: 0.9rem; font-weight: 500; transition: all var(--transition-speed) ease; display: inline-flex; align-items: center; border: 1px solid var(--primary-color); }
        .kc-header .back-button:hover { background-color: var(--primary-color); color: var(--text-light); }
        .kc-header .back-button i { margin-right: 6px; }

        /* --- Language Switcher (Inside Header for simplicity here) --- */
         .language-switcher { margin-left: 1rem; /* Space from title or button */ }
         #languageSelect {
            background: var(--background-card);
            color: var(--text-dark);
            border: 1px solid var(--lang-select-border);
            border-radius: 5px;
            padding: 6px 30px 6px 12px; /* Adjusted padding */
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--certificate-color').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 9px auto;
            transition: border-color 0.3s ease;
            vertical-align: middle; /* Align with title/button */
         }
         #languageSelect:hover { border-color: #b02a6e; }
         #languageSelect:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); }
         #languageSelect option { background: var(--lang-option-bg); color: var(--lang-option-text); padding: 5px; }

        /* --- Intro Text --- */
        .quiz-intro { margin-bottom: 2rem; font-size: 1rem; color: var(--text-muted); line-height: 1.5; }
        .quiz-intro p { margin-bottom: 0.5rem; }
        .quiz-intro strong { color: var(--text-dark); font-weight: 500; }
        .quiz-intro i { color: var(--check-color); }

        /* --- Quiz Questions --- */
        .quiz-container { margin-top: 2rem; }
        .question-block { margin-bottom: 2rem; padding: 1.5rem; background-color: #fdfdff; border: 1px solid var(--border-color); border-radius: var(--border-radius); transition: background-color 0.3s; }
        .question-block.answered-correct { background-color: #e6f9f0; border-left: 5px solid var(--success-color); }
        .question-block.answered-incorrect { background-color: #fdedee; border-left: 5px solid var(--error-color); }
        .question-text { font-weight: 500; margin-bottom: 1rem; font-size: 1.1rem; color: var(--text-dark); }
        .question-text code { font-size: 0.95em; background: #eee; padding: 2px 5px; border-radius: 3px; color: var(--primary-color); }
        .options { display: flex; flex-direction: column; gap: 0.8rem; }
        .options label { display: block; padding: 0.8rem 1rem; border: 1px solid var(--border-color); border-radius: 5px; cursor: pointer; transition: all 0.2s ease; background-color: var(--background-card); }
        .options label:hover { background-color: #f8f9fa; border-color: var(--secondary-color); }
        .options input[type="radio"] { display: none; /* Hide the actual radio button */ }
        .options input[type="radio"]:checked + label { background-color: #ddeeff; border-color: var(--primary-color); font-weight: 500; box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.2); }
        /* Feedback styles */
        .options label.correct { background-color: #d1e7dd !important; border-color: var(--success-color) !important; color: #0a3622 !important; font-weight: bold; position: relative; }
        .options label.incorrect { background-color: #f8d7da !important; border-color: var(--error-color) !important; color: #58151c !important; font-weight: normal; position: relative; }
        .options label.user-selected::after { content: '\f00c'; /* Check mark */ font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--success-color); font-size: 1rem; }
        .options label.incorrect.user-selected::after { content: '\f00d'; /* X mark */ color: var(--error-color); }
        .options input[type="radio"]:disabled + label { cursor: not-allowed; opacity: 0.7; background-color: #f8f9fa; }
        .options input[type="radio"]:disabled + label:hover { transform: none; box-shadow: none; }

        /* --- Controls & Results --- */
        .quiz-controls { margin-top: 2.5rem; text-align: center; border-top: 1px dashed var(--border-color); padding-top: 2rem; }
        #submit-quiz { background: var(--check-color); color: var(--text-light); font-family: var(--font-title); font-size: 1.1rem; padding: 0.8rem 2rem; border: none; border-radius: 5px; cursor: pointer; transition: background-color var(--transition-speed); }
        #submit-quiz:hover { background-color: #5a35a2; }
        #submit-quiz:disabled { background-color: var(--secondary-color); cursor: not-allowed; opacity: 0.7; }
        #quiz-results { margin-top: 2rem; padding: 1.5rem; border-radius: var(--border-radius); text-align: center; font-size: 1.1rem; font-weight: 500; display: none; /* Hidden initially */ }
        #quiz-results.pass { background-color: #d1e7dd; border: 1px solid #a3cfbb; color: #0a3622; }
        #quiz-results.fail { background-color: #f8d7da; border: 1px solid #f1aeae; color: #58151c; }
        #quiz-results i { margin-right: 8px; }
        #quiz-results p { margin: 0.5rem 0; }
        #quiz-results .score { font-size: 1.3rem; font-weight: 700; font-family: var(--font-title); }
        .result-message-details { font-size: 0.9rem; font-weight: 400; margin-top: 0.8rem; }

        /* --- Footer --- */
        footer { text-align: center; padding: 1.5rem; margin-top: 3rem; background-color: var(--background-card); border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .knowledge-check-container { padding: 1.5rem; margin: 1rem; }
            .kc-header { flex-direction: column; align-items: flex-start; }
            .kc-header h1 { font-size: 1.6rem; margin-bottom: 1rem; }
            .kc-header .back-button { margin-bottom: 0.5rem; }
            .language-switcher { margin-left: 0; margin-top: 0.5rem; align-self: flex-start; }
            .question-text { font-size: 1rem; }
            .options label { padding: 0.7rem 0.9rem; }
        }
        @media (max-width: 576px) {
             html { font-size: 15px; }
            .kc-header h1 { font-size: 1.4rem; }
            #submit-quiz { font-size: 1rem; padding: 0.7rem 1.5rem; }
            #quiz-results { font-size: 1rem; padding: 1rem; }
            #quiz-results .score { font-size: 1.2rem; }
        }

    </style>
</head>
<body>

    <div class="knowledge-check-container">
        <header class="kc-header">
             <div>
                <a href="ctp-dashboard.html" class="back-button">
                    <i class="fas fa-arrow-left"></i> <span data-translate="back_to_dashboard">Return to Dashboard</span>
                </a>
            </div>
            <h1><span data-translate="kc_title_prefix">Knowledge Check</span>: <span data-translate="module_27_title">Module 27 - Searching</span></h1>
             <div class="language-switcher">
                 <select id="languageSelect" data-translate-aria-label="lang_select_aria" aria-label="Select Language">
                     <option value="en" data-translate="lang_en">🇬🇧 English</option>
                     <option value="pt" data-translate="lang_pt">🇧🇷 Português</option>
                     <option value="zh" data-translate="lang_zh">🇨🇳 中文</option>
                 </select>
             </div>
        </header>

        <main>
            <div class="quiz-intro">
                <p data-translate="quiz_instructions_1">Test your understanding of this module.</p>
                <p data-translate="quiz_instructions_2">There are <strong>10 questions</strong>. You need to answer at least <strong>6 questions correctly</strong> to pass.</p>
                <p data-translate="quiz_instructions_3">Passing this check (<i class="fas fa-check-double"></i>) counts towards your certificate progress. You can retake it as many times as you need.</p>
            </div>

            <div class="quiz-container">
                <form id="knowledge-check-form">

                    <!-- Question 1 -->
                    <div class="question-block" data-question-id="q27_1">
                        <p class="question-text" data-translate="q27_1_text">1. What is the primary goal of a linear search algorithm?</p>
                        <div class="options">
                            <input type="radio" id="q27_1a" name="q27_1" value="a">
                            <label for="q27_1a" data-translate="q27_1_opt_a">To sort the elements in a list.</label>
                            <input type="radio" id="q27_1b" name="q27_1" value="b">
                            <label for="q27_1b" data-translate="q27_1_opt_b">To find the position (or check the presence) of a specific target value in a list.</label>
                            <input type="radio" id="q27_1c" name="q27_1" value="c">
                            <label for="q27_1c" data-translate="q27_1_opt_c">To remove duplicate elements from a list.</label>
                            <input type="radio" id="q27_1d" name="q27_1" value="d">
                            <label for="q27_1d" data-translate="q27_1_opt_d">To find the largest element in a list.</label>
                        </div>
                    </div>

                    <!-- Question 2 -->
                    <div class="question-block" data-question-id="q27_2">
                        <p class="question-text" data-translate="q27_2_text">2. How does linear search typically work?</p>
                        <div class="options">
                            <input type="radio" id="q27_2a" name="q27_2" value="a">
                            <label for="q27_2a" data-translate="q27_2_opt_a">It compares the target value to the middle element and eliminates half the list.</label>
                            <input type="radio" id="q27_2b" name="q27_2" value="b">
                            <label for="q27_2b" data-translate="q27_2_opt_b">It checks each element in the list sequentially, one by one, from the beginning.</label>
                            <input type="radio" id="q27_2c" name="q27_2" value="c">
                            <label for="q27_2c" data-translate="q27_2_opt_c">It randomly selects elements until the target is found.</label>
                            <input type="radio" id="q27_2d" name="q27_2" value="d">
                            <label for="q27_2d" data-translate="q27_2_opt_d">It uses a hash function to directly locate the element.</label>
                        </div>
                    </div>

                    <!-- Question 3 -->
                    <div class="question-block" data-question-id="q27_3">
                        <p class="question-text" data-translate="q27_3_text">3. What is the main requirement for the input data (e.g., a list) for a linear search to function correctly?</p>
                        <div class="options">
                            <input type="radio" id="q27_3a" name="q27_3" value="a">
                            <label for="q27_3a" data-translate="q27_3_opt_a">The list must be sorted in ascending order.</label>
                            <input type="radio" id="q27_3b" name="q27_3" value="b">
                            <label for="q27_3b" data-translate="q27_3_opt_b">The list must only contain numbers.</label>
                            <input type="radio" id="q27_3c" name="q27_3" value="c">
                            <label for="q27_3c" data-translate="q27_3_opt_c">There are no specific requirements; it works on any sequence of items.</label>
                            <input type="radio" id="q27_3d" name="q27_3" value="d">
                            <label for="q27_3d" data-translate="q27_3_opt_d">The list must not contain duplicate values.</label>
                        </div>
                    </div>

                    <!-- Question 4 -->
                    <div class="question-block" data-question-id="q27_4">
                        <p class="question-text" data-translate="q27_4_text">4. In which scenario does linear search exhibit its *best-case* time performance?</p>
                        <div class="options">
                            <input type="radio" id="q27_4a" name="q27_4" value="a">
                            <label for="q27_4a" data-translate="q27_4_opt_a">When the target element is the very first element in the list.</label>
                            <input type="radio" id="q27_4b" name="q27_4" value="b">
                            <label for="q27_4b" data-translate="q27_4_opt_b">When the target element is the last element in the list.</label>
                            <input type="radio" id="q27_4c" name="q27_4" value="c">
                            <label for="q27_4c" data-translate="q27_4_opt_c">When the target element is not present in the list.</label>
                            <input type="radio" id="q27_4d" name="q27_4" value="d">
                            <label for="q27_4d" data-translate="q27_4_opt_d">When the list is very large.</label>
                        </div>
                    </div>

                    <!-- Question 5 -->
                    <div class="question-block" data-question-id="q27_5">
                        <p class="question-text" data-translate="q27_5_text">5. In which scenario does linear search exhibit its *worst-case* time performance?</p>
                        <div class="options">
                            <input type="radio" id="q27_5a" name="q27_5" value="a">
                            <label for="q27_5a" data-translate="q27_5_opt_a">When the target element is the very first element.</label>
                            <input type="radio" id="q27_5b" name="q27_5" value="b">
                            <label for="q27_5b" data-translate="q27_5_opt_b">When the list is sorted.</label>
                            <input type="radio" id="q27_5c" name="q27_5" value="c">
                            <label for="q27_5c" data-translate="q27_5_opt_c">When the target element is the last element, or not present in the list at all.</label>
                            <input type="radio" id="q27_5d" name="q27_5" value="d">
                            <label for="q27_5d" data-translate="q27_5_opt_d">When the list contains duplicate elements.</label>
                        </div>
                    </div>

                    <!-- Question 6 -->
                    <div class="question-block" data-question-id="q27_6">
                        <p class="question-text" data-translate="q27_6_text">6. What is the time complexity (Big O notation) of linear search in the worst case, where 'n' is the number of elements in the list?</p>
                        <div class="options">
                            <input type="radio" id="q27_6a" name="q27_6" value="a">
                            <label for="q27_6a" data-translate="q27_6_opt_a">O(1) - Constant time</label>
                            <input type="radio" id="q27_6b" name="q27_6" value="b">
                            <label for="q27_6b" data-translate="q27_6_opt_b">O(log n) - Logarithmic time</label>
                            <input type="radio" id="q27_6c" name="q27_6" value="c">
                            <label for="q27_6c" data-translate="q27_6_opt_c">O(n) - Linear time</label>
                            <input type="radio" id="q27_6d" name="q27_6" value="d">
                            <label for="q27_6d" data-translate="q27_6_opt_d">O(n^2) - Quadratic time</label>
                        </div>
                    </div>

                    <!-- Question 7 -->
                     <div class="question-block" data-question-id="q27_7">
                         <p class="question-text" data-translate="q27_7_text">7. Consider the Python code snippet: <code>for item in data_list: if item == target_value: print("Found!"); break</code>. What algorithm does this code implement?</p>
                         <div class="options">
                             <input type="radio" id="q27_7a" name="q27_7" value="a">
                             <label for="q27_7a" data-translate="q27_7_opt_a">Bubble Sort</label>
                             <input type="radio" id="q27_7b" name="q27_7" value="b">
                             <label for="q27_7b" data-translate="q27_7_opt_b">Binary Search</label>
                             <input type="radio" id="q27_7c" name="q27_7" value="c">
                             <label for="q27_7c" data-translate="q27_7_opt_c">Linear Search</label>
                             <input type="radio" id="q27_7d" name="q27_7" value="d">
                             <label for="q27_7d" data-translate="q27_7_opt_d">Selection Sort</label>
                         </div>
                     </div>

                    <!-- Question 8 -->
                    <div class="question-block" data-question-id="q27_8">
                        <p class="question-text" data-translate="q27_8_text">8. If you perform a linear search for an item that is *not* present in the list, what happens?</p>
                        <div class="options">
                            <input type="radio" id="q27_8a" name="q27_8" value="a">
                            <label for="q27_8a" data-translate="q27_8_opt_a">The search stops immediately and returns an error.</label>
                            <input type="radio" id="q27_8b" name="q27_8" value="b">
                            <label for="q27_8b" data-translate="q27_8_opt_b">The search checks every element in the list and then concludes the item is not found.</label>
                            <input type="radio" id="q27_8c" name="q27_8" value="c">
                            <label for="q27_8c" data-translate="q27_8_opt_c">The search checks only the first and last elements.</label>
                            <input type="radio" id="q27_8d" name="q27_8" value="d">
                            <label for="q27_8d" data-translate="q27_8_opt_d">The search gets stuck in an infinite loop.</label>
                        </div>
                    </div>

                    <!-- Question 9 -->
                    <div class="question-block" data-question-id="q27_9">
                        <p class="question-text" data-translate="q27_9_text">9. Linear search is generally considered less efficient than binary search for large datasets. Why?</p>
                        <div class="options">
                            <input type="radio" id="q27_9a" name="q27_9" value="a">
                            <label for="q27_9a" data-translate="q27_9_opt_a">Linear search requires more memory.</label>
                            <input type="radio" id="q27_9b" name="q27_9" value="b">
                            <label for="q27_9b" data-translate="q27_9_opt_b">Linear search can only work on numbers.</label>
                            <input type="radio" id="q27_9c" name="q27_9" value="c">
                            <label for="q27_9c" data-translate="q27_9_opt_c">Linear search might have to check every single element (O(n)), while binary search eliminates half the data at each step (O(log n)) on sorted data.</label>
                            <input type="radio" id="q27_9d" name="q27_9" value="d">
                            <label for="q27_9d" data-translate="q27_9_opt_d">Linear search is harder to implement in Python.</label>
                        </div>
                    </div>

                    <!-- Question 10 -->
                    <div class="question-block" data-question-id="q27_10">
                        <p class="question-text" data-translate="q27_10_text">10. When might linear search be a suitable choice despite its potential inefficiency on large datasets?</p>
                        <div class="options">
                            <input type="radio" id="q27_10a" name="q27_10" value="a">
                            <label for="q27_10a" data-translate="q27_10_opt_a">When the list is extremely large (millions of elements).</label>
                            <input type="radio" id="q27_10b" name="q27_10" value="b">
                            <label for="q27_10b" data-translate="q27_10_opt_b">When the list is known to be unsorted and relatively small, or simplicity is highly valued.</label>
                            <input type="radio" id="q27_10c" name="q27_10" value="c">
                            <label for="q27_10c" data-translate="q27_10_opt_c">Only when searching for the smallest element in the list.</label>
                            <input type="radio" id="q27_10d" name="q27_10" value="d">
                            <label for="q27_10d" data-translate="q27_10_opt_d">When you need to guarantee finding the element in constant time (O(1)).</label>
                        </div>
                    </div>

                    <div class="quiz-controls">
                        <button type="submit" id="submit-quiz" data-translate="submit_button">Submit Answers</button>
                        <div id="quiz-results" role="alert">
                            <!-- Results will be displayed here by JavaScript -->
                        </div>
                    </div>
                </form>
            </div>
        </main>
    </div><!-- /.knowledge-check-container -->

    <footer>
        <p data-translate="footer_text">Part of the Road to Free Open AGI Project</p>
    </footer>

    <script>
        // --- Configuration ---
        const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
        const CURRENT_MODULE_ID = 27;
        const PASSING_SCORE = 6;
        const TOTAL_QUESTIONS = 10;
        const LANGUAGE_STORAGE_KEY = 'userLanguage'; // Key for storing language

        // --- Translations Object ---
        const translations = {
             en: {
                 "page_title": "Knowledge Check: Module 27 - Searching - Complete Python",
                 "back_to_dashboard": "Return to Dashboard",
                 "kc_title_prefix": "Knowledge Check",
                 "module_27_title": "Module 27 - Searching",
                 "quiz_instructions_1": "Test your understanding of this module.",
                 "quiz_instructions_2": "There are <strong>10 questions</strong>. You need to answer at least <strong>6 questions correctly</strong> to pass.",
                 "quiz_instructions_3": "Passing this check (<i class=\"fas fa-check-double\"></i>) counts towards your certificate progress. You can retake it as many times as you need.",
                 "submit_button": "Submit Answers",
                 "result_pass": "<i class=\"fas fa-check-circle\"></i> Congratulations! You passed!",
                 "result_fail": "<i class=\"fas fa-times-circle\"></i> Keep Trying! You haven't passed yet.",
                 "result_score": "Your score: <span class=\"score\">{score}/{total}</span>",
                 "result_pass_details": "Your progress for Module {moduleId} has been saved.",
                 "result_fail_details": "Review the material or try again. You need {passingScore} correct answers to pass.",
                 "footer_text": "Part of the Road to Free Open AGI Project",
                 "lang_select_aria": "Select Language",
                 "lang_en": "🇬🇧 English",
                 "lang_pt": "🇧🇷 Português",
                 "lang_zh": "🇨🇳 中文",
                 // Questions & Answers - Module 27
                 "q27_1_text": "1. What is the primary goal of a linear search algorithm?",
                 "q27_1_opt_a": "To sort the elements in a list.",
                 "q27_1_opt_b": "To find the position (or check the presence) of a specific target value in a list.", // Correct
                 "q27_1_opt_c": "To remove duplicate elements from a list.",
                 "q27_1_opt_d": "To find the largest element in a list.",
                 "q27_2_text": "2. How does linear search typically work?",
                 "q27_2_opt_a": "It compares the target value to the middle element and eliminates half the list.",
                 "q27_2_opt_b": "It checks each element in the list sequentially, one by one, from the beginning.", // Correct
                 "q27_2_opt_c": "It randomly selects elements until the target is found.",
                 "q27_2_opt_d": "It uses a hash function to directly locate the element.",
                 "q27_3_text": "3. What is the main requirement for the input data (e.g., a list) for a linear search to function correctly?",
                 "q27_3_opt_a": "The list must be sorted in ascending order.",
                 "q27_3_opt_b": "The list must only contain numbers.",
                 "q27_3_opt_c": "There are no specific requirements; it works on any sequence of items.", // Correct
                 "q27_3_opt_d": "The list must not contain duplicate values.",
                 "q27_4_text": "4. In which scenario does linear search exhibit its *best-case* time performance?",
                 "q27_4_opt_a": "When the target element is the very first element in the list.", // Correct
                 "q27_4_opt_b": "When the target element is the last element in the list.",
                 "q27_4_opt_c": "When the target element is not present in the list.",
                 "q27_4_opt_d": "When the list is very large.",
                 "q27_5_text": "5. In which scenario does linear search exhibit its *worst-case* time performance?",
                 "q27_5_opt_a": "When the target element is the very first element.",
                 "q27_5_opt_b": "When the list is sorted.",
                 "q27_5_opt_c": "When the target element is the last element, or not present in the list at all.", // Correct
                 "q27_5_opt_d": "When the list contains duplicate elements.",
                 "q27_6_text": "6. What is the time complexity (Big O notation) of linear search in the worst case, where 'n' is the number of elements in the list?",
                 "q27_6_opt_a": "O(1) - Constant time",
                 "q27_6_opt_b": "O(log n) - Logarithmic time",
                 "q27_6_opt_c": "O(n) - Linear time", // Correct
                 "q27_6_opt_d": "O(n^2) - Quadratic time",
                 "q27_7_text": "7. Consider the Python code snippet: <code>for item in data_list: if item == target_value: print(\"Found!\"); break</code>. What algorithm does this code implement?",
                 "q27_7_opt_a": "Bubble Sort",
                 "q27_7_opt_b": "Binary Search",
                 "q27_7_opt_c": "Linear Search", // Correct
                 "q27_7_opt_d": "Selection Sort",
                 "q27_8_text": "8. If you perform a linear search for an item that is *not* present in the list, what happens?",
                 "q27_8_opt_a": "The search stops immediately and returns an error.",
                 "q27_8_opt_b": "The search checks every element in the list and then concludes the item is not found.", // Correct
                 "q27_8_opt_c": "The search checks only the first and last elements.",
                 "q27_8_opt_d": "The search gets stuck in an infinite loop.",
                 "q27_9_text": "9. Linear search is generally considered less efficient than binary search for large datasets. Why?",
                 "q27_9_opt_a": "Linear search requires more memory.",
                 "q27_9_opt_b": "Linear search can only work on numbers.",
                 "q27_9_opt_c": "Linear search might have to check every single element (O(n)), while binary search eliminates half the data at each step (O(log n)) on sorted data.", // Correct
                 "q27_9_opt_d": "Linear search is harder to implement in Python.",
                 "q27_10_text": "10. When might linear search be a suitable choice despite its potential inefficiency on large datasets?",
                 "q27_10_opt_a": "When the list is extremely large (millions of elements).",
                 "q27_10_opt_b": "When the list is known to be unsorted and relatively small, or simplicity is highly valued.", // Correct
                 "q27_10_opt_c": "Only when searching for the smallest element in the list.",
                 "q27_10_opt_d": "When you need to guarantee finding the element in constant time (O(1)).",
                 // Correct Answers Map
                 "correctAnswers": { "q27_1": "b", "q27_2": "b", "q27_3": "c", "q27_4": "a", "q27_5": "c", "q27_6": "c", "q27_7": "c", "q27_8": "b", "q27_9": "c", "q27_10": "b" }
             },
             pt: {
                 "page_title": "Verificação de Conhecimento: Módulo 27 - Busca - Python Completo",
                 "back_to_dashboard": "Voltar ao Painel",
                 "kc_title_prefix": "Verificação de Conhecimento",
                 "module_27_title": "Módulo 27 - Busca",
                 "quiz_instructions_1": "Teste seu entendimento deste módulo.",
                 "quiz_instructions_2": "São <strong>10 questões</strong>. Você precisa acertar pelo menos <strong>6 questões</strong> para passar.",
                 "quiz_instructions_3": "Passar nesta verificação (<i class=\"fas fa-check-double\"></i>) conta para o progresso do seu certificado. Você pode refazê-la quantas vezes precisar.",
                 "submit_button": "Enviar Respostas",
                 "result_pass": "<i class=\"fas fa-check-circle\"></i> Parabéns! Você passou!",
                 "result_fail": "<i class=\"fas fa-times-circle\"></i> Continue Tentando! Você ainda não passou.",
                 "result_score": "Sua pontuação: <span class=\"score\">{score}/{total}</span>",
                 "result_pass_details": "Seu progresso para o Módulo {moduleId} foi salvo.",
                 "result_fail_details": "Revise o material ou tente novamente. Você precisa de {passingScore} respostas corretas para passar.",
                 "footer_text": "Parte do Projeto Road to Free Open AGI",
                 "lang_select_aria": "Selecionar Idioma",
                 "lang_en": "🇬🇧 English",
                 "lang_pt": "🇧🇷 Português",
                 "lang_zh": "🇨🇳 中文",
                 // Questions & Answers - Module 27 (Portuguese)
                 "q27_1_text": "1. Qual é o objetivo principal de um algoritmo de busca linear?",
                 "q27_1_opt_a": "Ordenar os elementos em uma lista.",
                 "q27_1_opt_b": "Encontrar a posição (ou verificar a presença) de um valor alvo específico em uma lista.", // Correct
                 "q27_1_opt_c": "Remover elementos duplicados de uma lista.",
                 "q27_1_opt_d": "Encontrar o maior elemento em uma lista.",
                 "q27_2_text": "2. Como a busca linear normalmente funciona?",
                 "q27_2_opt_a": "Compara o valor alvo com o elemento do meio e elimina metade da lista.",
                 "q27_2_opt_b": "Verifica cada elemento na lista sequencialmente, um por um, a partir do início.", // Correct
                 "q27_2_opt_c": "Seleciona elementos aleatoriamente até que o alvo seja encontrado.",
                 "q27_2_opt_d": "Usa uma função hash para localizar diretamente o elemento.",
                 "q27_3_text": "3. Qual é o principal requisito para os dados de entrada (ex: uma lista) para que uma busca linear funcione corretamente?",
                 "q27_3_opt_a": "A lista deve estar ordenada em ordem crescente.",
                 "q27_3_opt_b": "A lista deve conter apenas números.",
                 "q27_3_opt_c": "Não há requisitos específicos; funciona em qualquer sequência de itens.", // Correct
                 "q27_3_opt_d": "A lista não deve conter valores duplicados.",
                 "q27_4_text": "4. Em qual cenário a busca linear exibe seu desempenho de tempo de *melhor caso*?",
                 "q27_4_opt_a": "Quando o elemento alvo é o primeiro elemento da lista.", // Correct
                 "q27_4_opt_b": "Quando o elemento alvo é o último elemento da lista.",
                 "q27_4_opt_c": "Quando o elemento alvo não está presente na lista.",
                 "q27_4_opt_d": "Quando a lista é muito grande.",
                 "q27_5_text": "5. Em qual cenário a busca linear exibe seu desempenho de tempo de *pior caso*?",
                 "q27_5_opt_a": "Quando o elemento alvo é o primeiro elemento.",
                 "q27_5_opt_b": "Quando a lista está ordenada.",
                 "q27_5_opt_c": "Quando o elemento alvo é o último elemento, ou não está presente na lista.", // Correct
                 "q27_5_opt_d": "Quando a lista contém elementos duplicados.",
                 "q27_6_text": "6. Qual é a complexidade de tempo (notação Big O) da busca linear no pior caso, onde 'n' é o número de elementos na lista?",
                 "q27_6_opt_a": "O(1) - Tempo constante",
                 "q27_6_opt_b": "O(log n) - Tempo logarítmico",
                 "q27_6_opt_c": "O(n) - Tempo linear", // Correct
                 "q27_6_opt_d": "O(n^2) - Tempo quadrático",
                 "q27_7_text": "7. Considere o trecho de código Python: <code>for item in data_list: if item == target_value: print(\"Encontrado!\"); break</code>. Qual algoritmo este código implementa?",
                 "q27_7_opt_a": "Bubble Sort",
                 "q27_7_opt_b": "Busca Binária",
                 "q27_7_opt_c": "Busca Linear", // Correct
                 "q27_7_opt_d": "Selection Sort",
                 "q27_8_text": "8. Se você realizar uma busca linear por um item que *não* está presente na lista, o que acontece?",
                 "q27_8_opt_a": "A busca para imediatamente e retorna um erro.",
                 "q27_8_opt_b": "A busca verifica todos os elementos na lista e então conclui que o item não foi encontrado.", // Correct
                 "q27_8_opt_c": "A busca verifica apenas o primeiro e o último elementos.",
                 "q27_8_opt_d": "A busca fica presa em um loop infinito.",
                 "q27_9_text": "9. A busca linear é geralmente considerada menos eficiente que a busca binária para grandes conjuntos de dados. Por quê?",
                 "q27_9_opt_a": "A busca linear requer mais memória.",
                 "q27_9_opt_b": "A busca linear só funciona com números.",
                 "q27_9_opt_c": "A busca linear pode ter que verificar cada elemento (O(n)), enquanto a busca binária elimina metade dos dados a cada passo (O(log n)) em dados ordenados.", // Correct
                 "q27_9_opt_d": "A busca linear é mais difícil de implementar em Python.",
                 "q27_10_text": "10. Quando a busca linear pode ser uma escolha adequada apesar de sua potencial ineficiência em grandes conjuntos de dados?",
                 "q27_10_opt_a": "Quando a lista é extremamente grande (milhões de elementos).",
                 "q27_10_opt_b": "Quando a lista é sabidamente não ordenada e relativamente pequena, ou a simplicidade é muito valorizada.", // Correct
                 "q27_10_opt_c": "Apenas ao procurar o menor elemento na lista.",
                 "q27_10_opt_d": "Quando você precisa garantir a localização do elemento em tempo constante (O(1)).",
                 // Correct Answers Map (same as English)
                 "correctAnswers": { "q27_1": "b", "q27_2": "b", "q27_3": "c", "q27_4": "a", "q27_5": "c", "q27_6": "c", "q27_7": "c", "q27_8": "b", "q27_9": "c", "q27_10": "b" }
             },
             zh: {
                 "page_title": "知识测验：模块 27 - 搜索 - Python 完全指南",
                 "back_to_dashboard": "返回仪表板",
                 "kc_title_prefix": "知识测验",
                 "module_27_title": "模块 27 - 搜索",
                 "quiz_instructions_1": "测试您对本模块的理解程度。",
                 "quiz_instructions_2": "共有 <strong>10 个问题</strong>。您需要至少答对 <strong>6 个问题</strong> 才能通过。",
                 "quiz_instructions_3": "通过此测验 (<i class=\"fas fa-check-double\"></i>) 将计入您的证书进度。您可以根据需要多次重试。",
                 "submit_button": "提交答案",
                 "result_pass": "<i class=\"fas fa-check-circle\"></i> 恭喜！您已通过！",
                 "result_fail": "<i class=\"fas fa-times-circle\"></i> 继续努力！您尚未通过。",
                 "result_score": "您的得分：<span class=\"score\">{score}/{total}</span>",
                 "result_pass_details": "您模块 {moduleId} 的进度已保存。",
                 "result_fail_details": "请复习相关内容或再次尝试。您需要答对 {passingScore} 题才能通过。",
                 "footer_text": "通往自由开放AGI之路项目的一部分",
                 "lang_select_aria": "选择语言",
                 "lang_en": "🇬🇧 English",
                 "lang_pt": "🇧🇷 Português",
                 "lang_zh": "🇨🇳 中文",
                  // Questions & Answers - Module 27 (Chinese)
                 "q27_1_text": "1. 线性搜索算法的主要目标是什么？",
                 "q27_1_opt_a": "对列表中的元素进行排序。",
                 "q27_1_opt_b": "在列表中查找特定目标值的位置（或检查其是否存在）。", // Correct
                 "q27_1_opt_c": "从列表中删除重复的元素。",
                 "q27_1_opt_d": "在列表中查找最大的元素。",
                 "q27_2_text": "2. 线性搜索通常如何工作？",
                 "q27_2_opt_a": "它将目标值与中间元素进行比较，并排除列表的一半。",
                 "q27_2_opt_b": "它从头开始按顺序逐个检查列表中的每个元素。", // Correct
                 "q27_2_opt_c": "它随机选择元素，直到找到目标。",
                 "q27_2_opt_d": "它使用哈希函数直接定位元素。",
                 "q27_3_text": "3. 为了使线性搜索正常工作，对输入数据（例如列表）的主要要求是什么？",
                 "q27_3_opt_a": "列表必须按升序排序。",
                 "q27_3_opt_b": "列表必须只包含数字。",
                 "q27_3_opt_c": "没有特定要求；它适用于任何项目序列。", // Correct
                 "q27_3_opt_d": "列表不得包含重复值。",
                 "q27_4_text": "4. 在哪种情况下，线性搜索表现出其*最佳*时间性能？",
                 "q27_4_opt_a": "当目标元素是列表中的第一个元素时。", // Correct
                 "q27_4_opt_b": "当目标元素是列表中的最后一个元素时。",
                 "q27_4_opt_c": "当目标元素不在列表中时。",
                 "q27_4_opt_d": "当列表非常大时。",
                 "q27_5_text": "5. 在哪种情况下，线性搜索表现出其*最差*时间性能？",
                 "q27_5_opt_a": "当目标元素是第一个元素时。",
                 "q27_5_opt_b": "当列表已排序时。",
                 "q27_5_opt_c": "当目标元素是最后一个元素，或者根本不在列表中时。", // Correct
                 "q27_5_opt_d": "当列表包含重复元素时。",
                 "q27_6_text": "6. 在最坏情况下，线性搜索的时间复杂度（大O表示法）是多少，其中 'n' 是列表中的元素数量？",
                 "q27_6_opt_a": "O(1) - 常数时间",
                 "q27_6_opt_b": "O(log n) - 对数时间",
                 "q27_6_opt_c": "O(n) - 线性时间", // Correct
                 "q27_6_opt_d": "O(n^2) - 平方时间",
                 "q27_7_text": "7. 考虑 Python 代码片段：<code>for item in data_list: if item == target_value: print(\"找到了!\"); break</code>。此代码实现了哪种算法？",
                 "q27_7_opt_a": "冒泡排序 (Bubble Sort)",
                 "q27_7_opt_b": "二分搜索 (Binary Search)",
                 "q27_7_opt_c": "线性搜索 (Linear Search)", // Correct
                 "q27_7_opt_d": "选择排序 (Selection Sort)",
                 "q27_8_text": "8. 如果您对列表中*不存在*的项目执行线性搜索，会发生什么？",
                 "q27_8_opt_a": "搜索立即停止并返回错误。",
                 "q27_8_opt_b": "搜索检查列表中的每个元素，然后断定未找到该项目。", // Correct
                 "q27_8_opt_c": "搜索仅检查第一个和最后一个元素。",
                 "q27_8_opt_d": "搜索陷入无限循环。",
                 "q27_9_text": "9. 对于大型数据集，通常认为线性搜索的效率低于二分搜索。为什么？",
                 "q27_9_opt_a": "线性搜索需要更多内存。",
                 "q27_9_opt_b": "线性搜索只能处理数字。",
                 "q27_9_opt_c": "线性搜索可能需要检查每一个元素 (O(n))，而二分搜索在排序数据上每一步都排除一半数据 (O(log n))。", // Correct
                 "q27_9_opt_d": "线性搜索在 Python 中更难实现。",
                 "q27_10_text": "10. 尽管线性搜索在大型数据集上效率可能较低，但在什么情况下它可能是一个合适的选择？",
                 "q27_10_opt_a": "当列表非常大（数百万个元素）时。",
                 "q27_10_opt_b": "当已知列表未排序且相对较小，或者非常看重简单性时。", // Correct
                 "q27_10_opt_c": "仅在搜索列表中最小元素时。",
                 "q27_10_opt_d": "当您需要保证在常数时间 (O(1)) 内找到元素时。",
                 // Correct Answers Map (same as English)
                 "correctAnswers": { "q27_1": "b", "q27_2": "b", "q27_3": "c", "q27_4": "a", "q27_5": "c", "q27_6": "c", "q27_7": "c", "q27_8": "b", "q27_9": "c", "q27_10": "b" }
             }
         };

        // --- JavaScript Logic ---
        document.addEventListener('DOMContentLoaded', () => {

            const form = document.getElementById('knowledge-check-form');
            const submitButton = document.getElementById('submit-quiz');
            const resultsDiv = document.getElementById('quiz-results');
            const languageSelectElement = document.getElementById('languageSelect');
            let currentLang = getStoredLanguage();

            // --- Language Handling ---
            function getStoredLanguage() { const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY); return (storedLang && translations[storedLang]) ? storedLang : 'en'; }
            function setLanguage(lang) { if (!translations[lang]) lang = 'en'; localStorage.setItem(LANGUAGE_STORAGE_KEY, lang); document.documentElement.lang = lang; currentLang = lang; translatePage(lang); // Update language selector value if needed const langSelect = document.getElementById('languageSelect'); if (langSelect) langSelect.value = lang; }
            function getTranslation(key, lang, replacements = {}) { let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`; // Fallback using key if (typeof text !== 'string') return text; // Handle non-string data like correctAnswers object for (const placeholder in replacements) { const regex = new RegExp(`\\{${placeholder}\\}`, 'g'); text = text.replace(regex, replacements[placeholder]); } return text; }
            function translatePage(lang) { document.querySelectorAll('[data-translate]').forEach(el => { const key = el.getAttribute('data-translate'); const translation = getTranslation(key, lang); if (el.tagName === 'TITLE') { document.title = translation; } else if (translation.includes('<') && translation.includes('>')) { el.innerHTML = translation; // Allow HTML in translations } else { el.textContent = translation; } }); document.querySelectorAll('[data-translate-aria-label]').forEach(el => { const key = el.getAttribute('data-translate-aria-label'); el.setAttribute('aria-label', getTranslation(key, lang)); }); }

            // --- LocalStorage Handling ---
            function loadKnowledgeCheckStatus() { try { const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY); const parsed = storedStatus ? JSON.parse(storedStatus) : {}; return typeof parsed === 'object' && parsed !== null ? parsed : {}; } catch (e) { console.error("Error reading KC status from localStorage:", e); return {}; } }
            function saveKnowledgeCheckStatus(statusObject) { try { localStorage.setItem(KNOWLEDGE_CHECK_STORAGE_KEY, JSON.stringify(statusObject)); } catch (e) { console.error("Error saving KC status to localStorage:", e); } }

            // --- Quiz Logic ---
            function handleSubmit(event) {
                event.preventDefault();
                submitButton.disabled = true;
                let score = 0;
                const correctAnswers = getTranslation('correctAnswers', currentLang); // Get correct answers for the current language

                const questionBlocks = form.querySelectorAll('.question-block');

                questionBlocks.forEach(block => {
                    const questionId = block.dataset.questionId;
                    const selectedInput = block.querySelector('input[type="radio"]:checked');
                    const options = block.querySelectorAll('.options input[type="radio"]');
                    const labels = block.querySelectorAll('.options label');

                    // Disable all options for this question
                    options.forEach(input => input.disabled = true);

                    if (selectedInput) {
                        const userAnswer = selectedInput.value;
                        const correctAnswer = correctAnswers[questionId];
                        const selectedLabel = block.querySelector(`label[for="${selectedInput.id}"]`);

                        selectedLabel.classList.add('user-selected'); // Mark what user selected

                        if (userAnswer === correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct');
                            block.classList.add('answered-correct');
                        } else {
                            selectedLabel.classList.add('incorrect');
                            block.classList.add('answered-incorrect');
                            // Also highlight the correct answer
                            const correctInput = block.querySelector(`input[value="${correctAnswer}"]`);
                            if (correctInput) {
                                const correctLabel = block.querySelector(`label[for="${correctInput.id}"]`);
                                if (correctLabel) correctLabel.classList.add('correct');
                            }
                        }
                    } else {
                         // No answer selected - mark block as incorrect if needed, maybe show correct?
                         block.classList.add('answered-incorrect'); // Mark as incorrect if unanswered
                         const correctAnswer = correctAnswers[questionId];
                         const correctInput = block.querySelector(`input[value="${correctAnswer}"]`);
                            if (correctInput) {
                                const correctLabel = block.querySelector(`label[for="${correctInput.id}"]`);
                                if (correctLabel) correctLabel.classList.add('correct'); // Show correct answer if none selected
                            }
                    }
                });

                displayResults(score);
            }

            function displayResults(score) {
                const passed = score >= PASSING_SCORE;
                resultsDiv.innerHTML = ''; // Clear previous results
                resultsDiv.style.display = 'block'; // Show results area

                const resultTitle = document.createElement('p');
                const scoreText = document.createElement('p');
                const detailsText = document.createElement('p');
                detailsText.className = 'result-message-details';

                scoreText.innerHTML = getTranslation('result_score', currentLang, { score: score, total: TOTAL_QUESTIONS });

                if (passed) {
                    resultsDiv.className = 'pass'; // Use class for styling
                    resultTitle.innerHTML = getTranslation('result_pass', currentLang);
                    detailsText.textContent = getTranslation('result_pass_details', currentLang, { moduleId: CURRENT_MODULE_ID });

                    // Save progress to localStorage
                    const currentStatus = loadKnowledgeCheckStatus();
                    currentStatus[CURRENT_MODULE_ID] = true; // Mark this module as complete
                    saveKnowledgeCheckStatus(currentStatus);
                } else {
                    resultsDiv.className = 'fail'; // Use class for styling
                    resultTitle.innerHTML = getTranslation('result_fail', currentLang);
                    detailsText.textContent = getTranslation('result_fail_details', currentLang, { passingScore: PASSING_SCORE });
                    // Offer retry? Button is already disabled, user has to refresh page to try again (as per requirements)
                }

                resultsDiv.appendChild(resultTitle);
                resultsDiv.appendChild(scoreText);
                resultsDiv.appendChild(detailsText);

                // Scroll to results
                 resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            // --- Event Listeners ---
            form.addEventListener('submit', handleSubmit);
            languageSelectElement.addEventListener('change', (e) => {
                setLanguage(e.target.value);
                // Reset quiz state visually if needed? Or just translate?
                // For simplicity, just translating. User keeps answers if changed mid-quiz.
            });


            // --- Initial Setup ---
            setLanguage(currentLang); // Apply initial language

        }); // End DOMContentLoaded
    </script>

</body>
</html>