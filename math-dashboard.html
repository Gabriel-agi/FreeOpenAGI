<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Curso - Matem√°tica Essencial para TI</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Math Theme) --- */
        :root {
            /* Math Theme Palette */
            --primary-color: #005f73; /* Dark Teal */
            --secondary-color: #0a9396; /* Medium Teal */
            --background-page: #e9f5f7; /* Very Light Teal/Gray */
            --background-card: #ffffff;
            --background-sidebar: #ffffff;
            --background-header: linear-gradient(135deg, #005f73, #0a9396); /* Teal Gradient */
            --text-light: #f8f9fa;
            --text-dark: #212529; /* Darker Text */
            --text-muted: #6c757d;
            --accent-color: #ee9b00; /* Orange Accent */
            --success-color: #2a9d8f; /* Greenish Teal for Success */
            --error-color: #ae2012; /* Dark Red for Error */
            --info-color: #94d2bd; /* Light Teal Info */
            --video-color: #e9c46a; /* Sandy Yellow for Video */
            --check-color: #0077b6; /* Blue for Check/Progress */
            --certificate-color: #9b2226; /* Dark Red for Certificate Icon */

            /* Chatbot Theme */
            --chat-panel-bg: #ffffff;
            --chat-box-bg: #f8f9fa;
            --chat-bot-bg: #e0fbfc; /* Light Cyan for Bot */
            --chat-bot-text: #003d5b;
            --chat-user-bg: #cfe8fc; /* Light Blue for User */
            --chat-user-text: #023e8a;
            --chat-error-bg: #f8d7da;
            --chat-error-text: #ae2012;
            --chat-border-color: #dee2e6;
            --chat-header-icon-color: var(--accent-color); /* Orange Cat Icon */

            /* Shared Variables */
            --progress-bg: #dbebeb; /* Light teal background */
            --progress-fill: var(--check-color); /* Blue fill */
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --card-shadow-hover: 0 6px 18px rgba(0, 0, 0, 0.08);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            --sidebar-width: 260px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            overflow-x: hidden;
        }
        body.chat-open { overflow: hidden; }

        /* --- Animations --- */
        .card-fade-in { opacity: 0; transform: translateY(20px); animation: fadeInAnimation 0.6s ease-out forwards; }
        @keyframes fadeInAnimation { to { opacity: 1; transform: translateY(0); } }

        /* --- Dashboard Header --- */
        .dashboard-header { background: var(--background-header); color: var(--text-light); padding: 2rem 1.5rem 1.5rem 1.5rem; margin-bottom: 2rem; position: relative; }
        .header-content { max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
        .dashboard-header h1 { font-family: var(--font-title); font-size: 2.2rem; margin-bottom: 0.8rem; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.15); }
        .progress-area { background-color: rgba(255, 255, 255, 0.1); padding: 1rem 1.5rem; border-radius: var(--border-radius); margin-top: 1.5rem; }
        .progress-area label { display: block; font-size: 0.9rem; font-weight: 500; margin-bottom: 0.5rem; opacity: 0.9; }
        .progress-bar-container { width: calc(100% - 60px); height: 12px; background-color: var(--progress-bg); border-radius: 6px; overflow: hidden; display: inline-block; vertical-align: middle; }
        .progress-bar-fill { width: 0%; height: 100%; background: var(--progress-fill); border-radius: 6px; transition: width 0.5s ease-out; position: relative; }
        .progress-percentage { font-size: 1.1rem; font-weight: 700; margin-left: 1rem; vertical-align: middle; display: inline-block; min-width: 45px; text-align: right; }

        /* --- Dashboard Layout --- */
        .dashboard-container { max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; display: flex; gap: 2rem; align-items: flex-start; }

        /* --- Sidebar --- */
        .dashboard-sidebar { width: var(--sidebar-width); flex-shrink: 0; position: sticky; top: 20px; height: calc(100vh - 40px); overflow-y: auto; padding-right: 10px; scrollbar-width: thin; scrollbar-color: var(--secondary-color) var(--background-page); }
        .dashboard-sidebar::-webkit-scrollbar { width: 6px; }
        .dashboard-sidebar::-webkit-scrollbar-track { background: var(--background-page); }
        .dashboard-sidebar::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 3px; }
        .sidebar-widget { background-color: var(--background-sidebar); border-radius: var(--border-radius); padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--card-shadow); border: 1px solid var(--border-color); }
        .sidebar-widget h4 { font-family: var(--font-title); font-size: 1.1rem; margin-bottom: 1rem; color: var(--primary-color); border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; display: flex; align-items: center; }
        .sidebar-widget h4 i { margin-right: 8px; color: var(--primary-color); opacity: 0.8; }
        .sidebar-widget ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-widget li a { display: block; text-decoration: none; color: var(--text-muted); padding: 0.6rem 0.6rem 0.6rem 10px; font-size: 0.95rem; font-weight: 500; border-radius: 4px; transition: all var(--transition-speed) ease; position: relative; }
        .sidebar-widget li a:hover { color: var(--primary-color); background-color: #e0fbfc; } /* Light cyan hover */
        /* Active link styling */
        .sidebar-widget li a.active { color: var(--primary-color); font-weight: 700; background-color: #b2f0f0; } /* Slightly darker cyan */
        .sidebar-widget li a.active::before { content: ''; position: absolute; left: -15px; top: 5px; bottom: 5px; width: 4px; background-color: var(--primary-color); border-radius: 2px; }
        /* Hide ::before on smaller screens where sidebar is not sticky */
        @media (max-width: 992px) { .sidebar-widget li a.active::before { display: none; } }

        /* Certificate Tracker Specific */
        .certificate-tracker ul li { margin-bottom: 0.8rem; display: flex; align-items: center; font-size: 0.9rem; padding: 0.3rem 0;}
        .certificate-tracker .status-icon { width: 25px; text-align: center; margin-right: 8px; font-size: 1.1rem; }
        .certificate-tracker .status-icon .fa-check-circle { color: var(--success-color); }
        .certificate-tracker .status-icon .fa-spinner { color: var(--secondary-color); animation: spin 1.5s linear infinite; }
        .certificate-tracker .status-icon .fa-lock { color: var(--text-muted); opacity: 0.7; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .certificate-tracker .cert-name { flex-grow: 1; font-weight: 500;}
        .certificate-tracker li:hover { background-color: #f8f9fa; border-radius: 4px;}
        .cert-explanation { font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed var(--border-color); line-height: 1.4; }
        .cert-explanation p { margin-bottom: 0.5rem; }
        .cert-explanation strong { color: var(--text-dark); }
        .cert-explanation code { font-size: 0.9em; background: #eee; padding: 1px 4px; border-radius: 3px;}

        /* Links Widget Specific */
        .sidebar-links ul li { margin-bottom: 0.5rem; }
        .sidebar-links ul li a { display: inline-flex; align-items: center; padding: 0.5rem 1rem; font-size: 0.9rem; border-radius: 5px; }
        .sidebar-links ul li a i { margin-right: 6px; }
        .sidebar-links .link-main-site { background-color: var(--secondary-color); color: var(--text-light); }
        .sidebar-links .link-main-site:hover { background-color: #007a7d; color: var(--text-light); } /* Darken secondary */
        .sidebar-links .link-certificates { background-color: var(--certificate-color); color: var(--text-light); }
        .sidebar-links .link-certificates:hover { background-color: #7a1c1e; color: var(--text-light); } /* Darken certificate */

        /* --- Main Content Area --- */
        .dashboard-main { flex-grow: 1; min-width: 0; }
        .module-section { margin-bottom: 3rem; }
        .module-section h2 { font-family: var(--font-title); font-size: 1.8rem; color: var(--text-dark); margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-color); scroll-margin-top: 30px; display: flex; align-items: center; }
        .module-section h2 i { margin-right: 10px; color: var(--primary-color); }
        .modules-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }

        /* --- Module Card Styling --- */
        .module-card { background-color: var(--background-card); border-radius: var(--border-radius); box-shadow: var(--card-shadow); transition: all var(--transition-speed) ease-in-out; display: flex; flex-direction: column; border: 1px solid var(--border-color); overflow: hidden; position: relative; opacity: 0; transform: translateY(20px); }
        .module-card.knowledge-complete::after { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; top: 10px; right: 10px; color: var(--success-color); font-size: 1.2rem; background-color: rgba(255, 255, 255, 0.8); padding: 3px 5px; border-radius: 50%; opacity: 0.85; z-index: 2; }
        .module-card:hover { transform: translateY(-5px); box-shadow: var(--card-shadow-hover); }
        .card-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
        .module-card h3 { font-family: var(--font-title); font-size: 1.3rem; color: var(--primary-color); margin-bottom: 0.7rem; line-height: 1.3; }
        .module-card h3 .module-number { color: var(--text-muted); font-weight: 400; font-size: 1rem; margin-right: 6px; display: inline-block; background-color: var(--background-page); padding: 2px 6px; border-radius: 4px; }
        .module-topics { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem; line-height: 1.5; flex-grow: 1; }
        .module-topics code { background-color: #e9ecef; padding: 0.1em 0.4em; border-radius: 3px; font-size: 0.85em; color: #c7254e; } /* Keep code style */
        .module-topics strong { color: var(--text-dark); font-weight: 500; display: block; margin-top: 0.5rem; font-size: 0.85rem; }
        .module-links { display: flex; flex-wrap: wrap; gap: 0.5rem; padding: 1rem 1.5rem; background-color: #f8f9fa; border-top: 1px solid var(--border-color); margin-top: auto; }
        .module-links a { flex: 1 1 40%; text-decoration: none; color: var(--text-dark); background-color: var(--background-card); padding: 0.5rem 0.7rem; border-radius: 5px; font-size: 0.85rem; font-weight: 500; text-align: center; transition: all var(--transition-speed) ease; border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; min-width: 110px; }
        .module-links a i { margin-right: 5px; width: 1em; opacity: 0.7; }
        .module-links a:hover { transform: scale(1.03); box-shadow: 0 2px 5px rgba(0,0,0,0.08); border-color: currentColor; }
        .module-links a.link-theory { color: var(--secondary-color); } /* Medium Teal */
        .module-links a.link-practice { color: var(--primary-color); } /* Dark Teal */
        .module-links a.link-advanced { color: var(--success-color); } /* Greenish Teal */
        .module-links a.link-video { color: var(--video-color); } /* Sandy Yellow */
        .module-links a.link-knowledge { color: var(--check-color); } /* Blue */

        /* --- Floating Action Button (FAB) --- */
        #chatbot-fab { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); /* Teal gradient */ color: white; border: none; border-radius: 50%; font-size: 1.8rem; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); transition: all var(--transition-speed) ease; z-index: 1010; }
        #chatbot-fab:hover { transform: scale(1.1); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); }
        #chatbot-fab i { transition: transform 0.3s ease; }
        body.chat-open #chatbot-fab { background: linear-gradient(45deg, var(--text-muted), #5a6268); } /* Gray when open */
        body.chat-open #chatbot-fab i { transform: rotate(135deg); }

        /* --- Chat Panel Overhaul --- */
        #chat-panel-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.25); backdrop-filter: blur(2px); opacity: 0; visibility: hidden; transition: opacity var(--transition-speed) ease, visibility 0s var(--transition-speed); z-index: 1000; }
        body.chat-open #chat-panel-overlay { opacity: 1; visibility: visible; transition-delay: 0s; }
        #chat-panel { position: fixed; bottom: 30px; right: 100px; width: 90vw; max-width: 450px; height: 75vh; max-height: 650px; background-color: var(--chat-panel-bg); border-radius: var(--border-radius); box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 1px solid var(--chat-border-color); display: flex; flex-direction: column; z-index: 1005; opacity: 0; transform: translateY(20px) scale(0.98); visibility: hidden; transition: opacity var(--transition-speed) cubic-bezier(0.165, 0.84, 0.44, 1), transform var(--transition-speed) cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s var(--transition-speed); transform-origin: bottom right; }
        body.chat-open #chat-panel { opacity: 1; transform: translateY(0) scale(1); visibility: visible; transition-delay: 0s; }
        .chat-panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 1.2rem; border-bottom: 1px solid var(--chat-border-color); background-color: var(--background-page); border-top-left-radius: var(--border-radius); border-top-right-radius: var(--border-radius); }
        .chat-panel-header h5 { margin: 0; font-family: var(--font-title); font-size: 1.1rem; color: var(--primary-color); display: flex; align-items: center; }
        .chat-panel-header h5 i { margin-right: 8px; color: var(--chat-header-icon-color); } /* Use variable for icon color */
        #chat-close-button { background: none; border: none; font-size: 1.5rem; color: var(--text-muted); cursor: pointer; padding: 0.2rem; line-height: 1; transition: color var(--transition-speed); }
        #chat-close-button:hover { color: var(--text-dark); }
        #chatbox { flex-grow: 1; overflow-y: auto; padding: 1.5rem; background-color: var(--chat-box-bg); font-family: var(--font-body); line-height: 1.6; scrollbar-width: thin; scrollbar-color: var(--secondary-color) var(--chat-box-bg); }
        #chatbox::-webkit-scrollbar { width: 6px; }
        #chatbox::-webkit-scrollbar-track { background: var(--chat-box-bg); }
        #chatbox::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 3px; }
        #chatbox .message-container { display: flex; margin-bottom: 1rem; align-items: flex-end; }
        #chatbox .message-avatar { width: 35px; height: 35px; border-radius: 50%; background-color: var(--secondary-color); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0; margin-right: 10px; }
        #chatbox .user-message-container .message-avatar { background-color: var(--chat-user-text); color: white;} /* Use text color for user avatar bg */
        #chatbox .bot-message-container .message-avatar { background-color: var(--chat-header-icon-color); color: white; } /* Use icon color for bot avatar bg */
        #chatbox .message { padding: 10px 15px; border-radius: 18px; max-width: 80%; word-wrap: break-word; font-size: 0.95rem; position: relative; border: 1px solid var(--chat-border-color); box-shadow: 0 1px 3px rgba(0,0,0,0.04); }
        #chatbox .user-message-container { justify-content: flex-end; }
        #chatbox .user-message-container .message-avatar { margin-right: 0; margin-left: 10px; order: 2; }
        #chatbox .user-message-container .message { order: 1; }
        #chatbox .user-message { background-color: var(--chat-user-bg); color: var(--chat-user-text); border-color: var(--chat-user-bg); border-top-right-radius: 4px; }
        #chatbox .bot-message { background-color: var(--chat-bot-bg); color: var(--chat-bot-text); border-color: var(--chat-bot-bg); border-top-left-radius: 4px; }
        #chatbox .error-message { background-color: var(--chat-error-bg); color: var(--chat-error-text); border-color: var(--error-color); margin-bottom: 1rem; } /* Use error color for border */
        #chatbox .message strong { display: none; } /* Keep this hidden */
        #chatbox .typing-indicator { display: flex; align-items: center; color: var(--text-muted); font-style: italic; margin-bottom: 1rem; padding: 8px 15px; font-size: 0.9rem; }
        #chatbox .typing-indicator i { margin-right: 8px; color: var(--chat-header-icon-color); } /* Use icon color */
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .typing-dot { width: 6px; height: 6px; background-color: var(--text-muted); border-radius: 50%; display: inline-block; margin: 0 2px; animation: bounce 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        #input-area { display: flex; padding: 0.8rem; border-top: 1px solid var(--chat-border-color); background-color: var(--background-page); align-items: center; }
        #userInput { flex-grow: 1; border: 1px solid var(--chat-border-color); border-radius: 18px; padding: 0.7rem 1rem; font-size: 0.95rem; background-color: var(--background-card); color: var(--text-dark); outline: none; transition: border-color var(--transition-speed); resize: none; max-height: 80px; font-family: var(--font-body); }
        #userInput:focus { border-color: var(--primary-color); }
        #sendButton { background-color: var(--primary-color); color: var(--text-light); border: none; border-radius: 50%; width: 40px; height: 40px; margin-left: 0.7rem; padding: 0; cursor: pointer; font-size: 1.1rem; transition: background-color var(--transition-speed); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        #sendButton:hover { background-color: #004b5a; } /* Darken primary */
        #sendButton:disabled { background-color: var(--secondary-color); cursor: not-allowed; opacity: 0.7; }

        /* --- Footer --- */
        footer { text-align: center; padding: 1.5rem; margin-top: 3rem; background-color: var(--background-card); border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }

        /* --- Responsive Design (Adjustments mainly for chat panel positioning) --- */
        @media (max-width: 1200px) { .dashboard-container { padding: 0 1rem; gap: 1.5rem; } :root { --sidebar-width: 240px; } #chat-panel { right: 85px; max-width: 420px;} }
        @media (max-width: 992px) { .dashboard-container { flex-direction: column; } .dashboard-sidebar { width: 100%; position: static; height: auto; overflow-y: visible; padding-right: 0; margin-bottom: 2rem; } .sidebar-widget { padding: 1.2rem; } .modules-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); } .module-section h2 { scroll-margin-top: 10px; } #chat-panel { right: 30px; bottom: 90px; max-width: 400px; height: 70vh;} }
        @media (max-width: 768px) { html { font-size: 15px; } .dashboard-header h1 { font-size: 1.8rem; } .progress-bar-container { width: calc(100% - 55px); } .progress-percentage { font-size: 1rem; } .modules-grid { grid-template-columns: 1fr; gap: 1rem; } .card-content { padding: 1.2rem; } .module-links { padding: 0.8rem 1.2rem; } #chat-panel { right: 15px; bottom: 80px; left: 15px; width: auto; max-width: none; height: 65vh; } }
        @media (max-width: 576px) { html { font-size: 14px; } .dashboard-header { padding: 1.5rem 1rem 1rem 1rem; } .dashboard-header h1 { font-size: 1.6rem; } .progress-bar-container { width: calc(100% - 50px); } .progress-percentage { font-size: 0.95rem; } .module-card h3 { font-size: 1.15rem; } .module-topics { font-size: 0.85rem; } .module-links a { flex-basis: 100%; font-size: 0.9rem; padding: 0.6rem; } #chatbot-fab { width: 50px; height: 50px; font-size: 1.5rem; bottom: 20px; right: 20px; } #chat-panel { bottom: 75px; right: 10px; left: 10px; height: 60vh; } #chatbox { padding: 1rem; } #chatbox .message-avatar { width: 30px; height: 30px; font-size: 1rem; } #chatbox .message { font-size: 0.9rem; padding: 8px 12px;} #input-area { padding: 0.6rem; } #userInput { padding: 0.6rem 0.8rem; font-size: 0.9rem; border-radius: 15px;} #sendButton { width: 35px; height: 35px; font-size: 1rem; margin-left: 0.5rem;} }

    </style>
</head>
<body>

    <header class="dashboard-header">
        <div class="header-content">
            <h1>Painel do Curso - Matem√°tica Essencial para TI</h1>
            <div class="progress-area">
                <label for="overall-kc-progress">Verifica√ß√µes de Conhecimento Conclu√≠das</label>
                <div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="overall-kc-progress-fill" style="width: 0%;"></div>
                    </div>
                    <span class="progress-percentage" id="overall-kc-progress-value">0%</span>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-container">

        <!-- === Sidebar === -->
        <aside class="dashboard-sidebar">
            <!-- Navigation Widget -->
            <div class="sidebar-widget">
                <h4><i class="fas fa-compass"></i> Navegar Se√ß√µes</h4>
                <ul class="section-nav">
                     <li><a href="#section-est-intro" class="nav-link">Estat√≠stica B√°sica</a></li>
                     <li><a href="#section-est-medidas" class="nav-link">Medidas & Gr√°ficos</a></li>
                     <li><a href="#section-prob-intro" class="nav-link">Probabilidade B√°sica</a></li>
                     <li><a href="#section-prob-dist" class="nav-link">Distribui√ß√µes</a></li>
                     <li><a href="#section-conj-intro" class="nav-link">Conjuntos B√°sicos</a></li>
                     <li><a href="#section-conj-apl" class="nav-link">Conjuntos Avan√ßados</a></li>
                </ul>
            </div>

             <!-- Certificate Tracker Widget -->
            <div class="sidebar-widget certificate-tracker">
                 <h4><i class="fas fa-award"></i> Status dos Certificados</h4>
                 <ul>
                     <li data-modules="1,2,3,4,5"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Estat√≠stica Introdut√≥ria</span> </li>
                     <li data-modules="6,7,8,9,10"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">An√°lise Descritiva</span> </li>
                     <li data-modules="11,12,13,14,15"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Probabilidade & Discretas</span> </li>
                     <li data-modules="16,17,18,19,20"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Distribui√ß√µes Cont√≠nuas</span> </li>
                     <li data-modules="21,22,23,24,25"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Teoria dos Conjuntos</span> </li>
                     <li data-modules="26,27,28,29,30"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Aplica√ß√µes de Conjuntos</span> </li>
                     <li data-modules="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Curso Completo</span> </li>
                 </ul>
                 <div class="cert-explanation">
                     <p>Complete todas as <strong>Verifica√ß√µes de Conhecimento</strong> (<i class="fas fa-check-double" style="color:var(--check-color)"></i>) em uma se√ß√£o para ganhar o certificado.</p>
                     <p><i class="fas fa-exclamation-triangle" style="color: var(--accent-color);"></i> <strong>Nota:</strong> O progresso usa <code>localStorage</code>. Pode ser perdido ao trocar de navegador/dispositivo ou limpar dados. Refa√ßa as Verifica√ß√µes para restaurar.</p>
                 </div>
            </div>

             <!-- Links Widget -->
             <div class="sidebar-widget sidebar-links">
                 <h4><i class="fas fa-link"></i> Links R√°pidos</h4>
                  <ul>
                    <li><a href="index.html" class="link-main-site"><i class="fas fa-home"></i> Site Principal</a></li>
                    <li><a href="math-certificates.html" class="link-certificates"><i class="fas fa-certificate"></i> Ver Certificados</a></li>
                  </ul>
             </div>
        </aside>

        <!-- === Main Content === -->
        <main class="dashboard-main">
            <!-- Section 1: Estat√≠stica B√°sica (M√≥dulos 1-5) -->
            <section id="section-est-intro" class="module-section">
                <h2><i class="fas fa-chart-bar"></i> Estat√≠stica B√°sica (M√≥dulos 1-5)</h2>
                <div class="modules-grid">
                    <!-- Card 1 -->
                    <div class="module-card card-fade-in" data-module-id="1"> <div class="card-content"> <h3><span class="module-number">1</span> Introdu√ß√£o √† Estat√≠stica</h3> <p class="module-topics">Conceitos b√°sicos, popula√ß√£o vs. amostra, tipos de dados. <strong>Foco:</strong> Fundamentos da estat√≠stica.</p> </div> <div class="module-links"> <a href="math-theory-1.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-1.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-1.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-1.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-1.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 2 -->
                    <div class="module-card card-fade-in" data-module-id="2"> <div class="card-content"> <h3><span class="module-number">2</span> Vari√°veis e Mensura√ß√£o</h3> <p class="module-topics">Classifica√ß√£o de vari√°veis: qualitativas, quantitativas, discretas, cont√≠nuas. <strong>Foco:</strong> Tipos de dados e como medi-los.</p> </div> <div class="module-links"> <a href="math-theory-2.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-2.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-2.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-2.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-2.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 3 -->
                    <div class="module-card card-fade-in" data-module-id="3"> <div class="card-content"> <h3><span class="module-number">3</span> M√©todos de Amostragem</h3> <p class="module-topics">T√©cnicas: aleat√≥ria simples, estratificada, sistem√°tica, por conglomerados. <strong>Foco:</strong> Como selecionar amostras representativas.</p> </div> <div class="module-links"> <a href="math-theory-3.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-3.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-3.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-3.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-3.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 4 -->
                    <div class="module-card card-fade-in" data-module-id="4"> <div class="card-content"> <h3><span class="module-number">4</span> Organiza√ß√£o de Dados</h3> <p class="module-topics">Tabelas de frequ√™ncia (simples, acumulada), distribui√ß√£o de frequ√™ncias para dados agrupados. <strong>Foco:</strong> Estruturar dados brutos.</p> </div> <div class="module-links"> <a href="math-theory-4.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-4.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-4.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-4.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-4.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 5 -->
                    <div class="module-card card-fade-in" data-module-id="5"> <div class="card-content"> <h3><span class="module-number">5</span> Gr√°ficos Estat√≠sticos (Pt 1)</h3> <p class="module-topics">Histogramas, gr√°ficos de barras (simples, m√∫ltiplas), gr√°ficos de setores (pizza). <strong>Foco:</strong> Visualiza√ß√£o de frequ√™ncias.</p> </div> <div class="module-links"> <a href="math-theory-5.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-5.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-5.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-5.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-5.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                 </div>
            </section>

            <!-- Section 2: Medidas & Gr√°ficos (M√≥dulos 6-10) -->
            <section id="section-est-medidas" class="module-section">
                <h2><i class="fas fa-calculator"></i> Medidas & Gr√°ficos (M√≥dulos 6-10)</h2>
                <div class="modules-grid">
                     <!-- Card 6 -->
                    <div class="module-card card-fade-in" data-module-id="6"> <div class="card-content"> <h3><span class="module-number">6</span> Gr√°ficos Estat√≠sticos (Pt 2)</h3> <p class="module-topics">Boxplot (diagrama de caixa), gr√°ficos de dispers√£o, gr√°ficos de linha. <strong>Foco:</strong> Visualiza√ß√£o de distribui√ß√£o e rela√ß√µes.</p> </div> <div class="module-links"> <a href="math-theory-6.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-6.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-6.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-6.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-6.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 7 -->
                     <div class="module-card card-fade-in" data-module-id="7"> <div class="card-content"> <h3><span class="module-number">7</span> Medidas de Tend√™ncia Central</h3> <p class="module-topics">M√©dia (aritm√©tica, ponderada), mediana, moda. Propriedades e c√°lculo. <strong>Foco:</strong> Identificar o centro dos dados.</p> </div> <div class="module-links"> <a href="math-theory-7.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-7.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-7.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-7.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-7.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 8 -->
                     <div class="module-card card-fade-in" data-module-id="8"> <div class="card-content"> <h3><span class="module-number">8</span> Medidas de Dispers√£o</h3> <p class="module-topics">Amplitude, vari√¢ncia (populacional, amostral), desvio padr√£o, coeficiente de varia√ß√£o. <strong>Foco:</strong> Medir a variabilidade dos dados.</p> </div> <div class="module-links"> <a href="math-theory-8.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-8.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-8.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-8.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-8.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 9 -->
                     <div class="module-card card-fade-in" data-module-id="9"> <div class="card-content"> <h3><span class="module-number">9</span> An√°lise Explorat√≥ria (AED)</h3> <p class="module-topics">Identifica√ß√£o de outliers (usando boxplot, Z-score), an√°lise de assimetria e curtose. <strong>Foco:</strong> Investigar caracter√≠sticas dos dados.</p> </div> <div class="module-links"> <a href="math-theory-9.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-9.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-9.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-9.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-9.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 10 -->
                    <div class="module-card card-fade-in" data-module-id="10"> <div class="card-content"> <h3><span class="module-number">10</span> Aplica√ß√µes Pr√°ticas (Desc.)</h3> <p class="module-topics">Casos reais de uso de estat√≠stica descritiva em TI (an√°lise de logs, desempenho de sistemas). <strong>Foco:</strong> Conectar teoria com pr√°tica.</p> </div> <div class="module-links"> <a href="math-theory-10.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-10.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-10.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-10.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-10.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                </div>
            </section>

             <!-- Section 3: Probabilidade B√°sica (M√≥dulos 11-15) -->
             <section id="section-prob-intro" class="module-section">
                 <h2><i class="fas fa-dice"></i> Probabilidade B√°sica (M√≥dulos 11-15)</h2>
                 <div class="modules-grid">
                     <!-- Card 11 -->
                     <div class="module-card card-fade-in" data-module-id="11"> <div class="card-content"> <h3><span class="module-number">11</span> Introdu√ß√£o √† Probabilidade</h3> <p class="module-topics">Espa√ßo amostral, eventos, defini√ß√µes b√°sicas (cl√°ssica, frequentista). Axiomas. <strong>Foco:</strong> Fundamentos da probabilidade.</p> </div> <div class="module-links"> <a href="math-theory-11.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-11.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-11.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-11.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-11.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 12 -->
                     <div class="module-card card-fade-in" data-module-id="12"> <div class="card-content"> <h3><span class="module-number">12</span> Probabilidade Condicional</h3> <p class="module-topics">Defini√ß√£o, regra do produto, independ√™ncia de eventos, Teorema de Bayes. <strong>Foco:</strong> Probabilidade dado que outro evento ocorreu.</p> </div> <div class="module-links"> <a href="math-theory-12.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-12.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-12.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-12.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-12.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 13 -->
                     <div class="module-card card-fade-in" data-module-id="13"> <div class="card-content"> <h3><span class="module-number">13</span> Vari√°veis Aleat√≥rias</h3> <p class="module-topics">Discretas vs. cont√≠nuas. Fun√ß√£o de probabilidade (FP) e fun√ß√£o densidade de probabilidade (FDP). Valor esperado. <strong>Foco:</strong> Mapear resultados a n√∫meros.</p> </div> <div class="module-links"> <a href="math-theory-13.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-13.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-13.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-13.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-13.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 14 -->
                     <div class="module-card card-fade-in" data-module-id="14"> <div class="card-content"> <h3><span class="module-number">14</span> Distribui√ß√µes Discretas (Pt 1)</h3> <p class="module-topics">Distribui√ß√£o de Bernoulli, Distribui√ß√£o Binomial. Propriedades e aplica√ß√µes. <strong>Foco:</strong> Modelos para contagens de sucessos.</p> </div> <div class="module-links"> <a href="math-theory-14.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-14.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-14.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-14.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-14.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 15 -->
                     <div class="module-card card-fade-in" data-module-id="15"> <div class="card-content"> <h3><span class="module-number">15</span> Distribui√ß√µes Discretas (Pt 2)</h3> <p class="module-topics">Distribui√ß√£o de Poisson (eventos raros), Distribui√ß√£o Geom√©trica (tentativas at√© sucesso). <strong>Foco:</strong> Outros modelos discretos importantes.</p> </div> <div class="module-links"> <a href="math-theory-15.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-15.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-15.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-15.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-15.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                 </div>
             </section>

            <!-- Section 4: Distribui√ß√µes (M√≥dulos 16-20) -->
            <section id="section-prob-dist" class="module-section">
                 <h2><i class="fas fa-chart-line"></i> Distribui√ß√µes & Correla√ß√£o (M√≥dulos 16-20)</h2> <!-- Using fa-chart-line as fa-bell-curve might not exist -->
                  <div class="modules-grid">
                    <!-- Card 16 -->
                    <div class="module-card card-fade-in" data-module-id="16"> <div class="card-content"> <h3><span class="module-number">16</span> Distribui√ß√£o Normal</h3> <p class="module-topics">Propriedades (curva de sino), Distribui√ß√£o Normal Padr√£o (Z), Tabela Z, aplica√ß√µes. <strong>Foco:</strong> A distribui√ß√£o cont√≠nua mais importante.</p> </div> <div class="module-links"> <a href="math-theory-16.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-16.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-16.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-16.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-16.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 17 -->
                     <div class="module-card card-fade-in" data-module-id="17"> <div class="card-content"> <h3><span class="module-number">17</span> Outras Distrib. Cont√≠nuas</h3> <p class="module-topics">Distribui√ß√£o Exponencial (tempo at√© evento), Distribui√ß√£o Uniforme. <strong>Foco:</strong> Modelos para tempo e intervalos.</p> </div> <div class="module-links"> <a href="math-theory-17.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-17.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-17.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-17.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-17.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 18 -->
                     <div class="module-card card-fade-in" data-module-id="18"> <div class="card-content"> <h3><span class="module-number">18</span> Correla√ß√£o e Regress√£o</h3> <p class="module-topics">Diagrama de dispers√£o, Coeficiente de Correla√ß√£o de Pearson, introdu√ß√£o √† regress√£o linear simples. <strong>Foco:</strong> Medir e modelar rela√ß√µes lineares.</p> </div> <div class="module-links"> <a href="math-theory-18.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-18.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-18.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-18.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-18.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 19 -->
                     <div class="module-card card-fade-in" data-module-id="19"> <div class="card-content"> <h3><span class="module-number">19</span> Aplica√ß√µes em Decis√£o</h3> <p class="module-topics">Uso de modelos probabil√≠sticos em sistemas de informa√ß√£o (ex: filtros de spam, recomenda√ß√£o). <strong>Foco:</strong> Probabilidade na pr√°tica de TI.</p> </div> <div class="module-links"> <a href="math-theory-19.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-19.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-19.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-19.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-19.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 20 -->
                     <div class="module-card card-fade-in" data-module-id="20"> <div class="card-content"> <h3><span class="module-number">20</span> Simula√ß√µes e Ferramentas</h3> <p class="module-topics">Introdu√ß√£o a simula√ß√µes de Monte Carlo. Uso de software (Excel, Python com bibliotecas) para an√°lise. <strong>Foco:</strong> Ferramentas computacionais.</p> </div> <div class="module-links"> <a href="math-theory-20.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-20.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-20.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-20.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-20.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                  </div>
            </section>

             <!-- Section 5: Conjuntos B√°sicos (M√≥dulos 21-25) -->
            <section id="section-conj-intro" class="module-section">
                 <h2><i class="fas fa-shapes"></i> Conjuntos B√°sicos (M√≥dulos 21-25)</h2>
                  <div class="modules-grid">
                    <!-- Card 21 -->
                     <div class="module-card card-fade-in" data-module-id="21"> <div class="card-content"> <h3><span class="module-number">21</span> Conceitos Fundamentais</h3> <p class="module-topics">Defini√ß√µes (elemento, conjunto), pertin√™ncia (‚àà, ‚àâ), representa√ß√£o, igualdade de conjuntos. <strong>Foco:</strong> Vocabul√°rio e nota√ß√£o de conjuntos.</p> </div> <div class="module-links"> <a href="math-theory-21.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-21.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-21.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-21.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-21.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 22 -->
                     <div class="module-card card-fade-in" data-module-id="22"> <div class="card-content"> <h3><span class="module-number">22</span> Opera√ß√µes entre Conjuntos (Pt 1)</h3> <p class="module-topics">Uni√£o (‚à™), Interse√ß√£o (‚à©), Diferen√ßa (A - B). <strong>Foco:</strong> Combinar e comparar conjuntos.</p> </div> <div class="module-links"> <a href="math-theory-22.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-22.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-22.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-22.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-22.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 23 -->
                     <div class="module-card card-fade-in" data-module-id="23"> <div class="card-content"> <h3><span class="module-number">23</span> Opera√ß√µes entre Conjuntos (Pt 2)</h3> <p class="module-topics">Conjunto complementar (A'), Leis de De Morgan, propriedades das opera√ß√µes. <strong>Foco:</strong> Opera√ß√µes avan√ßadas e propriedades.</p> </div> <div class="module-links"> <a href="math-theory-23.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-23.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-23.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-23.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-23.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 24 -->
                     <div class="module-card card-fade-in" data-module-id="24"> <div class="card-content"> <h3><span class="module-number">24</span> Diagramas de Venn</h3> <p class="module-topics">Representa√ß√£o gr√°fica de conjuntos e opera√ß√µes. Resolu√ß√£o de problemas com diagramas. <strong>Foco:</strong> Visualizar rela√ß√µes entre conjuntos.</p> </div> <div class="module-links"> <a href="math-theory-24.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-24.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-24.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-24.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-24.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                     <!-- Card 25 -->
                     <div class="module-card card-fade-in" data-module-id="25"> <div class="card-content"> <h3><span class="module-number">25</span> Conjuntos Num√©ricos</h3> <p class="module-topics">Naturais (‚Ñï), Inteiros (‚Ñ§), Racionais (‚Ñö), Irracionais (I), Reais (‚Ñù). Rela√ß√µes entre eles. <strong>Foco:</strong> Tipos fundamentais de n√∫meros.</p> </div> <div class="module-links"> <a href="math-theory-25.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-25.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-25.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-25.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-25.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                  </div>
            </section>

             <!-- Section 6: Conjuntos Avan√ßados & Revis√£o (M√≥dulos 26-30) -->
            <section id="section-conj-apl" class="module-section">
                 <h2><i class="fas fa-project-diagram"></i> Conjuntos Avan√ßados & Revis√£o (M√≥dulos 26-30)</h2>
                  <div class="modules-grid">
                     <!-- Card 26 -->
                    <div class="module-card card-fade-in" data-module-id="26"> <div class="card-content"> <h3><span class="module-number">26</span> Rela√ß√µes entre Conjuntos</h3> <p class="module-topics">Subconjuntos (‚äÇ, ‚äÜ), Conjunto das partes (pot√™ncia), Parti√ß√µes de um conjunto. <strong>Foco:</strong> Rela√ß√µes hier√°rquicas e divis√µes.</p> </div> <div class="module-links"> <a href="math-theory-26.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-26.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-26.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-26.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-26.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 27 -->
                     <div class="module-card card-fade-in" data-module-id="27"> <div class="card-content"> <h3><span class="module-number">27</span> Aplica√ß√µes em L√≥gica e Algo</h3> <p class="module-topics">Uso de conjuntos em estruturas de dados (Set), l√≥gica booleana, teoria dos grafos (v√©rtices). <strong>Foco:</strong> Conjuntos na computa√ß√£o.</p> </div> <div class="module-links"> <a href="math-theory-27.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-27.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-27.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-27.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-27.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 28 -->
                     <div class="module-card card-fade-in" data-module-id="28"> <div class="card-content"> <h3><span class="module-number">28</span> Conjuntos e Banco de Dados</h3> <p class="module-topics">Rela√ß√£o com √Ålgebra Relacional. Opera√ß√µes de SQL: <code>UNION</code>, <code>INTERSECT</code>, <code>EXCEPT</code> (<code>MINUS</code>). <strong>Foco:</strong> Teoria de conjuntos em SGBDs.</p> </div> <div class="module-links"> <a href="math-theory-28.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-28.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-28.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-28.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-28.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 29 -->
                     <div class="module-card card-fade-in" data-module-id="29"> <div class="card-content"> <h3><span class="module-number">29</span> Exerc√≠cios Integrados</h3> <p class="module-topics">Problemas que combinam conceitos de conjuntos, probabilidade e estat√≠stica descritiva. <strong>Foco:</strong> S√≠ntese e aplica√ß√£o combinada.</p> </div> <div class="module-links"> <a href="math-theory-29.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-29.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-advanced-29.html" class="link-advanced"><i class="fas fa-flask"></i> Avan√ßado</a> <a href="math-video-29.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-29.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                    <!-- Card 30 -->
                     <div class="module-card card-fade-in" data-module-id="30"> <div class="card-content"> <h3><span class="module-number">30</span> Revis√£o Geral e Projeto</h3> <p class="module-topics">S√≠ntese dos temas abordados no curso. Aplica√ß√£o dos conceitos em um cen√°rio pr√°tico de TI. <strong>Foco:</strong> Consolida√ß√£o e projeto final.</p> </div> <div class="module-links"> <a href="math-theory-30.html" class="link-theory"><i class="fas fa-book-open"></i> Teoria</a> <a href="math-practice-30.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Pr√°tica</a> <a href="math-video-30.html" class="link-video"><i class="fas fa-video"></i> V√≠deo</a> <a href="math-check-30.html" class="link-knowledge"><i class="fas fa-check-double"></i> Verificar</a> </div> </div>
                  </div>
            </section>
        </main>

    </div><!-- /.dashboard-container -->

    <!-- Chat Panel Overlay -->
    <div id="chat-panel-overlay"></div>

    <!-- Chat Panel -->
    <div id="chat-panel">
        <div class="chat-panel-header">
            <h5><i class="fas fa-cat"></i> Gato Assistente (Matem√°tica)</h5>
            <button id="chat-close-button" aria-label="Fechar Chat">&times;</button>
        </div>
        <div id="chatbox" aria-live="polite">
            <!-- Mensagem inicial adicionada dinamicamente -->
        </div>
        <div id="input-area">
            <input id="userInput" type="text" autofocus placeholder="Pergunte ao Gato Assistente...">
            <button id="sendButton" aria-label="Enviar Mensagem"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Floating Chatbot Button -->
    <button id="chatbot-fab" aria-label="Abrir Assistente do Curso">
        <i class="fas fa-comment-dots"></i>
    </button>

    <footer>
        <p>Parte do Projeto Road to Free Open AGI</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Configuration ---
            const KNOWLEDGE_CHECK_STORAGE_KEY = 'mathKnowledgeCheckStatus_v1'; // <<< Different Key!
            const TOTAL_MODULES = 30; // <<< Different Total!

            // --- Data Loading & Saving (LocalStorage) ---
            function loadKnowledgeCheckStatus() {
                try {
                    const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY);
                    const parsed = storedStatus ? JSON.parse(storedStatus) : {};
                    // Basic validation: ensure it's an object
                    return typeof parsed === 'object' && parsed !== null ? parsed : {};
                } catch (e) {
                    console.error("Erro ao ler status KC do localStorage:", e);
                    return {}; // Return empty object on error
                }
            }
            // Note: Saving happens on the knowledge check pages themselves, not here.

            // --- Progress & Certificate Calculation ---
            const knowledgeCheckStatus = loadKnowledgeCheckStatus();

            function calculateOverallCompletion(statusObject) {
                let completedCount = 0;
                // Iterate from module 1 to TOTAL_MODULES
                for (let i = 1; i <= TOTAL_MODULES; i++) {
                    if (statusObject[i] === true) { // Check module IDs 1-30
                        completedCount++;
                    }
                }
                return TOTAL_MODULES > 0 ? Math.round((completedCount / TOTAL_MODULES) * 100) : 0;
            }

            function getCertificateStatus(moduleIds, statusObject) {
                if (!Array.isArray(moduleIds) || moduleIds.length === 0) return 'locked';

                const allComplete = moduleIds.every(id => statusObject[id] === true);
                if (allComplete) return 'earned';

                // Check if *any* module in the list is complete to show 'in progress'
                const anyComplete = moduleIds.some(id => statusObject[id] === true);
                return anyComplete ? 'inprogress' : 'locked';
            }

            // --- UI Update Functions ---
            function updateOverallKCProgress(percentage) {
                const fillElement = document.getElementById('overall-kc-progress-fill');
                const valueElement = document.getElementById('overall-kc-progress-value');
                if (fillElement && valueElement) {
                    fillElement.style.width = `${percentage}%`;
                    valueElement.textContent = `${percentage}%`;
                }
            }

            function updateModuleCardStatus(moduleId, isComplete) {
                const card = document.querySelector(`.module-card[data-module-id="${moduleId}"]`);
                if (card) {
                    card.classList.toggle('knowledge-complete', isComplete);
                }
            }

            function updateCertificateStatusDisplay() {
                const certificateItems = document.querySelectorAll('.certificate-tracker li[data-modules]');
                certificateItems.forEach(item => {
                    const modulesAttr = item.dataset.modules;
                    if (!modulesAttr) return;

                    const moduleIds = modulesAttr.split(',').map(Number);
                    const status = getCertificateStatus(moduleIds, knowledgeCheckStatus);
                    const statusIcon = item.querySelector('.status-icon i');
                    item.dataset.status = status; // Store status for potential styling

                    if(statusIcon){
                        switch(status) {
                            case 'earned':
                                statusIcon.className = 'fas fa-check-circle'; // Green check
                                break;
                            case 'inprogress':
                                statusIcon.className = 'fas fa-spinner fa-spin'; // Spinning icon
                                break;
                            case 'locked':
                            default:
                                statusIcon.className = 'fas fa-lock'; // Lock icon
                                break;
                        }
                    }
                });
            }

            // --- Initial Data Application ---
            function updateDashboardUI() {
                const overallCompletion = calculateOverallCompletion(knowledgeCheckStatus);
                updateOverallKCProgress(overallCompletion);

                // Update status for modules 1 to 30
                for (let i = 1; i <= TOTAL_MODULES; i++) {
                    updateModuleCardStatus(i, knowledgeCheckStatus[i] === true);
                }

                updateCertificateStatusDisplay();
            }


            // --- Staggered Card Animation ---
            const cards = document.querySelectorAll('.module-card');
            cards.forEach((card, index) => {
                const delay = index * 0.05; // Stagger delay
                card.style.animationDelay = `${delay}s`;
                card.classList.add('card-fade-in');
            });

             // --- Sidebar Navigation Highlight on Scroll ---
            const navLinks = document.querySelectorAll('.section-nav a.nav-link');
            const sections = document.querySelectorAll('.module-section');

            if (navLinks.length > 0 && sections.length > 0) {
                const observerOptions = {
                    root: null, // relative to document viewport
                    rootMargin: '-30% 0px -60% 0px', // Adjusted margin to target upper-middle of viewport
                    threshold: 0 // Trigger as soon as any part enters the margin
                };

                let lastActiveLink = null; // Start with null
                let intersectionTimeout; // Debounce timeout

                // Set initial active link for page load at top
                const checkInitialActiveLink = () => {
                    let initialActiveSet = false;
                    if (window.scrollY < 150) { // Check if near the top
                        navLinks.forEach(l => l.classList.remove('active'));
                        if (navLinks[0]) {
                            navLinks[0].classList.add('active');
                            lastActiveLink = navLinks[0];
                            initialActiveSet = true;
                        }
                    }
                     // If not near the top, let the observer determine the active link on initial load
                     return initialActiveSet;
                };

                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.getAttribute('href');
                        const targetSection = document.querySelector(targetId);
                        if (targetSection) {
                             // Adjust offset calculation if you have a sticky header
                             const offset = 20; // px offset from the top
                             const elementPosition = targetSection.getBoundingClientRect().top;
                             const offsetPosition = elementPosition + window.scrollY - offset; // Use scrollY for consistent positioning

                            window.scrollTo({
                                top: offsetPosition,
                                behavior: "smooth"
                            });

                            // Manually set active class after click for immediate feedback
                            navLinks.forEach(l => l.classList.remove('active'));
                            link.classList.add('active');
                            lastActiveLink = link;
                        }
                    });
                });

                const observerCallback = (entries) => {
                    clearTimeout(intersectionTimeout); // Clear previous timeout

                    // Debounce the update to prevent rapid flickering during scroll
                    intersectionTimeout = setTimeout(() => {
                        let latestIntersectingEntry = null;

                        // Find the last entry (visually lowest on screen) that is intersecting
                        // Iterate backwards to prioritize sections lower in the viewport within the rootMargin
                        for (let i = entries.length - 1; i >= 0; i--) {
                            if (entries[i].isIntersecting) {
                                latestIntersectingEntry = entries[i];
                                break; // Found the relevant one
                            }
                        }

                        // Deactivate all links first
                        navLinks.forEach(l => l.classList.remove('active'));

                        if (latestIntersectingEntry) {
                            const correspondingLink = document.querySelector(`.section-nav a[href="#${latestIntersectingEntry.target.id}"]`);
                            if (correspondingLink) {
                                correspondingLink.classList.add('active');
                                lastActiveLink = correspondingLink; // Update last active link
                            }
                        } else if (lastActiveLink) {
                            // If nothing is intersecting, keep the last known active link highlighted
                            // This helps when scrolling quickly between sections
                            lastActiveLink.classList.add('active');
                        } else {
                             // Fallback if nothing is intersecting and no lastActiveLink is set (e.g., initial load not at top)
                             checkInitialActiveLink();
                        }
                    }, 50); // 50ms debounce time
                };

                const observer = new IntersectionObserver(observerCallback, observerOptions);
                sections.forEach(section => {
                    observer.observe(section);
                });

                // Check initial state after setup
                if (!checkInitialActiveLink()) {
                     // Manually trigger check if not at top initially, in case observer hasn't fired yet
                     const initialEntries = [];
                     sections.forEach(section => {
                         initialEntries.push({
                             target: section,
                             isIntersecting: (section.getBoundingClientRect().top < window.innerHeight * 0.7 && section.getBoundingClientRect().bottom > window.innerHeight * 0.3) // Approximate initial check based on margins
                         });
                     });
                     observerCallback(initialEntries);
                 }
            }


            // --- Chat Panel Logic ---
            const chatbotFab = document.getElementById('chatbot-fab');
            const chatPanel = document.getElementById('chat-panel');
            const chatCloseButton = document.getElementById('chat-close-button');
            const chatPanelOverlay = document.getElementById('chat-panel-overlay');
            const chatboxEl = document.getElementById('chatbox');
            const userInputEl = document.getElementById('userInput');
            const sendButtonEl = document.getElementById('sendButton');
            const bodyEl = document.body;

            function openChatPanel() {
                bodyEl.classList.add('chat-open');
                chatbotFab.setAttribute('aria-expanded', 'true');
                userInputEl.focus(); // Focus input when opened
            }

            function closeChatPanel() {
                bodyEl.classList.remove('chat-open');
                chatbotFab.setAttribute('aria-expanded', 'false');
            }

            if (chatbotFab && chatPanel && chatCloseButton && chatPanelOverlay && userInputEl) {
                chatbotFab.addEventListener('click', () => {
                    bodyEl.classList.contains('chat-open') ? closeChatPanel() : openChatPanel();
                });

                chatCloseButton.addEventListener('click', closeChatPanel);
                chatPanelOverlay.addEventListener('click', closeChatPanel);

                // Close chat on Escape key
                document.addEventListener('keydown', (event) => {
                    if (event.key === 'Escape' && bodyEl.classList.contains('chat-open')) {
                        closeChatPanel();
                    }
                });
            }

            // --- Chatbot Messaging Logic ---
            let conversationHistory = []; // Start empty for each page load

            function displayMessage(role, text, isRawText = false) {
                const messageContainer = document.createElement('div');
                messageContainer.classList.add('message-container');

                const avatar = document.createElement('div');
                avatar.classList.add('message-avatar');

                const messageBubble = document.createElement('div');
                messageBubble.classList.add('message');

                if (role === 'user') {
                    messageContainer.classList.add('user-message-container');
                    avatar.innerHTML = '<i class="fas fa-user"></i>';
                    messageBubble.classList.add('user-message');
                    messageBubble.textContent = text; // User text as is
                } else if (role === 'assistant') {
                    messageContainer.classList.add('bot-message-container');
                    avatar.innerHTML = '<i class="fas fa-cat"></i>'; // Bot avatar
                    messageBubble.classList.add('bot-message');
                    // Simple markdown-like handling for newlines
                    (text || '').split('\n').forEach((line, index) => {
                        if (index > 0) messageBubble.appendChild(document.createElement('br'));
                        messageBubble.appendChild(document.createTextNode(line));
                    });
                } else if (role === 'error') {
                    // Special handling for error messages without avatar/container
                    messageBubble.classList.add('error-message');
                    messageBubble.innerHTML = `<strong>Erro:</strong> ${text}`;
                    chatboxEl.appendChild(messageBubble);
                    chatboxEl.scrollTop = chatboxEl.scrollHeight;
                    return; // Don't add container/avatar for errors
                } else if (role === 'typing') {
                    // Special handling for typing indicator
                    const typingDiv = document.createElement('div');
                    typingDiv.classList.add('typing-indicator');
                    typingDiv.innerHTML = `<i class="fas fa-paw"></i> <span>${text}</span> <span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>`;
                    chatboxEl.appendChild(typingDiv);
                    chatboxEl.scrollTop = chatboxEl.scrollHeight;
                    return typingDiv; // Return the element so it can be removed
                }

                messageContainer.appendChild(avatar);
                messageContainer.appendChild(messageBubble);
                chatboxEl.appendChild(messageContainer);

                // Scroll to bottom
                chatboxEl.scrollTop = chatboxEl.scrollHeight;
            }


            async function sendMessage() {
                const userText = userInputEl.value.trim();
                if (!userText) return;

                // Display user message immediately
                displayMessage('user', userText, true);
                conversationHistory.push({ role: "user", content: userText });

                userInputEl.value = ''; // Clear input
                sendButtonEl.disabled = true; // Disable send button

                // Display typing indicator
                const typingIndicator = displayMessage('typing', "Gato Assistente est√° calculando...", true);

                const proxyUrl = '/api/proxy'; // Use the same proxy endpoint
                // <<< Math-focused System Prompt >>>
                const systemPrompt = { role: "system", content: "Voc√™ √© o Gato Assistente, um ajudante IA amig√°vel, fofo e com tema de gato para um curso de Matem√°tica Essencial para TI (Estat√≠stica, Probabilidade, Conjuntos). Voc√™ entende conceitos matem√°ticos, f√≥rmulas b√°sicas, e como eles se aplicam em TI. Responda de forma concisa e clara, como um gato esperto guiando um estudante. Use trocadilhos de gato com modera√ß√£o. Mantenha as respostas focadas e relativamente curtas." };
                const messagesToSend = [systemPrompt, ...conversationHistory];


                try {
                    const response = await fetch(proxyUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            model: "glm-4-flash", // Or your preferred model
                            messages: messagesToSend,
                            temperature: 0.6,
                            max_tokens: 150 // Adjust as needed
                        })
                    });

                     // Remove typing indicator regardless of success/failure
                     if (typingIndicator && typingIndicator.parentNode === chatboxEl) typingIndicator.remove();

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error(`Erro Proxy/API (${response.status}):`, errorText);
                        displayMessage('error', `Miau... desculpe, n√£o consegui conectar (${response.status}).`);
                        // Don't throw here, just display error and let finally run
                    } else {
                        const data = await response.json();

                        if (data.choices?.[0]?.message?.content) {
                            const botText = data.choices[0].message.content.trim();
                            conversationHistory.push({ role: "assistant", content: botText });
                            displayMessage('assistant', botText, true);
                        } else {
                            console.error("Resposta inv√°lida da API:", data);
                            displayMessage('error', "Ronron..desculpe, recebi uma resposta estranha.");
                        }
                    }

                } catch (error) {
                    console.error('Erro no fetch do chat:', error);
                     // Ensure typing indicator is removed if it still exists and hasn't been removed yet
                     if (typingIndicator && typingIndicator.parentNode === chatboxEl) {
                        typingIndicator.remove();
                    }
                    // Avoid displaying generic error if a specific fetch error was already shown
                    if (!document.querySelector('.error-message')) {
                         displayMessage('error', "Grrr! Ocorreu um erro de rede.");
                    }
                } finally {
                    sendButtonEl.disabled = false; // Re-enable send button
                    if(bodyEl.classList.contains('chat-open')) { // Refocus input only if panel is still open
                        userInputEl.focus();
                    }
                }
            }

             if (sendButtonEl && userInputEl) {
                sendButtonEl.addEventListener('click', sendMessage);
                userInputEl.addEventListener('keypress', (event) => {
                    // Send message on Enter key, unless Shift is pressed (for newlines)
                    if (event.key === 'Enter' && !event.shiftKey) {
                        event.preventDefault(); // Prevent default newline behavior
                        sendMessage();
                    }
                });
            }

            function initializeChat() {
                 // <<< Math-focused Initial Greeting >>>
                const initialGreeting = "Miau! Sou o Gato Assistente de Matem√°tica. Pronto para calcular, analisar e desvendar conjuntos com voc√™! Pergunte-me algo sobre Estat√≠stica, Probabilidade ou Conjuntos.";
                conversationHistory = [{ role: "assistant", content: initialGreeting }]; // Reset history
                chatboxEl.innerHTML = ''; // Clear previous messages
                displayMessage('assistant', initialGreeting, true); // Display the greeting
            }


            // --- Final Initialization ---
            updateDashboardUI(); // Apply initial progress/completion status
            initializeChat(); // Set up chat with math greeting


        }); // End DOMContentLoaded
    </script>

</body>
</html>