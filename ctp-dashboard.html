<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Course Dashboard - Complete Python (Road to Free Open AGI)</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --background-sidebar: #ffffff;
            --background-header: linear-gradient(135deg, #0d6efd, #0a58ca);
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --info-color: #0dcaf0;
            --video-color: #fd7e14;
            --check-color: #6f42c1;
            --certificate-color: #d63384;
            --chat-panel-bg: #ffffff;
            --chat-box-bg: #f8f9fa;
            --chat-bot-bg: #e9ecef;
            --chat-bot-text: #343a40;
            --chat-user-bg: #d1e7ff;
            --chat-user-text: #0a58ca;
            --chat-error-bg: #f8d7da;
            --chat-error-text: #842029;
            --chat-border-color: #dee2e6;
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 6px 18px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            --sidebar-width: 260px;
             /* Colors for lang switcher */
             --lang-select-border: var(--certificate-color);
             --lang-select-bg: rgba(255, 255, 255, 0.1);
             --lang-select-bg-hover: rgba(255, 255, 255, 0.15);
             --lang-option-bg: var(--background-card);
             --lang-option-text: var(--text-dark);
             --lang-arrow-color: var(--certificate-color);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            overflow-x: hidden;
        }
        body.chat-open { overflow: hidden; }

        /* --- Animations --- */
        .card-fade-in { opacity: 0; transform: translateY(20px); animation: fadeInAnimation 0.6s ease-out forwards; }
        @keyframes fadeInAnimation { to { opacity: 1; transform: translateY(0); } }

        /* --- Dashboard Header --- */
        .dashboard-header { background: var(--background-header); color: var(--text-light); padding: 2rem 1.5rem 1.5rem 1.5rem; margin-bottom: 2rem; position: relative; }
        .header-content { max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
        .dashboard-header h1 { font-family: var(--font-title); font-size: 2.2rem; margin-bottom: 0.8rem; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2); }
        .progress-area { background-color: rgba(255, 255, 255, 0.1); padding: 1rem 1.5rem; border-radius: var(--border-radius); margin-top: 1.5rem; }
        .progress-area label { display: block; font-size: 0.9rem; font-weight: 500; margin-bottom: 0.5rem; opacity: 0.9; }
        .progress-bar-container { width: calc(100% - 60px); height: 12px; background-color: rgba(0,0,0,0.3); border-radius: 6px; overflow: hidden; display: inline-block; vertical-align: middle; }
        .progress-bar-fill { width: 0%; height: 100%; background: var(--progress-fill); border-radius: 6px; transition: width 0.5s ease-out; position: relative; }
        .progress-percentage { font-size: 1.1rem; font-weight: 700; margin-left: 1rem; vertical-align: middle; display: inline-block; min-width: 45px; text-align: right; }

        /* --- Dashboard Layout --- */
        .dashboard-container { max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; display: flex; gap: 2rem; align-items: flex-start; }

        /* --- Sidebar --- */
        .dashboard-sidebar { width: var(--sidebar-width); flex-shrink: 0; position: sticky; top: 20px; height: calc(100vh - 40px); overflow-y: auto; padding-right: 10px; scrollbar-width: thin; scrollbar-color: var(--secondary-color) var(--background-page); }
        .dashboard-sidebar::-webkit-scrollbar { width: 6px; }
        .dashboard-sidebar::-webkit-scrollbar-track { background: var(--background-page); }
        .dashboard-sidebar::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 3px; }
        .sidebar-widget { background-color: var(--background-sidebar); border-radius: var(--border-radius); padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--card-shadow); border: 1px solid var(--border-color); }
        .sidebar-widget h4 { font-family: var(--font-title); font-size: 1.1rem; margin-bottom: 1rem; color: var(--primary-color); border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; display: flex; align-items: center; }
        .sidebar-widget h4 i { margin-right: 8px; color: var(--primary-color); opacity: 0.8; }
        .sidebar-widget ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-widget li a { display: block; text-decoration: none; color: var(--text-muted); padding: 0.6rem 0.6rem 0.6rem 10px; font-size: 0.95rem; font-weight: 500; border-radius: 4px; transition: all var(--transition-speed) ease; position: relative; }
        .sidebar-widget li a:hover { color: var(--primary-color); background-color: #e7f1ff; }
        .sidebar-widget li a.active { color: var(--primary-color); font-weight: 700; background-color: #ddeeff; }
        .sidebar-widget li a.active::before { content: ''; position: absolute; left: -15px; top: 5px; bottom: 5px; width: 4px; background-color: var(--primary-color); border-radius: 2px; }
        .certificate-tracker ul li { margin-bottom: 0.8rem; display: flex; align-items: center; font-size: 0.9rem; padding: 0.3rem 0;}
        .certificate-tracker .status-icon { width: 25px; text-align: center; margin-right: 8px; font-size: 1.1rem; }
        .certificate-tracker .status-icon .fa-check-circle { color: var(--success-color); }
        .certificate-tracker .status-icon .fa-spinner { color: var(--secondary-color); animation: spin 1.5s linear infinite; }
        .certificate-tracker .status-icon .fa-lock { color: var(--text-muted); opacity: 0.7; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .certificate-tracker .cert-name { flex-grow: 1; font-weight: 500;}
        .certificate-tracker li:hover { background-color: #f8f9fa; border-radius: 4px;}
        .cert-explanation { font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed var(--border-color); line-height: 1.4; }
        .cert-explanation p { margin-bottom: 0.5rem; }
        .cert-explanation strong { color: var(--text-dark); }
        .cert-explanation code { font-size: 0.9em; background: #eee; padding: 1px 4px; border-radius: 3px;}
        .sidebar-links ul li { margin-bottom: 0.5rem; }
        .sidebar-links ul li a { display: inline-flex; align-items: center; padding: 0.5rem 1rem; font-size: 0.9rem; }
        .sidebar-links ul li a i { margin-right: 6px; }
        .sidebar-links .link-main-site { background-color: var(--secondary-color); color: var(--text-light); }
        .sidebar-links .link-main-site:hover { background-color: #5a6268; color: var(--text-light); }
        .sidebar-links .link-certificates { background-color: var(--certificate-color); color: var(--text-light); }
        .sidebar-links .link-certificates:hover { background-color: #b02a6e; color: var(--text-light); }
        /* Language Switcher Styles */
         .language-switcher { margin-top: 1rem; }
         #languageSelect {
            width: 100%;
            background: var(--background-card);
            color: var(--text-dark);
            border: 1px solid var(--lang-select-border);
            border-radius: 5px;
            padding: 8px 35px 8px 15px; /* More padding */
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--certificate-color').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 10px auto;
            transition: border-color 0.3s ease;
         }
         #languageSelect:hover { border-color: #b02a6e; }
         #languageSelect:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); }
         #languageSelect option {
              background: var(--lang-option-bg);
              color: var(--lang-option-text);
              padding: 5px;
         }

        /* --- Main Content Area --- */
        .dashboard-main { flex-grow: 1; min-width: 0; }
        .module-section { margin-bottom: 3rem; }
        .module-section h2 { font-family: var(--font-title); font-size: 1.8rem; color: var(--text-dark); margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-color); scroll-margin-top: 30px; display: flex; align-items: center; }
        .module-section h2 i { margin-right: 10px; color: var(--primary-color); }
        .modules-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }

        /* --- Module Card Styling --- */
        .module-card { background-color: var(--background-card); border-radius: var(--border-radius); box-shadow: var(--card-shadow); transition: all var(--transition-speed) ease-in-out; display: flex; flex-direction: column; border: 1px solid var(--border-color); overflow: hidden; position: relative; opacity: 0; transform: translateY(20px); }
        .module-card.knowledge-complete::after { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; top: 10px; right: 10px; color: var(--success-color); font-size: 1.2rem; background-color: rgba(255, 255, 255, 0.8); padding: 3px 5px; border-radius: 50%; opacity: 0.85; z-index: 2; }
        .module-card:hover { transform: translateY(-5px); box-shadow: var(--card-shadow-hover); }
        .card-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
        .module-card h3 { font-family: var(--font-title); font-size: 1.3rem; color: var(--primary-color); margin-bottom: 0.7rem; line-height: 1.3; }
        .module-card h3 .module-number { color: var(--text-muted); font-weight: 400; font-size: 1rem; margin-right: 6px; display: inline-block; background-color: var(--background-page); padding: 2px 6px; border-radius: 4px; }
        .module-topics { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem; line-height: 1.5; flex-grow: 1; }
        .module-topics code { background-color: #e9ecef; padding: 0.1em 0.4em; border-radius: 3px; font-size: 0.85em; color: #c7254e; }
        .module-topics strong { color: var(--text-dark); font-weight: 500; display: block; margin-top: 0.5rem; font-size: 0.85rem; }
        .module-links { display: flex; flex-wrap: wrap; gap: 0.5rem; padding: 1rem 1.5rem; background-color: #f8f9fa; border-top: 1px solid var(--border-color); margin-top: auto; }
        .module-links a { flex: 1 1 40%; text-decoration: none; color: var(--text-dark); background-color: var(--background-card); padding: 0.5rem 0.7rem; border-radius: 5px; font-size: 0.85rem; font-weight: 500; text-align: center; transition: all var(--transition-speed) ease; border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; min-width: 110px; }
        .module-links a i { margin-right: 5px; width: 1em; opacity: 0.7; }
        .module-links a:hover { transform: scale(1.03); box-shadow: 0 2px 5px rgba(0,0,0,0.08); border-color: currentColor; }
        .module-links a.link-theory { color: var(--secondary-color); }
        .module-links a.link-practice { color: var(--primary-color); }
        .module-links a.link-advanced { color: var(--success-color); }
        .module-links a.link-video { color: var(--video-color); }
        .module-links a.link-knowledge { color: var(--check-color); }

        /* --- Floating Action Button (FAB) --- */
        #chatbot-fab { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: linear-gradient(45deg, var(--primary-color), #0b5ed7); color: white; border: none; border-radius: 50%; font-size: 1.8rem; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); transition: all var(--transition-speed) ease; z-index: 1010; }
        #chatbot-fab:hover { transform: scale(1.1); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25); }
        #chatbot-fab i { transition: transform 0.3s ease; }
        body.chat-open #chatbot-fab { background: linear-gradient(45deg, var(--secondary-color), #5a6268); }
        body.chat-open #chatbot-fab i { transform: rotate(135deg); }

        /* --- Chat Panel Overhaul --- */
        #chat-panel-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); backdrop-filter: blur(2px); opacity: 0; visibility: hidden; transition: opacity var(--transition-speed) ease, visibility 0s var(--transition-speed); z-index: 1000; }
        body.chat-open #chat-panel-overlay { opacity: 1; visibility: visible; transition-delay: 0s; }
        #chat-panel { position: fixed; bottom: 30px; right: 100px; width: 90vw; max-width: 450px; height: 75vh; max-height: 650px; background-color: var(--chat-panel-bg); border-radius: var(--border-radius); box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 1px solid var(--chat-border-color); display: flex; flex-direction: column; z-index: 1005; opacity: 0; transform: translateY(20px) scale(0.98); visibility: hidden; transition: opacity var(--transition-speed) cubic-bezier(0.165, 0.84, 0.44, 1), transform var(--transition-speed) cubic-bezier(0.165, 0.84, 0.44, 1), visibility 0s var(--transition-speed); transform-origin: bottom right; }
        body.chat-open #chat-panel { opacity: 1; transform: translateY(0) scale(1); visibility: visible; transition-delay: 0s; }
        .chat-panel-header { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 1.2rem; border-bottom: 1px solid var(--chat-border-color); background-color: var(--background-page); border-top-left-radius: var(--border-radius); border-top-right-radius: var(--border-radius); }
        .chat-panel-header h5 { margin: 0; font-family: var(--font-title); font-size: 1.1rem; color: var(--primary-color); display: flex; align-items: center; }
        .chat-panel-header h5 i { margin-right: 8px; color: var(--certificate-color); }
        #chat-close-button { background: none; border: none; font-size: 1.5rem; color: var(--text-muted); cursor: pointer; padding: 0.2rem; line-height: 1; transition: color var(--transition-speed); }
        #chat-close-button:hover { color: var(--text-dark); }
        #chatbox { flex-grow: 1; overflow-y: auto; padding: 1.5rem; background-color: var(--chat-box-bg); font-family: var(--font-body); line-height: 1.6; scrollbar-width: thin; scrollbar-color: var(--secondary-color) var(--chat-box-bg); }
        #chatbox::-webkit-scrollbar { width: 6px; }
        #chatbox::-webkit-scrollbar-track { background: var(--chat-box-bg); }
        #chatbox::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 3px; }
        #chatbox .message-container { display: flex; margin-bottom: 1rem; align-items: flex-end; }
        #chatbox .message-avatar { width: 35px; height: 35px; border-radius: 50%; background-color: var(--secondary-color); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0; margin-right: 10px; }
        #chatbox .user-message-container .message-avatar { background-color: var(--chat-user-color); color: white;}
        #chatbox .bot-message-container .message-avatar { background-color: var(--certificate-color); color: white; }
        #chatbox .message { padding: 10px 15px; border-radius: 18px; max-width: 80%; word-wrap: break-word; font-size: 0.95rem; position: relative; border: 1px solid var(--chat-border-color); box-shadow: 0 1px 3px rgba(0,0,0,0.04); }
        #chatbox .user-message-container { justify-content: flex-end; }
        #chatbox .user-message-container .message-avatar { margin-right: 0; margin-left: 10px; order: 2; }
        #chatbox .user-message-container .message { order: 1; }
        #chatbox .user-message { background-color: var(--chat-user-bg); color: var(--chat-user-text); border-color: var(--chat-user-bg); border-top-right-radius: 4px; }
        #chatbox .bot-message { background-color: var(--chat-bot-bg); color: var(--chat-bot-text); border-color: var(--chat-bot-bg); border-top-left-radius: 4px; }
        #chatbox .error-message { background-color: var(--chat-error-bg); color: var(--chat-error-text); border-color: #f5c6cb; margin-bottom: 1rem; }
        #chatbox .message strong { display: none; }
        #chatbox .typing-indicator { display: flex; align-items: center; color: var(--text-muted); font-style: italic; margin-bottom: 1rem; padding: 8px 15px; font-size: 0.9rem; }
        #chatbox .typing-indicator i { margin-right: 8px; color: var(--certificate-color); }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .typing-dot { width: 6px; height: 6px; background-color: var(--text-muted); border-radius: 50%; display: inline-block; margin: 0 2px; animation: bounce 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        #input-area { display: flex; padding: 0.8rem; border-top: 1px solid var(--chat-border-color); background-color: var(--background-page); align-items: center; }
        #userInput { flex-grow: 1; border: 1px solid var(--chat-border-color); border-radius: 18px; padding: 0.7rem 1rem; font-size: 0.95rem; background-color: var(--background-card); color: var(--text-dark); outline: none; transition: border-color var(--transition-speed); resize: none; max-height: 80px; font-family: var(--font-body); }
        #userInput:focus { border-color: var(--primary-color); }
        #sendButton { background-color: var(--primary-color); color: var(--text-light); border: none; border-radius: 50%; width: 40px; height: 40px; margin-left: 0.7rem; padding: 0; cursor: pointer; font-size: 1.1rem; transition: background-color var(--transition-speed); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        #sendButton:hover { background-color: #0b5ed7; }
        #sendButton:disabled { background-color: var(--secondary-color); cursor: not-allowed; opacity: 0.7; }

        /* --- Footer --- */
        footer { text-align: center; padding: 1.5rem; margin-top: 3rem; background-color: var(--background-card); border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }

        /* --- Responsive Design --- */
        @media (max-width: 1200px) { .dashboard-container { padding: 0 1rem; gap: 1.5rem; } :root { --sidebar-width: 240px; } #chat-panel { right: 85px; max-width: 420px;} }
        @media (max-width: 992px) { .dashboard-container { flex-direction: column; } .dashboard-sidebar { width: 100%; position: static; height: auto; overflow-y: visible; padding-right: 0; margin-bottom: 2rem; } .sidebar-widget { padding: 1.2rem; } .sidebar-widget li a.active::before { display: none; } .modules-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); } .module-section h2 { scroll-margin-top: 10px; } #chat-panel { right: 30px; bottom: 90px; max-width: 400px; height: 70vh;} }
        @media (max-width: 768px) { html { font-size: 15px; } .dashboard-header h1 { font-size: 1.8rem; } .progress-bar-container { width: calc(100% - 55px); } .progress-percentage { font-size: 1rem; } .modules-grid { grid-template-columns: 1fr; gap: 1rem; } .card-content { padding: 1.2rem; } .module-links { padding: 0.8rem 1.2rem; } #chat-panel { right: 15px; bottom: 80px; left: 15px; width: auto; max-width: none; height: 65vh; } }
        @media (max-width: 576px) { html { font-size: 14px; } .dashboard-header { padding: 1.5rem 1rem 1rem 1rem; } .dashboard-header h1 { font-size: 1.6rem; } .progress-bar-container { width: calc(100% - 50px); } .progress-percentage { font-size: 0.95rem; } .module-card h3 { font-size: 1.15rem; } .module-topics { font-size: 0.85rem; } .module-links a { flex-basis: 100%; font-size: 0.9rem; padding: 0.6rem; } #chatbot-fab { width: 50px; height: 50px; font-size: 1.5rem; bottom: 20px; right: 20px; } #chat-panel { bottom: 75px; right: 10px; left: 10px; height: 60vh; } #chatbox { padding: 1rem; } #chatbox .message-avatar { width: 30px; height: 30px; font-size: 1rem; } #chatbox .message { font-size: 0.9rem; padding: 8px 12px;} #input-area { padding: 0.6rem; } #userInput { padding: 0.6rem 0.8rem; font-size: 0.9rem; border-radius: 15px;} #sendButton { width: 35px; height: 35px; font-size: 1rem; margin-left: 0.5rem;} }

    </style>
</head>
<body>

    <header class="dashboard-header">
        <div class="header-content">
            <h1 data-translate="dashboard_title">Python Course Dashboard</h1>
            <div class="progress-area">
                <label for="overall-kc-progress" data-translate="kc_progress_label">Knowledge Checks Completed</label>
                <div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="overall-kc-progress-fill" style="width: 0%;"></div>
                    </div>
                    <span class="progress-percentage" id="overall-kc-progress-value">0%</span>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-container">

        <!-- === Sidebar === -->
        <aside class="dashboard-sidebar">
            <!-- Language Switcher Widget -->
            <div class="sidebar-widget">
                <h4><i class="fas fa-language"></i> <span data-translate="widget_lang_title">Language</span></h4>
                 <div class="language-switcher">
                    <select id="languageSelect" data-translate-aria-label="lang_select_aria" aria-label="Select Language">
                        <option value="en" data-translate="lang_en">🇬🇧 English</option>
                        <option value="pt" data-translate="lang_pt">🇧🇷 Português</option>
                        <option value="zh" data-translate="lang_zh">🇨🇳 中文</option>
                    </select>
                </div>
            </div>

            <!-- Navigation Widget -->
            <div class="sidebar-widget">
                <h4><i class="fas fa-compass"></i> <span data-translate="widget_nav_title">Navigate Sections</span></h4>
                <ul class="section-nav">
                    <li><a href="#section-basics" class="nav-link active" data-translate="nav_basics">Basics & I/O</a></li>
                    <li><a href="#section-flow-control" class="nav-link" data-translate="nav_flow">Flow Control</a></li>
                    <li><a href="#section-data-structures" class="nav-link" data-translate="nav_data">Data Structures</a></li>
                    <li><a href="#section-functions" class="nav-link" data-translate="nav_functions">Functions & Scope</a></li>
                    <li><a href="#section-files-errors" class="nav-link" data-translate="nav_files">Files & Errors</a></li>
                    <li><a href="#section-advanced" class="nav-link" data-translate="nav_advanced_section">Advanced & Project</a></li>
                </ul>
            </div>

             <!-- Certificate Tracker Widget -->
            <div class="sidebar-widget certificate-tracker">
                 <h4><i class="fas fa-award"></i> <span data-translate="widget_cert_title">Certificate Status</span></h4>
                 <ul>
                     <li data-modules="0,1,2,3,4"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_basics_name">Basics & I/O</span> </li>
                     <li data-modules="5,6,7,8,9,12,13,14,15"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_flow_name">Flow Control</span> </li>
                     <li data-modules="10,11,20,21,22"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_data_name">Data Structures</span> </li>
                     <li data-modules="16,17,18,19"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_functions_name">Functions</span> </li>
                     <li data-modules="23,24,25"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_files_name">Files & Errors</span> </li>
                     <li data-modules="26,27,28,29,30,31,32"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_advanced_name">Advanced Topics</span> </li>
                     <li data-modules="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name" data-translate="cert_full_name">Full Course</span> </li>
                 </ul>
                 <div class="cert-explanation">
                     <p data-translate="cert_earn_explanation">Complete all <strong>Knowledge Checks</strong> (<i class="fas fa-check-double" style="color:var(--check-color)"></i>) in a section to earn the certificate.</p>
                     <p data-translate="cert_storage_note"><i class="fas fa-exclamation-triangle" style="color: var(--accent-color);"></i> <strong>Note:</strong> Progress uses <code>localStorage</code>. It may be lost if you switch browsers/devices or clear data. Retake KCs to restore.</p>
                 </div>
            </div>

             <!-- Links Widget -->
             <div class="sidebar-widget sidebar-links">
                 <h4><i class="fas fa-link"></i> <span data-translate="widget_links_title">Quick Links</span></h4>
                  <ul>
                    <li><a href="index.html" class="link-main-site"><i class="fas fa-home"></i> <span data-translate="link_main_site">Main Site</span></a></li>
                    <li><a href="certificates.html" class="link-certificates"><i class="fas fa-certificate"></i> <span data-translate="link_certificates">View Certificates Page</span></a></li>
                  </ul>
             </div>
        </aside>

        <!-- === Main Content === -->
        <main class="dashboard-main">
            <!-- Section: Basics & I/O -->
            <section id="section-basics" class="module-section">
                <h2 data-translate="section_basics_title"><i class="fas fa-play-circle"></i> Basics & I/O (Modules 0-4)</h2>
                <div class="modules-grid">
                    <!-- Card 0 -->
                    <div class="module-card card-fade-in" data-module-id="0"> <div class="card-content"> <h3 data-translate="module_0_title"><span class="module-number">0</span> Introduction & Output</h3> <p class="module-topics" data-translate="module_0_topics"><code>print()</code> function, Basic strings, Comments (<code>#</code>). <strong>CT:</strong> Expressing instructions.</p> </div> <div class="module-links"> <a href="ctp-theory-0.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-0.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-0.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-0.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-0.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 1 -->
                    <div class="module-card card-fade-in" data-module-id="1"> <div class="card-content"> <h3 data-translate="module_1_title"><span class="module-number">1</span> Variables & Data Types</h3> <p class="module-topics" data-translate="module_1_topics">Assignment (<code>=</code>), <code>int</code>, <code>float</code>, <code>str</code>, <code>type()</code>. <strong>CT:</strong> Data Representation, Abstraction.</p> </div> <div class="module-links"> <a href="ctp-theory-1.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-1.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-1.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-1.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-1.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 2 -->
                    <div class="module-card card-fade-in" data-module-id="2"> <div class="card-content"> <h3 data-translate="module_2_title"><span class="module-number">2</span> Working with Numbers</h3> <p class="module-topics" data-translate="module_2_topics">Arithmetic Operators (<code>+ - * / // % **</code>), Precedence. <strong>CT:</strong> Algorithmic thinking.</p> </div> <div class="module-links"> <a href="ctp-theory-2.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-2.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-2.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-2.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-2.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 3 -->
                    <div class="module-card card-fade-in" data-module-id="3"> <div class="card-content"> <h3 data-translate="module_3_title"><span class="module-number">3</span> Working with Text</h3> <p class="module-topics" data-translate="module_3_topics">Concatenation (<code>+</code>), multiplication (<code>*</code>), <code>len()</code>, Indexing (<code>[]</code>). <strong>CT:</strong> Data Representation, Pattern Recognition.</p> </div> <div class="module-links"> <a href="ctp-theory-3.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-3.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-3.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-3.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-3.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 4 -->
                    <div class="module-card card-fade-in" data-module-id="4"> <div class="card-content"> <h3 data-translate="module_4_title"><span class="module-number">4</span> Getting User Input</h3> <p class="module-topics" data-translate="module_4_topics"><code>input()</code>, Type conversion: <code>int()</code>, <code>float()</code>, <code>str()</code>. <strong>CT:</strong> Interaction, Handling data.</p> </div> <div class="module-links"> <a href="ctp-theory-4.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-4.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-4.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-4.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-4.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                 </div>
            </section>
            <!-- Section: Flow Control -->
            <section id="section-flow-control" class="module-section">
                <h2 data-translate="section_flow_title"><i class="fas fa-code-branch"></i> Flow Control (Modules 5-9, 12-15)</h2>
                <div class="modules-grid">
                    <!-- Card 5 -->
                    <div class="module-card card-fade-in" data-module-id="5"> <div class="card-content"> <h3 data-translate="module_5_title"><span class="module-number">5</span> Comparisons & Booleans</h3> <p class="module-topics" data-translate="module_5_topics"><code>== != < > <= >=</code>, Boolean type: <code>True</code>, <code>False</code>. <strong>CT:</strong> Logic, Conditions.</p> </div> <div class="module-links"> <a href="ctp-theory-5.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-5.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-5.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-5.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-5.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 6 -->
                      <div class="module-card card-fade-in" data-module-id="6"> <div class="card-content"> <h3 data-translate="module_6_title"><span class="module-number">6</span> Simple Decisions - if</h3> <p class="module-topics" data-translate="module_6_topics"><code>if</code> syntax, Indentation. <strong>CT:</strong> Algorithmic thinking (conditional paths).</p> </div> <div class="module-links"> <a href="ctp-theory-6.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-6.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-6.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-6.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-6.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 7 -->
                     <div class="module-card card-fade-in" data-module-id="7"> <div class="card-content"> <h3 data-translate="module_7_title"><span class="module-number">7</span> Alternatives - else</h3> <p class="module-topics" data-translate="module_7_topics"><code>if</code>/<code>else</code> structure. <strong>CT:</strong> Algorithmic thinking (branching logic).</p> </div> <div class="module-links"> <a href="ctp-theory-7.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-7.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-7.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-7.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-7.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 8 -->
                     <div class="module-card card-fade-in" data-module-id="8"> <div class="card-content"> <h3 data-translate="module_8_title"><span class="module-number">8</span> Multiple Conditions - elif</h3> <p class="module-topics" data-translate="module_8_topics"><code>if</code>/<code>elif</code>/<code>else</code> structure. <strong>CT:</strong> Algorithmic thinking (complex branching).</p> </div> <div class="module-links"> <a href="ctp-theory-8.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-8.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-8.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-8.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-8.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 9 -->
                     <div class="module-card card-fade-in" data-module-id="9"> <div class="card-content"> <h3 data-translate="module_9_title"><span class="module-number">9</span> Combining Conditions</h3> <p class="module-topics" data-translate="module_9_topics">Logical operators: <code>and</code>, <code>or</code>, <code>not</code>. <strong>CT:</strong> Logic, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-9.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-9.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-9.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-9.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-9.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 12 -->
                     <div class="module-card card-fade-in" data-module-id="12"> <div class="card-content"> <h3 data-translate="module_12_title"><span class="module-number">12</span> Loops - Fixed Times</h3> <p class="module-topics" data-translate="module_12_topics"><code>for i in range(n):</code> syntax. <strong>CT:</strong> Iteration, Pattern Recognition.</p> </div> <div class="module-links"> <a href="ctp-theory-12.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-12.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-12.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-12.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-12.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 13 -->
                     <div class="module-card card-fade-in" data-module-id="13"> <div class="card-content"> <h3 data-translate="module_13_title"><span class="module-number">13</span> Loops - Over Data</h3> <p class="module-topics" data-translate="module_13_topics"><code>for item in list:</code>, <code>for char in string:</code>. <strong>CT:</strong> Iteration over data, Abstraction.</p> </div> <div class="module-links"> <a href="ctp-theory-13.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-13.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-13.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-13.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-13.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 14 -->
                     <div class="module-card card-fade-in" data-module-id="14"> <div class="card-content"> <h3 data-translate="module_14_title"><span class="module-number">14</span> Loops - Conditional (while)</h3> <p class="module-topics" data-translate="module_14_topics"><code>while condition:</code> syntax. <strong>CT:</strong> Conditional iteration.</p> </div> <div class="module-links"> <a href="ctp-theory-14.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-14.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-14.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-14.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-14.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 15 -->
                     <div class="module-card card-fade-in" data-module-id="15"> <div class="card-content"> <h3 data-translate="module_15_title"><span class="module-number">15</span> Controlling Loops</h3> <p class="module-topics" data-translate="module_15_topics"><code>break</code>, <code>continue</code>. <strong>CT:</strong> Fine-tuning iteration.</p> </div> <div class="module-links"> <a href="ctp-theory-15.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-15.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-15.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-15.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-15.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                </div>
            </section>
             <!-- Section: Data Structures -->
             <section id="section-data-structures" class="module-section">
                 <h2 data-translate="section_data_title"><i class="fas fa-database"></i> Data Structures (Modules 10-11, 20-22)</h2>
                 <div class="modules-grid">
                     <!-- Card 10 -->
                    <div class="module-card card-fade-in" data-module-id="10"> <div class="card-content"> <h3 data-translate="module_10_title"><span class="module-number">10</span> Introduction to Lists</h3> <p class="module-topics" data-translate="module_10_topics">Creation (<code>[]</code>), Indexing, <code>len()</code>. <strong>CT:</strong> Data Structures, Abstraction.</p> </div> <div class="module-links"> <a href="ctp-theory-10.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-10.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-10.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-10.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-10.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 11 -->
                     <div class="module-card card-fade-in" data-module-id="11"> <div class="card-content"> <h3 data-translate="module_11_title"><span class="module-number">11</span> Modifying Lists</h3> <p class="module-topics" data-translate="module_11_topics"><code>.append()</code>, <code>.insert()</code>, <code>del</code>, <code>.pop()</code>, <code>.remove()</code>, Slicing. <strong>CT:</strong> Data Manipulation, Mutability.</p> </div> <div class="module-links"> <a href="ctp-theory-11.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-11.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-11.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-11.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-11.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 20 -->
                     <div class="module-card card-fade-in" data-module-id="20"> <div class="card-content"> <h3 data-translate="module_20_title"><span class="module-number">20</span> Dictionaries Intro</h3> <p class="module-topics" data-translate="module_20_topics">Creation (<code>{}</code>), Key access, Adding/updating. <strong>CT:</strong> Data Structures, Data Representation.</p> </div> <div class="module-links"> <a href="ctp-theory-20.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-20.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-20.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-20.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-20.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 21 -->
                     <div class="module-card card-fade-in" data-module-id="21"> <div class="card-content"> <h3 data-translate="module_21_title"><span class="module-number">21</span> Working with Dictionaries</h3> <p class="module-topics" data-translate="module_21_topics">Iterating (<code>.keys()</code> etc.), Checking keys (<code>in</code>), Deleting (<code>del</code>). <strong>CT:</strong> Data Manipulation, Algorithms.</p> </div> <div class="module-links"> <a href="ctp-theory-21.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-21.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-21.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-21.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-21.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 22 -->
                     <div class="module-card card-fade-in" data-module-id="22"> <div class="card-content"> <h3 data-translate="module_22_title"><span class="module-number">22</span> Introduction to Tuples</h3> <p class="module-topics" data-translate="module_22_topics">Creation (<code>()</code>), Accessing, Immutability. <strong>CT:</strong> Data Structures, Constraints.</p> </div> <div class="module-links"> <a href="ctp-theory-22.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-22.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-22.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-22.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-22.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                 </div>
             </section>
            <!-- Section: Functions & Scope -->
            <section id="section-functions" class="module-section">
                 <h2 data-translate="section_functions_title"><i class="fas fa-cogs"></i> Functions & Scope (Modules 16-19)</h2>
                  <div class="modules-grid">
                    <!-- Card 16 -->
                    <div class="module-card card-fade-in" data-module-id="16"> <div class="card-content"> <h3 data-translate="module_16_title"><span class="module-number">16</span> Defining Simple Functions</h3> <p class="module-topics" data-translate="module_16_topics"><code>def func():</code> syntax, Calling functions. <strong>CT:</strong> Abstraction, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-16.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-16.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-16.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-16.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-16.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 17 -->
                     <div class="module-card card-fade-in" data-module-id="17"> <div class="card-content"> <h3 data-translate="module_17_title"><span class="module-number">17</span> Function Parameters</h3> <p class="module-topics" data-translate="module_17_topics"><code>def func(param1):</code>, Passing arguments. <strong>CT:</strong> Abstraction, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-17.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-17.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-17.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-17.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-17.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 18 -->
                     <div class="module-card card-fade-in" data-module-id="18"> <div class="card-content"> <h3 data-translate="module_18_title"><span class="module-number">18</span> Function Return Values</h3> <p class="module-topics" data-translate="module_18_topics"><code>return</code> statement. <strong>CT:</strong> Abstraction, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-18.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-18.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-18.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-18.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-18.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                     <!-- Card 19 -->
                     <div class="module-card card-fade-in" data-module-id="19"> <div class="card-content"> <h3 data-translate="module_19_title"><span class="module-number">19</span> Understanding Scope</h3> <p class="module-topics" data-translate="module_19_topics">Local vs Global variables (basic). <strong>CT:</strong> Abstraction, Debugging.</p> </div> <div class="module-links"> <a href="ctp-theory-19.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-19.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-19.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-19.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-19.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                  </div>
            </section>
             <!-- Section: Files & Errors -->
            <section id="section-files-errors" class="module-section">
                 <h2 data-translate="section_files_title"><i class="fas fa-folder-open"></i> Files & Error Handling (Modules 23-25)</h2>
                  <div class="modules-grid">
                    <!-- Card 23 -->
                     <div class="module-card card-fade-in" data-module-id="23"> <div class="card-content"> <h3 data-translate="module_23_title"><span class="module-number">23</span> Reading from Files</h3> <p class="module-topics" data-translate="module_23_topics"><code>open('r')</code>, <code>.read()</code>, <code>.readline()</code>, <code>.readlines()</code>, <code>with</code>. <strong>CT:</strong> I/O, Data Persistence.</p> </div> <div class="module-links"> <a href="ctp-theory-23.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-23.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-23.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-23.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-23.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 24 -->
                     <div class="module-card card-fade-in" data-module-id="24"> <div class="card-content"> <h3 data-translate="module_24_title"><span class="module-number">24</span> Writing to Files</h3> <p class="module-topics" data-translate="module_24_topics"><code>open('w'/'a')</code>, <code>.write()</code>, Newline (<code>\n</code>), <code>with</code>. <strong>CT:</strong> I/O, Data Persistence.</p> </div> <div class="module-links"> <a href="ctp-theory-24.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-24.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-24.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-24.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-24.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 25 -->
                     <div class="module-card card-fade-in" data-module-id="25"> <div class="card-content"> <h3 data-translate="module_25_title"><span class="module-number">25</span> Exception Handling</h3> <p class="module-topics" data-translate="module_25_topics"><code>try...except</code>, Handling specific errors. <strong>CT:</strong> Robustness, Error handling.</p> </div> <div class="module-links"> <a href="ctp-theory-25.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-25.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-25.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-25.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-25.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                  </div>
            </section>
             <!-- Section: Advanced Topics & Project -->
            <section id="section-advanced" class="module-section">
                 <h2 data-translate="section_advanced_title"><i class="fas fa-star"></i> Advanced & Project (Modules 26-32)</h2>
                  <div class="modules-grid">
                     <!-- Card 26 -->
                    <div class="module-card card-fade-in" data-module-id="26"> <div class="card-content"> <h3 data-translate="module_26_title"><span class="module-number">26</span> Importing Modules</h3> <p class="module-topics" data-translate="module_26_topics"><code>import</code>, Using module functions (<code>math</code>, <code>random</code>). <strong>CT:</strong> Abstraction, Reusability.</p> </div> <div class="module-links"> <a href="ctp-theory-26.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-26.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-26.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-26.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-26.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 27 -->
                     <div class="module-card card-fade-in" data-module-id="27"> <div class="card-content"> <h3 data-translate="module_27_title"><span class="module-number">27</span> Algorithms - Searching</h3> <p class="module-topics" data-translate="module_27_topics">Linear search. <strong>CT:</strong> Algorithm Design, Efficiency.</p> </div> <div class="module-links"> <a href="ctp-theory-27.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-27.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-27.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-27.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-27.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 28 -->
                     <div class="module-card card-fade-in" data-module-id="28"> <div class="card-content"> <h3 data-translate="module_28_title"><span class="module-number">28</span> Algorithms - Sorting</h3> <p class="module-topics" data-translate="module_28_topics">Simple sorting (Bubble/Selection). <strong>CT:</strong> Algorithm Design, Comparison.</p> </div> <div class="module-links"> <a href="ctp-theory-28.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-28.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-28.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-28.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-28.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 29 -->
                     <div class="module-card card-fade-in" data-module-id="29"> <div class="card-content"> <h3 data-translate="module_29_title"><span class="module-number">29</span> OOP Intro (Opt)</h3> <p class="module-topics" data-translate="module_29_topics"><code>class</code>, <code>__init__</code>, Instances, Attributes. <strong>CT:</strong> Abstraction, Decomposition, Modeling.</p> </div> <div class="module-links"> <a href="ctp-theory-29.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-29.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-29.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-29.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-29.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 30 -->
                     <div class="module-card card-fade-in" data-module-id="30"> <div class="card-content"> <h3 data-translate="module_30_title"><span class="module-number">30</span> Recursion Intro (Opt)</h3> <p class="module-topics" data-translate="module_30_topics">Self-calling functions, Base case. <strong>CT:</strong> Recursion vs Iteration, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-30.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-30.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-30.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-30.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-30.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 31 -->
                     <div class="module-card card-fade-in" data-module-id="31"> <div class="card-content"> <h3 data-translate="module_31_title"><span class="module-number">31</span> Final Project Prep</h3> <p class="module-topics" data-translate="module_31_topics">Integrating concepts, Problem-solving. <strong>CT:</strong> Decomposition, Abstraction, Design, Evaluation.</p> </div> <div class="module-links"> <a href="ctp-theory-31.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-practice-31.html" class="link-practice"><i class="fas fa-pencil-alt"></i> <span data-translate="link_practice">Practice</span></a> <a href="ctp-advanced-31.html" class="link-advanced"><i class="fas fa-flask"></i> <span data-translate="link_advanced">Advanced</span></a> <a href="ctp-video-31.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-31.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                    <!-- Card 32 -->
                     <div class="module-card card-fade-in" data-module-id="32"> <div class="card-content"> <h3 data-translate="module_32_title"><span class="module-number">32</span> Course Conclusion</h3> <p class="module-topics" data-translate="module_32_topics">Review, Next steps, Further resources.</p> </div> <div class="module-links"> <a href="ctp-theory-32.html" class="link-theory"><i class="fas fa-book-open"></i> <span data-translate="link_theory">Theory</span></a> <a href="ctp-video-32.html" class="link-video"><i class="fas fa-video"></i> <span data-translate="link_video">Video</span></a> <a href="ctp-knowledge-check-32.html" class="link-knowledge"><i class="fas fa-check-double"></i> <span data-translate="link_knowledge">Check</span></a> </div> </div>
                  </div>
            </section>
        </main>

    </div><!-- /.dashboard-container -->

    <!-- Chat Panel Overlay -->
    <div id="chat-panel-overlay"></div>

    <!-- Chat Panel -->
    <div id="chat-panel">
        <div class="chat-panel-header">
            <h5 data-translate="chat_title"><i class="fas fa-cat"></i> Cat Assistant</h5>
            <button id="chat-close-button" data-translate-aria-label="chat_close_button_aria" aria-label="Close Chat">&times;</button>
        </div>
        <div id="chatbox" aria-live="polite">
            <!-- Initial message dynamically added -->
        </div>
        <div id="input-area">
            <input id="userInput" type="text" autofocus data-translate-placeholder="chat_input_placeholder" placeholder="Ask Cat Assistant...">
            <button id="sendButton" data-translate-aria-label="chat_send_button_aria" aria-label="Send Message"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Floating Chatbot Button -->
    <button id="chatbot-fab" data-translate-aria-label="chat_open_button_aria" aria-label="Open Course Assistant">
        <i class="fas fa-comment-dots"></i>
    </button>

    <footer>
        <p data-translate="footer_text">Part of the Road to Free Open AGI Project</p>
    </footer>

    <script>
        // --- Translations Object ---
        const translations = {
             en: { /* ... English keys ... */
                 "page_title": "Course Dashboard - Complete Python (Road to Free Open AGI)", "dashboard_title": "Python Course Dashboard", "kc_progress_label": "Knowledge Checks Completed", "widget_nav_title": "Navigate Sections", "nav_basics": "Basics & I/O", "nav_flow": "Flow Control", "nav_data": "Data Structures", "nav_functions": "Functions & Scope", "nav_files": "Files & Errors", "nav_advanced_section": "Advanced & Project", "widget_cert_title": "Certificate Status", "cert_basics_name": "Basics & I/O", "cert_flow_name": "Flow Control", "cert_data_name": "Data Structures", "cert_functions_name": "Functions", "cert_files_name": "Files & Errors", "cert_advanced_name": "Advanced Topics", "cert_full_name": "Full Course", "cert_earn_explanation": "Complete all <strong>Knowledge Checks</strong> (<i class=\"fas fa-check-double\" style=\"color:var(--check-color)\"></i>) in a section to earn the certificate.", "cert_storage_note": "<i class=\"fas fa-exclamation-triangle\" style=\"color: var(--accent-color);\"></i> <strong>Note:</strong> Progress uses <code>localStorage</code>. It may be lost if you switch browsers/devices or clear data. Retake KCs to restore.", "widget_links_title": "Quick Links", "link_main_site": "Main Site", "link_certificates": "View Certificates Page", "section_basics_title": "Basics & I/O (Modules 0-4)", "section_flow_title": "Flow Control (Modules 5-9, 12-15)", "section_data_title": "Data Structures (Modules 10-11, 20-22)", "section_functions_title": "Functions & Scope (Modules 16-19)", "section_files_title": "Files & Error Handling (Modules 23-25)", "section_advanced_title": "Advanced & Project (Modules 26-32)", "module_0_title": "Introduction & Output", "module_0_topics": "<code>print()</code> function, Basic strings, Comments (<code>#</code>). <strong>CT:</strong> Expressing instructions.", "module_1_title": "Variables & Data Types", "module_1_topics": "Assignment (<code>=</code>), <code>int</code>, <code>float</code>, <code>str</code>, <code>type()</code>. <strong>CT:</strong> Data Representation, Abstraction.", "module_2_title": "Working with Numbers", "module_2_topics": "Arithmetic Operators (<code>+ - * / // % **</code>), Precedence. <strong>CT:</strong> Algorithmic thinking.", "module_3_title": "Working with Text", "module_3_topics": "Concatenation (<code>+</code>), multiplication (<code>*</code>), <code>len()</code>, Indexing (<code>[]</code>). <strong>CT:</strong> Data Representation, Pattern Recognition.", "module_4_title": "Getting User Input", "module_4_topics": "<code>input()</code>, Type conversion: <code>int()</code>, <code>float()</code>, <code>str()</code>. <strong>CT:</strong> Interaction, Handling data.", "module_5_title": "Comparisons & Booleans", "module_5_topics": "<code>== != < > <= >=</code>, Boolean type: <code>True</code>, <code>False</code>. <strong>CT:</strong> Logic, Conditions.", "module_6_title": "Simple Decisions - if", "module_6_topics": "<code>if</code> syntax, Indentation. <strong>CT:</strong> Algorithmic thinking (conditional paths).", "module_7_title": "Alternatives - else", "module_7_topics": "<code>if</code>/<code>else</code> structure. <strong>CT:</strong> Algorithmic thinking (branching logic).", "module_8_title": "Multiple Conditions - elif", "module_8_topics": "<code>if</code>/<code>elif</code>/<code>else</code> structure. <strong>CT:</strong> Algorithmic thinking (complex branching).", "module_9_title": "Combining Conditions", "module_9_topics": "Logical operators: <code>and</code>, <code>or</code>, <code>not</code>. <strong>CT:</strong> Logic, Decomposition.", "module_10_title": "Introduction to Lists", "module_10_topics": "Creation (<code>[]</code>), Indexing, <code>len()</code>. <strong>CT:</strong> Data Structures, Abstraction.", "module_11_title": "Modifying Lists", "module_11_topics": "<code>.append()</code>, <code>.insert()</code>, <code>del</code>, <code>.pop()</code>, <code>.remove()</code>, Slicing. <strong>CT:</strong> Data Manipulation, Mutability.", "module_12_title": "Loops - Fixed Times", "module_12_topics": "<code>for i in range(n):</code> syntax. <strong>CT:</strong> Iteration, Pattern Recognition.", "module_13_title": "Loops - Over Data", "module_13_topics": "<code>for item in list:</code>, <code>for char in string:</code>. <strong>CT:</strong> Iteration over data, Abstraction.", "module_14_title": "Loops - Conditional (while)", "module_14_topics": "<code>while condition:</code> syntax. <strong>CT:</strong> Conditional iteration.", "module_15_title": "Controlling Loops", "module_15_topics": "<code>break</code>, <code>continue</code>. <strong>CT:</strong> Fine-tuning iteration.", "module_16_title": "Defining Simple Functions", "module_16_topics": "<code>def func():</code> syntax, Calling functions. <strong>CT:</strong> Abstraction, Decomposition.", "module_17_title": "Function Parameters", "module_17_topics": "<code>def func(param1):</code>, Passing arguments. <strong>CT:</strong> Abstraction, Decomposition.", "module_18_title": "Function Return Values", "module_18_topics": "<code>return</code> statement. <strong>CT:</strong> Abstraction, Decomposition.", "module_19_title": "Understanding Scope", "module_19_topics": "Local vs Global variables (basic). <strong>CT:</strong> Abstraction, Debugging.", "module_20_title": "Dictionaries Intro", "module_20_topics": "Creation (<code>{}</code>), Key access, Adding/updating. <strong>CT:</strong> Data Structures, Data Representation.", "module_21_title": "Working with Dictionaries", "module_21_topics": "Iterating (<code>.keys()</code> etc.), Checking keys (<code>in</code>), Deleting (<code>del</code>). <strong>CT:</strong> Data Manipulation, Algorithms.", "module_22_title": "Introduction to Tuples", "module_22_topics": "Creation (<code>()</code>), Accessing, Immutability. <strong>CT:</strong> Data Structures, Constraints.", "module_23_title": "Reading from Files", "module_23_topics": "<code>open('r')</code>, <code>.read()</code>, <code>.readline()</code>, <code>.readlines()</code>, <code>with</code>. <strong>CT:</strong> I/O, Data Persistence.", "module_24_title": "Writing to Files", "module_24_topics": "<code>open('w'/'a')</code>, <code>.write()</code>, Newline (<code>\\n</code>), <code>with</code>. <strong>CT:</strong> I/O, Data Persistence.", "module_25_title": "Exception Handling", "module_25_topics": "<code>try...except</code>, Handling specific errors. <strong>CT:</strong> Robustness, Error handling.", "module_26_title": "Importing Modules", "module_26_topics": "<code>import</code>, Using module functions (<code>math</code>, <code>random</code>). <strong>CT:</strong> Abstraction, Reusability.", "module_27_title": "Algorithms - Searching", "module_27_topics": "Linear search. <strong>CT:</strong> Algorithm Design, Efficiency.", "module_28_title": "Algorithms - Sorting", "module_28_topics": "Simple sorting (Bubble/Selection). <strong>CT:</strong> Algorithm Design, Comparison.", "module_29_title": "OOP Intro (Opt)", "module_29_topics": "<code>class</code>, <code>__init__</code>, Instances, Attributes. <strong>CT:</strong> Abstraction, Decomposition, Modeling.", "module_30_title": "Recursion Intro (Opt)", "module_30_topics": "Self-calling functions, Base case. <strong>CT:</strong> Recursion vs Iteration, Decomposition.", "module_31_title": "Final Project Prep", "module_31_topics": "Integrating concepts, Problem-solving. <strong>CT:</strong> Decomposition, Abstraction, Design, Evaluation.", "module_32_title": "Course Conclusion", "module_32_topics": "Review, Next steps, Further resources.", "link_theory": "Theory", "link_practice": "Practice", "link_advanced": "Advanced", "link_video": "Video", "link_knowledge": "Check", "widget_lang_title": "Language", "lang_select_aria": "Select Language", "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文", "chat_title": "Cat Assistant", "chat_initial_greeting": "Meow! I'm Cat Assistant, ready to help with Python & Computational Thinking. Ask me anything!", "chat_typing_indicator": "Cat Assistant is pondering", "chat_input_placeholder": "Ask Cat Assistant...", "chat_error_fetch": "Meow... sorry, couldn't connect ({status}).", "chat_error_generic": "Hiss! A network error occurred.", "chat_error_invalid_response": "Purr..don me, I received a strange response.", "chat_system_prompt": "You are Cat Assistant, a friendly, cute, and helpful cat-themed AI assistant for a Python programming and Computational Thinking course. You know a lot about Python syntax, concepts like loops, functions, data structures, and Computational Thinking principles (like decomposition, pattern recognition, abstraction, algorithms). Respond concisely and clearly, like a helpful cat guiding a student. Use cat puns sparingly and appropriately. Keep answers focused and relatively short.", "chat_close_button_aria": "Close Chat", "chat_send_button_aria": "Send Message", "chat_open_button_aria": "Open Course Assistant", "footer_text": "Part of the Road to Free Open AGI Project"
             },
             pt: { /* ... Portuguese keys ... */
                 "page_title": "Painel do Curso - Python Completo (Road to Free Open AGI)", "dashboard_title": "Painel do Curso de Python", "kc_progress_label": "Verificações de Conhecimento Concluídas", "widget_nav_title": "Navegar Seções", "nav_basics": "Básico & I/O", "nav_flow": "Controle de Fluxo", "nav_data": "Estruturas de Dados", "nav_functions": "Funções & Escopo", "nav_files": "Arquivos & Erros", "nav_advanced_section": "Avançado & Projeto", "widget_cert_title": "Status dos Certificados", "cert_basics_name": "Básico & I/O", "cert_flow_name": "Controle de Fluxo", "cert_data_name": "Estruturas de Dados", "cert_functions_name": "Funções", "cert_files_name": "Arquivos & Erros", "cert_advanced_name": "Tópicos Avançados", "cert_full_name": "Curso Completo", "cert_earn_explanation": "Complete todas as <strong>Verificações de Conhecimento</strong> (<i class=\"fas fa-check-double\" style=\"color:var(--check-color)\"></i>) em uma seção para ganhar o certificado.", "cert_storage_note": "<i class=\"fas fa-exclamation-triangle\" style=\"color: var(--accent-color);\"></i> <strong>Nota:</strong> O progresso usa <code>localStorage</code>. Pode ser perdido ao trocar de navegador/dispositivo ou limpar dados. Refaça as Verificações para restaurar.", "widget_links_title": "Links Rápidos", "link_main_site": "Site Principal", "link_certificates": "Ver Página de Certificados", "section_basics_title": "Básico & I/O (Módulos 0-4)", "section_flow_title": "Controle de Fluxo (Módulos 5-9, 12-15)", "section_data_title": "Estruturas de Dados (Módulos 10-11, 20-22)", "section_functions_title": "Funções & Escopo (Módulos 16-19)", "section_files_title": "Arquivos & Tratamento de Erros (Módulos 23-25)", "section_advanced_title": "Avançado & Projeto (Módulos 26-32)", "module_0_title": "Introdução & Saída Básica", "module_0_topics": "Função <code>print()</code>, Strings básicas, Comentários (<code>#</code>). <strong>PC:</strong> Expressando instruções.", "module_1_title": "Variáveis & Tipos de Dados Básicos", "module_1_topics": "Atribuição (<code>=</code>), Tipos: <code>int</code>, <code>float</code>, <code>str</code>, Função <code>type()</code>. <strong>PC:</strong> Representação de Dados, Abstração.", "module_2_title": "Trabalhando com Números", "module_2_topics": "Operadores Aritméticos (<code>+ - * / // % **</code>), Precedência. <strong>PC:</strong> Pensamento algorítmico.", "module_3_title": "Trabalhando com Texto", "module_3_topics": "Concatenação (<code>+</code>), multiplicação (<code>*</code>), <code>len()</code>, Indexação básica (<code>[]</code>). <strong>PC:</strong> Representação de Dados, Reconhecimento de Padrões.", "module_4_title": "Obtendo Entrada do Usuário", "module_4_topics": "Função <code>input()</code>, Conversão de tipo: <code>int()</code>, <code>float()</code>, <code>str()</code>. <strong>PC:</strong> Interação, Manipulação de dados.", "module_5_title": "Fazendo Comparações", "module_5_topics": "Operadores de comparação: <code>== != < > <= >=</code>, Tipo booleano: <code>True</code>, <code>False</code>. <strong>PC:</strong> Lógica, Pensamento condicional.", "module_6_title": "Decisões Simples - if", "module_6_topics": "Sintaxe <code>if</code>, Indentação. <strong>PC:</strong> Pensamento algorítmico (caminhos condicionais).", "module_7_title": "Lidando com Alternativas - else", "module_7_topics": "Estrutura <code>if</code>/<code>else</code>. <strong>PC:</strong> Pensamento algorítmico (lógica de ramificação).", "module_8_title": "Múltiplas Condições - elif", "module_8_topics": "Estrutura <code>if</code>/<code>elif</code>/<code>else</code>. <strong>PC:</strong> Pensamento algorítmico (ramificação complexa).", "module_9_title": "Combinando Condições", "module_9_topics": "Operadores lógicos: <code>and</code>, <code>or</code>, <code>not</code>. <strong>PC:</strong> Lógica, Decomposição.", "module_10_title": "Introdução a Listas", "module_10_topics": "Criação (<code>[]</code>), Acesso por índice, <code>len()</code> com listas. <strong>PC:</strong> Estruturas de Dados, Abstração.", "module_11_title": "Modificando Listas", "module_11_topics": "Métodos: <code>.append()</code>, <code>.insert()</code>, Deleção: <code>del</code>, <code>.pop()</code>, <code>.remove()</code>, Fatiamento básico. <strong>PC:</strong> Manipulação de Dados, Mutabilidade.", "module_12_title": "Loops - Vezes Fixas", "module_12_topics": "Sintaxe <code>for i in range(n):</code>. <strong>PC:</strong> Iteração, Reconhecimento de Padrões.", "module_13_title": "Loops - Sobre Dados", "module_13_topics": "<code>for item in lista:</code>, <code>for char in string:</code>. <strong>PC:</strong> Iteração sobre dados, Abstração.", "module_14_title": "Loops - Condicionais (while)", "module_14_topics": "Sintaxe <code>while condição:</code>. <strong>PC:</strong> Iteração condicional.", "module_15_title": "Controlando Loops", "module_15_topics": "Instruções <code>break</code>, <code>continue</code>. <strong>PC:</strong> Ajuste fino da iteração.", "module_16_title": "Definindo Funções Simples", "module_16_topics": "Sintaxe <code>def func():</code>, Chamando funções. <strong>PC:</strong> Abstração, Decomposição.", "module_17_title": "Parâmetros de Função", "module_17_topics": "<code>def func(param1):</code>, Passando argumentos. <strong>PC:</strong> Abstração, Decomposição.", "module_18_title": "Valores de Retorno de Função", "module_18_topics": "Instrução <code>return</code>. <strong>PC:</strong> Abstração, Decomposição.", "module_19_title": "Entendendo Escopo", "module_19_topics": "Variáveis locais vs globais (básico). <strong>PC:</strong> Abstração, Depuração.", "module_20_title": "Introdução a Dicionários", "module_20_topics": "Criação (<code>{}</code>), Acesso por chave, Adicionando/atualizando pares. <strong>PC:</strong> Estruturas de Dados, Representação de Dados.", "module_21_title": "Trabalhando com Dicionários", "module_21_topics": "Iterando (<code>.keys()</code> etc.), Verificando chaves (<code>in</code>), Deletando (<code>del</code>). <strong>PC:</strong> Manipulação de Dados, Algoritmos.", "module_22_title": "Introdução a Tuplas", "module_22_topics": "Criação (<code>()</code>), Acesso, Imutabilidade. <strong>PC:</strong> Estruturas de Dados, Restrições.", "module_23_title": "Lendo de Arquivos", "module_23_topics": "<code>open('r')</code>, <code>.read()</code>, <code>.readline()</code>, <code>.readlines()</code>, <code>with</code>. <strong>PC:</strong> E/S, Persistência de Dados.", "module_24_title": "Escrevendo em Arquivos", "module_24_topics": "<code>open('w'/'a')</code>, <code>.write()</code>, Nova linha (<code>\\n</code>), <code>with</code>. <strong>PC:</strong> E/S, Persistência de Dados.", "module_25_title": "Tratamento de Exceções", "module_25_topics": "Blocos <code>try...except</code>, Tratando exceções específicas. <strong>PC:</strong> Robustez, Tratamento de erros.", "module_26_title": "Importando Módulos", "module_26_topics": "<code>import</code>, Usando funções de módulos (<code>math</code>, <code>random</code>). <strong>PC:</strong> Abstração, Reusabilidade.", "module_27_title": "Algoritmos - Busca", "module_27_topics": "Busca linear. <strong>PC:</strong> Design de Algoritmos, Eficiência.", "module_28_title": "Algoritmos - Ordenação", "module_28_topics": "Ordenação simples (Bubble/Selection). <strong>PC:</strong> Design de Algoritmos, Comparação.", "module_29_title": "Intro POO (Opc)", "module_29_topics": "<code>class</code>, <code>__init__</code>, Instâncias, Atributos. <strong>PC:</strong> Abstração, Decomposição, Modelagem.", "module_30_title": "Intro Recursão (Opc)", "module_30_topics": "Funções chamando a si mesmas, Caso base. <strong>PC:</strong> Recursão vs Iteração, Decomposição.", "module_31_title": "Prep Projeto Final", "module_31_topics": "Integrando conceitos, Resolução de problemas. <strong>PC:</strong> Decomposição, Abstração, Design, Avaliação.", "module_32_title": "Conclusão do Curso", "module_32_topics": "Revisão, Próximos passos, Recursos adicionais.", "link_theory": "Teoria", "link_practice": "Prática", "link_advanced": "Avançado", "link_video": "Vídeo", "link_knowledge": "Verificar", "widget_lang_title": "Idioma", "lang_select_aria": "Selecionar Idioma", "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文", "chat_title": "Gato Assistente", "chat_initial_greeting": "Miau! Sou o Gato Assistente, pronto para ajudar com Python e Pensamento Computacional. Pergunte-me qualquer coisa!", "chat_typing_indicator": "Gato Assistente está pensando", "chat_input_placeholder": "Pergunte ao Gato Assistente...", "chat_error_fetch": "Miau... desculpe, não consegui conectar ({status}).", "chat_error_generic": "Grrr! Ocorreu um erro de rede.", "chat_error_invalid_response": "Ronron..desculpe, recebi uma resposta estranha.", "chat_system_prompt": "Você é o Gato Assistente, um assistente IA amigável, fofo e prestativo com tema de gato para um curso de programação Python e Pensamento Computacional. Você sabe muito sobre sintaxe Python, conceitos como loops, funções, estruturas de dados e princípios de Pensamento Computacional (como decomposição, reconhecimento de padrões, abstração, algoritmos). Responda de forma concisa e clara, como um gato prestativo guiando um aluno. Use trocadilhos de gato com moderação e apropriadamente. Mantenha as respostas focadas e relativamente curtas.", "chat_close_button_aria": "Fechar Chat", "chat_send_button_aria": "Enviar Mensagem", "chat_open_button_aria": "Abrir Assistente do Curso", "footer_text": "Parte do Projeto Road to Free Open AGI"
             },
             zh: { /* ... Chinese keys ... */
                 "page_title": "课程仪表板 - Python 完全指南 (通往自由开放AGI之路)", "dashboard_title": "Python 课程仪表板", "kc_progress_label": "知识测验完成度", "widget_nav_title": "导航至章节", "nav_basics": "基础与 I/O", "nav_flow": "流程控制", "nav_data": "数据结构", "nav_functions": "函数与作用域", "nav_files": "文件与错误", "nav_advanced_section": "高级与项目", "widget_cert_title": "证书状态", "cert_basics_name": "基础与 I/O", "cert_flow_name": "流程控制", "cert_data_name": "数据结构", "cert_functions_name": "函数", "cert_files_name": "文件与错误", "cert_advanced_name": "高级主题", "cert_full_name": "完整课程", "cert_earn_explanation": "完成章节内<strong>所有</strong>知识测验 (<i class=\"fas fa-check-double\" style=\"color:var(--check-color)\"></i>) 以获得证书。", "cert_storage_note": "<i class=\"fas fa-exclamation-triangle\" style=\"color: var(--accent-color);\"></i> <strong>注意:</strong> 进度使用 <code>localStorage</code> 存储。切换浏览器/设备或清除数据可能会丢失进度。重新完成知识测验即可恢复。", "widget_links_title": "快速链接", "link_main_site": "主网站", "link_certificates": "查看证书页面", "section_basics_title": "基础与 I/O (模块 0-4)", "section_flow_title": "流程控制 (模块 5-9, 12-15)", "section_data_title": "数据结构 (模块 10-11, 20-22)", "section_functions_title": "函数与作用域 (模块 16-19)", "section_files_title": "文件与错误处理 (模块 23-25)", "section_advanced_title": "高级与项目 (模块 26-32)", "module_0_title": "简介与基本输出", "module_0_topics": "<code>print()</code> 函数, 基本字符串, 注释 (<code>#</code>)。<strong>CT:</strong> 表达指令。", "module_1_title": "变量与基本数据类型", "module_1_topics": "赋值 (<code>=</code>), 数据类型: <code>int</code>, <code>float</code>, <code>str</code>, <code>type()</code> 函数。<strong>CT:</strong> 数据表示, 抽象。", "module_2_title": "处理数字", "module_2_topics": "算术运算符 (<code>+ - * / // % **</code>), 运算符优先级。<strong>CT:</strong> 算法思维。", "module_3_title": "处理文本", "module_3_topics": "字符串连接 (<code>+</code>), 乘法 (<code>*</code>), <code>len()</code>, 基本索引 (<code>[]</code>)。<strong>CT:</strong> 数据表示, 模式识别。", "module_4_title": "获取用户输入", "module_4_topics": "<code>input()</code> 函数, 类型转换: <code>int()</code>, <code>float()</code>, <code>str()</code>。<strong>CT:</strong> 交互, 处理数据。", "module_5_title": "进行比较", "module_5_topics": "比较运算符: <code>== != < > <= >=</code>, 布尔类型: <code>True</code>, <code>False</code>。<strong>CT:</strong> 逻辑, 条件思维。", "module_6_title": "简单决策 - if", "module_6_topics": "<code>if</code> 语句语法, 缩进。<strong>CT:</strong> 算法思维 (条件路径)。", "module_7_title": "处理替代方案 - else", "module_7_topics": "<code>if</code>/<code>else</code> 结构。<strong>CT:</strong> 算法思维 (分支逻辑)。", "module_8_title": "多重条件 - elif", "module_8_topics": "<code>if</code>/<code>elif</code>/<code>else</code> 结构。<strong>CT:</strong> 算法思维 (复杂分支)。", "module_9_title": "组合条件", "module_9_topics": "逻辑运算符: <code>and</code>, <code>or</code>, <code>not</code>。<strong>CT:</strong> 逻辑, 分解。", "module_10_title": "列表简介", "module_10_topics": "列表创建 (<code>[]</code>), 按索引访问元素, <code>len()</code> 用于列表。<strong>CT:</strong> 数据结构, 抽象。", "module_11_title": "修改列表", "module_11_topics": "列表方法: <code>.append()</code>, <code>.insert()</code>, 删除: <code>del</code>, <code>.pop()</code>, <code>.remove()</code>, 基本切片。<strong>CT:</strong> 数据操作, 可变性。", "module_12_title": "循环 - 固定次数", "module_12_topics": "<code>for i in range(n):</code> 语法。<strong>CT:</strong> 迭代, 模式识别。", "module_13_title": "循环 - 遍历数据", "module_13_topics": "<code>for item in my_list:</code>, <code>for char in my_string:</code>。<strong>CT:</strong> 数据迭代, 抽象。", "module_14_title": "循环 - 条件 (while)", "module_14_topics": "<code>while condition:</code> 语法。<strong>CT:</strong> 条件迭代。", "module_15_title": "控制循环", "module_15_topics": "<code>break</code> 语句, <code>continue</code> 语句。<strong>CT:</strong> 微调迭代。", "module_16_title": "定义简单函数", "module_16_topics": "<code>def func():</code> 语法, 调用函数。<strong>CT:</strong> 抽象, 分解。", "module_17_title": "函数参数", "module_17_topics": "<code>def func(param1):</code>, 传递参数。<strong>CT:</strong> 抽象, 分解。", "module_18_title": "函数返回值", "module_18_topics": "<code>return</code> 语句。<strong>CT:</strong> 抽象, 分解。", "module_19_title": "理解作用域", "module_19_topics": "局部变量 vs 全局变量 (基本)。<strong>CT:</strong> 抽象, 调试。", "module_20_title": "字典简介", "module_20_topics": "创建 (<code>{}</code>), 按键访问, 添加/更新键值对。<strong>CT:</strong> 数据结构, 数据表示。", "module_21_title": "使用字典", "module_21_topics": "迭代 (<code>.keys()</code> 等), 检查键 (<code>in</code>), 删除 (<code>del</code>)。<strong>CT:</strong> 数据操作, 算法。", "module_22_title": "元组简介", "module_22_topics": "创建 (<code>()</code>), 访问, 不可变性。<strong>CT:</strong> 数据结构, 约束。", "module_23_title": "从文件读取", "module_23_topics": "<code>open('r')</code>, <code>.read()</code>, <code>.readline()</code>, <code>.readlines()</code>, <code>with</code>。<strong>CT:</strong> 输入/输出, 数据持久化。", "module_24_title": "写入文件", "module_24_topics": "<code>open('w'/'a')</code>, <code>.write()</code>, 换行符 (<code>\\n</code>), <code>with</code>。<strong>CT:</strong> 输入/输出, 数据持久化。", "module_25_title": "异常处理", "module_25_topics": "<code>try...except</code> 块, 处理特定异常。<strong>CT:</strong> 健壮性, 错误处理。", "module_26_title": "导入模块", "module_26_topics": "<code>import</code>, 使用模块函数 (<code>math</code>, <code>random</code>)。<strong>CT:</strong> 抽象, 可重用性。", "module_27_title": "算法 - 搜索", "module_27_topics": "线性搜索。<strong>CT:</strong> 算法设计, 效率。", "module_28_title": "算法 - 排序", "module_28_topics": "简单排序 (冒泡/选择)。<strong>CT:</strong> 算法设计, 比较。", "module_29_title": "面向对象简介 (选)", "module_29_topics": "<code>class</code>, <code>__init__</code>, 实例, 属性。<strong>CT:</strong> 抽象, 分解, 建模。", "module_30_title": "递归简介 (选)", "module_30_topics": "函数自调用, 基准情况。<strong>CT:</strong> 递归 vs 迭代, 分解。", "module_31_title": "最终项目准备", "module_31_topics": "整合概念, 问题解决。<strong>CT:</strong> 分解, 抽象, 设计, 评估。", "module_32_title": "课程总结", "module_32_topics": "复习, 后续步骤, 更多资源。", "link_theory": "理论", "link_practice": "练习", "link_advanced": "高级", "link_video": "视频", "link_knowledge": "测验", "widget_lang_title": "语言", "lang_select_aria": "选择语言", "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文", "chat_title": "猫咪助手", "chat_initial_greeting": "喵！我是猫咪助手，随时准备帮助你学习 Python 和计算思维。随便问！", "chat_typing_indicator": "猫咪助手正在思考中", "chat_input_placeholder": "询问猫咪助手...", "chat_error_fetch": "喵呜...抱歉，无法连接 ({status})。", "chat_error_generic": "嘶！发生了网络错误。", "chat_error_invalid_response": "呜喵..不好意思，我收到了奇怪的回应。", "chat_system_prompt": "你是猫咪助手，一个友好、可爱、乐于助人的猫主题 AI 助手，用于 Python 编程和计算思维课程。你非常了解 Python 语法、循环、函数、数据结构等概念，以及计算思维原则（如分解、模式识别、抽象、算法）。像一只乐于助人的猫指导学生一样，简洁明了地回答问题。适度且恰当地使用猫咪相关的俏皮话。保持回答重点突出且相对简短。", "chat_close_button_aria": "关闭聊天", "chat_send_button_aria": "发送消息", "chat_open_button_aria": "打开课程助手", "footer_text": "通往自由开放AGI之路项目的一部分"
             }
         };

        // --- Rest of the JavaScript (Keep exactly the same as the previous version) ---
        document.addEventListener('DOMContentLoaded', () => {

            const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
            const TOTAL_MODULES = 33;
            const LANGUAGE_STORAGE_KEY = 'userLanguage'; // Key for storing language

            // --- Data Loading & Saving (LocalStorage) ---
            function loadKnowledgeCheckStatus() { try { const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY); const parsed = storedStatus ? JSON.parse(storedStatus) : {}; return typeof parsed === 'object' && parsed !== null ? parsed : {}; } catch (e) { console.error("Error reading KC status from localStorage:", e); return {}; } }

            // --- Progress & Certificate Calculation ---
            const knowledgeCheckStatus = loadKnowledgeCheckStatus();
            function calculateOverallCompletion(statusObject) { let completedCount = 0; for (let i = 0; i < TOTAL_MODULES; i++) { if (statusObject[i] === true) completedCount++; } return TOTAL_MODULES > 0 ? Math.round((completedCount / TOTAL_MODULES) * 100) : 0; }
            function getCertificateStatus(moduleIds, statusObject) { if (!Array.isArray(moduleIds) || moduleIds.length === 0) return 'locked'; const allComplete = moduleIds.every(id => statusObject[id] === true); if (allComplete) return 'earned'; const anyComplete = moduleIds.some(id => statusObject[id] === true); return anyComplete ? 'inprogress' : 'locked'; }

            // --- Translation Functions ---
            function getStoredLanguage() {
                const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY);
                if (storedLang && translations[storedLang]) return storedLang;
                const browserLang = navigator.language || navigator.userLanguage;
                if (browserLang.startsWith('pt')) return 'pt';
                if (browserLang.startsWith('zh')) return 'zh';
                return 'en';
            }

            function setLanguage(lang) {
                if (!translations[lang]) lang = 'en'; // Fallback
                localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
                document.documentElement.lang = lang;

                // Update language selector value
                const langSelect = document.getElementById('languageSelect');
                if (langSelect) langSelect.value = lang;

                // Re-translate everything and update UI state dependent on language
                updateDashboardUI();
                initializeChat(); // Re-initialize chat with new initial greeting
            }

             function getTranslation(key, lang, replacements = {}) { let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`; for (const placeholder in replacements) { const regex = new RegExp(`\\{${placeholder}\\}`, 'g'); text = text.replace(regex, replacements[placeholder]); } return text; }

            function translatePage(lang) {
                if (!translations[lang]) lang = 'en';
                document.querySelectorAll('[data-translate]').forEach(el => { const key = el.getAttribute('data-translate'); const translation = getTranslation(key, lang); if (el.tagName === 'TITLE') { document.title = translation; } else if (translation.includes('<') && translation.includes('>')) { el.innerHTML = translation; } else { el.textContent = translation; } });
                document.querySelectorAll('[data-translate-placeholder]').forEach(el => { const key = el.getAttribute('data-translate-placeholder'); el.setAttribute('placeholder', getTranslation(key, lang)); });
                document.querySelectorAll('[data-translate-aria-label]').forEach(el => { const key = el.getAttribute('data-translate-aria-label'); el.setAttribute('aria-label', getTranslation(key, lang)); });
            }

            // --- UI Update Functions ---
            function updateOverallKCProgress(percentage) { const fillElement = document.getElementById('overall-kc-progress-fill'); const valueElement = document.getElementById('overall-kc-progress-value'); if (fillElement && valueElement) { fillElement.style.width = `${percentage}%`; valueElement.textContent = `${percentage}%`; } }
            function updateModuleCardStatus(moduleId, isComplete) { const card = document.querySelector(`.module-card[data-module-id="${moduleId}"]`); if (card) { card.classList.toggle('knowledge-complete', isComplete); } }
            function updateCertificateStatusDisplay() { const certificateItems = document.querySelectorAll('.certificate-tracker li[data-modules]'); certificateItems.forEach(item => { const modulesAttr = item.dataset.modules; if (!modulesAttr) return; const moduleIds = modulesAttr.split(',').map(Number); const status = getCertificateStatus(moduleIds, knowledgeCheckStatus); const statusIcon = item.querySelector('.status-icon i'); item.dataset.status = status; if(statusIcon){ switch(status) { case 'earned': statusIcon.className = 'fas fa-check-circle'; break; case 'inprogress': statusIcon.className = 'fas fa-spinner fa-spin'; break; case 'locked': default: statusIcon.className = 'fas fa-lock'; break; } } }); }

            // --- Initial Data Application & Translation ---
            function updateDashboardUI() {
                const lang = getStoredLanguage();
                translatePage(lang);
                const overallCompletion = calculateOverallCompletion(knowledgeCheckStatus);
                updateOverallKCProgress(overallCompletion);
                for (let i = 0; i < TOTAL_MODULES; i++) { updateModuleCardStatus(i, knowledgeCheckStatus[i] === true); }
                updateCertificateStatusDisplay();
            }

            // --- Language Switcher Setup ---
            const languageSelectElement = document.getElementById('languageSelect');
            if (languageSelectElement) {
                languageSelectElement.value = getStoredLanguage(); // Set initial value
                languageSelectElement.addEventListener('change', (e) => {
                    setLanguage(e.target.value);
                });
            }

            // --- Staggered Card Animation ---
            const cards = document.querySelectorAll('.module-card');
            cards.forEach((card, index) => { const delay = index * 0.05; card.style.animationDelay = `${delay}s`; card.classList.add('card-fade-in'); });

            // --- Sidebar Navigation ---
            const navLinks = document.querySelectorAll('.section-nav a.nav-link');
            const sections = document.querySelectorAll('.module-section');
            const observerOptions = { root: null, rootMargin: '-25% 0px -65% 0px', threshold: 0 };
            let lastActiveLink = navLinks.length > 0 ? navLinks[0] : null;
            navLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); const targetId = link.getAttribute('href'); const targetSection = document.querySelector(targetId); if (targetSection) { const offset = 20; const elementPosition = targetSection.getBoundingClientRect().top; const offsetPosition = elementPosition + window.pageYOffset - offset; window.scrollTo({ top: offsetPosition, behavior: "smooth" }); } }); });
            const observerCallback = (entries) => { let foundActive = false; entries.forEach(entry => { const correspondingLink = document.querySelector(`.section-nav a[href="#${entry.target.id}"]`); if (entry.isIntersecting && correspondingLink) { navLinks.forEach(l => l.classList.remove('active')); correspondingLink.classList.add('active'); lastActiveLink = correspondingLink; foundActive = true; } }); if (!foundActive) { const anyActive = document.querySelector('.section-nav a.nav-link.active'); if (!anyActive && lastActiveLink) lastActiveLink.classList.add('active'); } };
            const observer = new IntersectionObserver(observerCallback, observerOptions);
            sections.forEach(section => { observer.observe(section); });
            if (window.pageYOffset < 100 && navLinks.length > 0) { navLinks.forEach(l => l.classList.remove('active')); navLinks[0].classList.add('active'); lastActiveLink = navLinks[0]; }

            // --- Chat Panel Logic ---
            const chatbotFab = document.getElementById('chatbot-fab');
            const chatPanel = document.getElementById('chat-panel');
            const chatCloseButton = document.getElementById('chat-close-button');
            const chatPanelOverlay = document.getElementById('chat-panel-overlay');
            const chatboxEl = document.getElementById('chatbox');
            const userInputEl = document.getElementById('userInput');
            const sendButtonEl = document.getElementById('sendButton');
            const bodyEl = document.body;
            function openChatPanel() { bodyEl.classList.add('chat-open'); chatbotFab.setAttribute('aria-expanded', 'true'); userInputEl.focus(); }
            function closeChatPanel() { bodyEl.classList.remove('chat-open'); chatbotFab.setAttribute('aria-expanded', 'false'); }
            if (chatbotFab && chatPanel && chatCloseButton && chatPanelOverlay && userInputEl) {
                chatbotFab.addEventListener('click', () => { bodyEl.classList.contains('chat-open') ? closeChatPanel() : openChatPanel(); });
                chatCloseButton.addEventListener('click', closeChatPanel);
                chatPanelOverlay.addEventListener('click', closeChatPanel);
                document.addEventListener('keydown', (event) => { if (event.key === 'Escape' && bodyEl.classList.contains('chat-open')) { closeChatPanel(); } });
            }

            // --- Chatbot Messaging Logic (Translated) ---
            let conversationHistory = []; // Start empty

            function displayMessage(role, textKey, replacements = {}, isRawText = false) {
                const lang = getStoredLanguage();
                const text = isRawText ? textKey : getTranslation(textKey, lang, replacements);
                const messageContainer = document.createElement('div'); messageContainer.classList.add('message-container');
                const avatar = document.createElement('div'); avatar.classList.add('message-avatar');
                const messageBubble = document.createElement('div'); messageBubble.classList.add('message');

                if (role === 'user') { messageContainer.classList.add('user-message-container'); avatar.innerHTML = '<i class="fas fa-user"></i>'; messageBubble.classList.add('user-message'); }
                 else if (role === 'assistant') { messageContainer.classList.add('bot-message-container'); avatar.innerHTML = '<i class="fas fa-cat"></i>'; messageBubble.classList.add('bot-message'); }
                 else if (role === 'error') { messageBubble.classList.add('error-message'); messageBubble.innerHTML = `<strong>Error:</strong> ${text}`; chatboxEl.appendChild(messageBubble); chatboxEl.scrollTop = chatboxEl.scrollHeight; return; }
                 else if (role === 'typing') { const typingDiv = document.createElement('div'); typingDiv.classList.add('typing-indicator'); typingDiv.innerHTML = `<i class="fas fa-paw"></i> <span>${text}</span> <span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>`; chatboxEl.appendChild(typingDiv); chatboxEl.scrollTop = chatboxEl.scrollHeight; return typingDiv; }

                (text || '').split('\n').forEach((line, index) => { if (index > 0) messageBubble.appendChild(document.createElement('br')); messageBubble.appendChild(document.createTextNode(line)); });
                messageContainer.appendChild(avatar); messageContainer.appendChild(messageBubble); chatboxEl.appendChild(messageContainer); chatboxEl.scrollTop = chatboxEl.scrollHeight;
            }

            async function sendMessage() {
                const userText = userInputEl.value.trim(); if (!userText) return;
                displayMessage('user', userText, {}, true); conversationHistory.push({ role: "user", content: userText });
                userInputEl.value = ''; sendButtonEl.disabled = true;
                const typingIndicator = displayMessage('typing', 'chat_typing_indicator');
                const proxyUrl = '/api/proxy'; const lang = getStoredLanguage();
                const systemPrompt = { role: "system", content: getTranslation('chat_system_prompt', lang) };
                const messagesToSend = [systemPrompt, ...conversationHistory];

                try {
                    const response = await fetch(proxyUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ model: "glm-4-flash", messages: messagesToSend, temperature: 0.6, max_tokens: 150 }) });
                    if (typingIndicator) typingIndicator.remove();
                    if (!response.ok) { const errorText = await response.text(); console.error(`Proxy/API Error (${response.status}):`, errorText); displayMessage('error', 'chat_error_fetch', { status: response.status }); throw new Error(`HTTP error! status: ${response.status}`); }
                    const data = await response.json();
                    if (data.choices?.[0]?.message?.content) { const botText = data.choices[0].message.content.trim(); conversationHistory.push({ role: "assistant", content: botText }); displayMessage('assistant', botText, {}, true); }
                    else { console.error("Invalid API response:", data); displayMessage('error', 'chat_error_invalid_response'); }
                } catch (error) { console.error('Chat fetch error:', error); if (typingIndicator && typingIndicator.parentNode === chatboxEl) typingIndicator.remove(); if (!document.querySelector('.error-message')) { displayMessage('error', 'chat_error_generic'); }
                } finally { sendButtonEl.disabled = false; if (bodyEl.classList.contains('chat-open')) userInputEl.focus(); }
            }

            if (sendButtonEl && userInputEl) { sendButtonEl.addEventListener('click', sendMessage); userInputEl.addEventListener('keypress', (event) => { if (event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); } }); }

            function initializeChat() {
                const lang = getStoredLanguage();
                const initialGreeting = getTranslation('chat_initial_greeting', lang);
                conversationHistory = [{ role: "assistant", content: initialGreeting }]; // Reset history with translated greeting
                chatboxEl.innerHTML = ''; // Clear previous messages
                displayMessage('assistant', initialGreeting, {}, true); // Display the fetched greeting
            }

            // --- Final Initialization ---
            updateDashboardUI(); // Includes initial translation
            initializeChat(); // Sets up chat with correct initial language message


        }); // End DOMContentLoaded
    </script>

</body>
</html>
