<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Dashboard - Complete Python (Road to Free Open AGI)</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --background-sidebar: #ffffff;
            --background-header: linear-gradient(135deg, #0d6efd, #0a58ca);
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --info-color: #0dcaf0;
            --video-color: #fd7e14;
            --check-color: #6f42c1; /* Knowledge Check Purple */
            --certificate-color: #d63384; /* Pink */
            --chat-bot-color: #0a58ca; /* Bot message color */
            --chat-user-color: #198754; /* User message color */
            --chat-error-color: var(--error-color);
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 6px 18px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s; /* Slightly faster for chat panel */
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            --sidebar-width: 260px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page);
            color: var(--text-dark);
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        /* Class added to body when chat is open to prevent background scroll */
        body.chat-open {
             overflow: hidden;
        }


        /* --- Animations --- */
        .card-fade-in {
            opacity: 0; transform: translateY(20px);
            animation: fadeInAnimation 0.6s ease-out forwards;
        }
        @keyframes fadeInAnimation { to { opacity: 1; transform: translateY(0); } }

        /* --- Dashboard Header --- */
        .dashboard-header {
            background: var(--background-header); color: var(--text-light);
            padding: 2rem 1.5rem 1.5rem 1.5rem; margin-bottom: 2rem; position: relative;
        }
        .header-content { max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
        .dashboard-header h1 {
            font-family: var(--font-title); font-size: 2.2rem; margin-bottom: 0.8rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        /* Progress Bar Area - Knowledge Checks */
        .progress-area {
            background-color: rgba(255, 255, 255, 0.1); padding: 1rem 1.5rem;
            border-radius: var(--border-radius); margin-top: 1.5rem;
        }
        .progress-area label {
            display: block; font-size: 0.9rem; font-weight: 500;
            margin-bottom: 0.5rem; opacity: 0.9;
        }
        .progress-bar-container {
            width: calc(100% - 60px); height: 12px; background-color: rgba(0,0,0,0.3);
            border-radius: 6px; overflow: hidden; display: inline-block;
            vertical-align: middle;
        }
        .progress-bar-fill {
            width: 0%; height: 100%; background: var(--progress-fill);
            border-radius: 6px; transition: width 0.5s ease-out; position: relative;
        }
        .progress-percentage {
            font-size: 1.1rem; font-weight: 700; margin-left: 1rem;
            vertical-align: middle; display: inline-block;
            min-width: 45px; text-align: right;
        }

        /* --- Dashboard Layout --- */
        .dashboard-container {
            max-width: 1400px; margin: 0 auto; padding: 0 1.5rem;
            display: flex; gap: 2rem; align-items: flex-start;
        }

        /* --- Sidebar --- */
        .dashboard-sidebar {
            width: var(--sidebar-width); flex-shrink: 0; position: sticky; top: 20px;
            height: calc(100vh - 40px); overflow-y: auto; padding-right: 10px;
            scrollbar-width: thin; scrollbar-color: var(--secondary-color) var(--background-page);
        }
        .dashboard-sidebar::-webkit-scrollbar { width: 6px; }
        .dashboard-sidebar::-webkit-scrollbar-track { background: var(--background-page); }
        .dashboard-sidebar::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 3px; }
        .sidebar-widget {
             background-color: var(--background-sidebar); border-radius: var(--border-radius);
             padding: 1.5rem; margin-bottom: 1.5rem;
             box-shadow: var(--card-shadow); border: 1px solid var(--border-color);
        }
        .sidebar-widget h4 {
            font-family: var(--font-title); font-size: 1.1rem; margin-bottom: 1rem;
            color: var(--primary-color); border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem; display: flex; align-items: center;
        }
        .sidebar-widget h4 i { margin-right: 8px; color: var(--primary-color); opacity: 0.8; }
        .sidebar-widget ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-widget li a {
            display: block; text-decoration: none; color: var(--text-muted);
            padding: 0.6rem 0.6rem 0.6rem 10px; font-size: 0.95rem; font-weight: 500;
            border-radius: 4px; transition: all var(--transition-speed) ease; position: relative;
        }
         .sidebar-widget li a:hover { color: var(--primary-color); background-color: #e7f1ff; }
         .sidebar-widget li a.active { color: var(--primary-color); font-weight: 700; background-color: #ddeeff; }
         .sidebar-widget li a.active::before {
            content: ''; position: absolute; left: -15px; top: 5px; bottom: 5px; width: 4px;
            background-color: var(--primary-color); border-radius: 2px;
         }
          /* Certificate Tracker & Explanations */
          .certificate-tracker ul li { margin-bottom: 0.8rem; display: flex; align-items: center; font-size: 0.9rem; padding: 0.3rem 0;}
          .certificate-tracker .status-icon { width: 25px; text-align: center; margin-right: 8px; font-size: 1.1rem; }
          .certificate-tracker .status-icon .fa-check-circle { color: var(--success-color); }
          .certificate-tracker .status-icon .fa-spinner { color: var(--secondary-color); animation: spin 1.5s linear infinite; }
          .certificate-tracker .status-icon .fa-lock { color: var(--text-muted); opacity: 0.7; }
          @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
          .certificate-tracker .cert-name { flex-grow: 1; font-weight: 500;}
          .certificate-tracker li:hover { background-color: #f8f9fa; border-radius: 4px;}
          .cert-explanation { font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed var(--border-color); line-height: 1.4; }
          .cert-explanation p { margin-bottom: 0.5rem; }
          .cert-explanation strong { color: var(--text-dark); }
          .cert-explanation code { font-size: 0.9em; background: #eee; padding: 1px 4px; border-radius: 3px;}
          /* Quick Links Widget */
         .sidebar-links ul li { margin-bottom: 0.5rem; }
         .sidebar-links ul li a { display: inline-flex; align-items: center; padding: 0.5rem 1rem; font-size: 0.9rem; }
         .sidebar-links ul li a i { margin-right: 6px; }
         .sidebar-links .link-main-site { background-color: var(--secondary-color); color: var(--text-light); }
         .sidebar-links .link-main-site:hover { background-color: #5a6268; color: var(--text-light); }
         .sidebar-links .link-certificates { background-color: var(--certificate-color); color: var(--text-light); }
         .sidebar-links .link-certificates:hover { background-color: #b02a6e; color: var(--text-light); }

        /* --- Main Content Area --- */
        .dashboard-main { flex-grow: 1; min-width: 0; }
        .module-section { margin-bottom: 3rem; }
        .module-section h2 {
            font-family: var(--font-title); font-size: 1.8rem; color: var(--text-dark);
            margin-bottom: 1.5rem; padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
            scroll-margin-top: 30px; display: flex; align-items: center;
        }
        .module-section h2 i { margin-right: 10px; color: var(--primary-color); }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        /* --- Module Card Styling --- */
        .module-card {
            background-color: var(--background-card); border-radius: var(--border-radius);
            box-shadow: var(--card-shadow); transition: all var(--transition-speed) ease-in-out;
            display: flex; flex-direction: column; border: 1px solid var(--border-color);
            overflow: hidden; position: relative;
            opacity: 0; transform: translateY(20px); /* Initial state for animation */
        }
        .module-card.knowledge-complete::after { /* Checkmark overlay */
             content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900;
             position: absolute; top: 10px; right: 10px; color: var(--success-color);
             font-size: 1.2rem; background-color: rgba(255, 255, 255, 0.8);
             padding: 3px 5px; border-radius: 50%; opacity: 0.85; z-index: 2;
        }
        .module-card:hover { transform: translateY(-5px); box-shadow: var(--card-shadow-hover); }
        .card-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
        .module-card h3 {
            font-family: var(--font-title); font-size: 1.3rem; color: var(--primary-color);
            margin-bottom: 0.7rem; line-height: 1.3;
        }
        .module-card h3 .module-number {
            color: var(--text-muted); font-weight: 400; font-size: 1rem;
            margin-right: 6px; display: inline-block; background-color: var(--background-page);
            padding: 2px 6px; border-radius: 4px;
        }
        .module-topics {
            font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;
            line-height: 1.5; flex-grow: 1;
        }
        .module-topics code { background-color: #e9ecef; padding: 0.1em 0.4em; border-radius: 3px; font-size: 0.85em; color: #c7254e; }
        .module-topics strong { color: var(--text-dark); font-weight: 500; display: block; margin-top: 0.5rem; font-size: 0.85rem; }
        /* --- Module Links --- */
        .module-links {
            display: flex; flex-wrap: wrap; gap: 0.5rem;
            padding: 1rem 1.5rem; background-color: #f8f9fa;
            border-top: 1px solid var(--border-color); margin-top: auto;
        }
        .module-links a {
            flex: 1 1 40%; text-decoration: none; color: var(--text-dark);
            background-color: var(--background-card); padding: 0.5rem 0.7rem;
            border-radius: 5px; font-size: 0.85rem; font-weight: 500;
            text-align: center; transition: all var(--transition-speed) ease;
            border: 1px solid var(--border-color); display: flex;
            align-items: center; justify-content: center; min-width: 110px;
        }
        .module-links a i { margin-right: 5px; width: 1em; opacity: 0.7; }
        .module-links a:hover { transform: scale(1.03); box-shadow: 0 2px 5px rgba(0,0,0,0.08); border-color: currentColor; }
        .module-links a.link-theory { color: var(--secondary-color); }
        .module-links a.link-practice { color: var(--primary-color); }
        .module-links a.link-advanced { color: var(--success-color); }
        .module-links a.link-video { color: var(--video-color); }
        .module-links a.link-knowledge { color: var(--check-color); }


        /* --- Floating Action Button (FAB) for Chatbot --- */
        #chatbot-fab {
            position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px;
            background: linear-gradient(45deg, var(--primary-color), #0b5ed7);
            color: white; border: none; border-radius: 50%; font-size: 1.8rem;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); transition: all var(--transition-speed) ease;
            z-index: 1010; /* Above chat panel overlay */
        }
        #chatbot-fab:hover { transform: scale(1.1); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25); }
        #chatbot-fab i { transition: transform 0.3s ease; }
        /* Style for FAB when chat is open (change icon) */
        body.chat-open #chatbot-fab {
            background: linear-gradient(45deg, var(--secondary-color), #5a6268);
        }
         body.chat-open #chatbot-fab i {
             transform: rotate(135deg); /* Rotate chat icon towards 'X' */
         }

        /* --- Chat Panel --- */
        #chat-panel-overlay { /* Optional overlay */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.3);
            opacity: 0; visibility: hidden;
            transition: opacity var(--transition-speed) ease, visibility 0s var(--transition-speed);
            z-index: 1000;
        }
        body.chat-open #chat-panel-overlay {
            opacity: 1; visibility: visible; transition-delay: 0s;
        }

        #chat-panel {
            position: fixed;
            bottom: 90px; /* Position above FAB */
            right: 30px;
            width: 90vw;
            max-width: 400px;
            height: 70vh;
            max-height: 600px;
            background-color: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            z-index: 1005;
            /* Initial hidden state */
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            visibility: hidden;
            transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease, visibility 0s var(--transition-speed);
        }
        body.chat-open #chat-panel {
            opacity: 1;
            transform: translateY(0) scale(1);
            visibility: visible;
            transition-delay: 0s;
        }
        .chat-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 1.2rem;
            border-bottom: 1px solid var(--border-color);
            background-color: #f8f9fa; /* Light header */
             border-top-left-radius: var(--border-radius);
             border-top-right-radius: var(--border-radius);
        }
        .chat-panel-header h5 {
            margin: 0;
            font-family: var(--font-title);
            font-size: 1.1rem;
            color: var(--primary-color);
        }
        #chat-close-button {
            background: none; border: none; font-size: 1.5rem;
            color: var(--text-muted); cursor: pointer; padding: 0.2rem; line-height: 1;
            transition: color var(--transition-speed);
        }
        #chat-close-button:hover { color: var(--text-dark); }

        /* Adapting Chatbot Styles */
        #chatbox { /* Renamed from chat-panel-body if needed */
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            background-color: #fdfdff; /* Slightly off-white background */
            font-family: monospace; /* Keep monospace for chat content */
            line-height: 1.5;
        }
         #chatbox .message {
            margin-bottom: 12px; padding: 8px 12px; border-radius: 10px;
            max-width: 85%; word-wrap: break-word; font-size: 0.95rem;
            border: 1px solid transparent; /* Base border */
        }
         #chatbox .user-message {
             background-color: #e2f0d9; /* Light green */
             color: #3a5c3a;
             border-color: #c7e0ba;
             margin-left: auto; text-align: left; /* Keep text left-aligned */
             border-bottom-right-radius: 0; /* Speech bubble effect */
         }
         #chatbox .bot-message {
             background-color: #ddeeff; /* Light blue */
             color: #335d8a;
             border-color: #b8d7f5;
             margin-right: auto; text-align: left;
              border-bottom-left-radius: 0; /* Speech bubble effect */
         }
         #chatbox .error-message {
             background-color: #f8d7da; /* Light red */
             color: var(--chat-error-color);
             border-color: #f5c6cb;
             margin-right: auto; text-align: left;
         }
         #chatbox .message strong { /* Label (You:/Bot:/Error:) */
            display: block; margin-bottom: 4px; font-size: 0.8em;
            opacity: 0.8; font-weight: bold; font-family: var(--font-body); /* Use body font for label */
         }
          #chatbox .user-message strong { color: var(--chat-user-color); }
          #chatbox .bot-message strong { color: var(--chat-bot-color); }
          #chatbox .error-message strong { color: var(--chat-error-color); }

         #chatbox .typing-indicator {
             color: var(--text-muted); font-style: italic; margin-bottom: 10px;
             padding: 8px 12px; font-size: 0.9rem;
         }

        #input-area { /* Renamed from chat-panel-footer */
            display: flex; padding: 0.8rem;
            border-top: 1px solid var(--border-color);
            background-color: #f8f9fa;
        }
        #userInput {
            flex-grow: 1; border: 1px solid var(--border-color);
            border-radius: 5px; padding: 0.6rem 0.8rem; font-size: 0.95rem;
            background-color: var(--background-card); color: var(--text-dark);
            outline: none; transition: border-color var(--transition-speed);
            resize: none; /* Prevent manual resize */
             font-family: monospace; /* Keep input monospace */
        }
        #userInput:focus { border-color: var(--primary-color); }
        #sendButton {
            background-color: var(--primary-color); color: var(--text-light);
            border: none; border-radius: 5px; padding: 0 1.2rem; margin-left: 0.5rem;
            cursor: pointer; font-size: 0.95rem; font-weight: 500;
            transition: background-color var(--transition-speed);
            display: flex; align-items: center; justify-content: center;
        }
        #sendButton i { margin-left: 5px; }
        #sendButton:hover { background-color: #0b5ed7; }
        #sendButton:disabled { background-color: var(--secondary-color); cursor: not-allowed; opacity: 0.7; }


        /* --- Footer --- */
        footer { text-align: center; padding: 1.5rem; margin-top: 3rem; background-color: var(--background-card); border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }

        /* --- Responsive Design --- */
        @media (max-width: 1200px) {
            .dashboard-container { padding: 0 1rem; gap: 1.5rem; }
            :root { --sidebar-width: 240px; }
        }
        @media (max-width: 992px) { /* Tablet breakpoint */
             .dashboard-container { flex-direction: column; }
             .dashboard-sidebar { width: 100%; position: static; height: auto; overflow-y: visible; padding-right: 0; margin-bottom: 2rem; }
             .sidebar-widget { padding: 1.2rem; }
             .sidebar-widget li a.active::before { display: none; }
             .modules-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
             .module-section h2 { scroll-margin-top: 10px; }
             /* Adjust chat panel position slightly */
             #chat-panel { right: 20px; bottom: 80px; }
        }
        @media (max-width: 768px) {
            html { font-size: 15px; }
            .dashboard-header h1 { font-size: 1.8rem; }
            .progress-area { padding: 0.8rem 1rem; }
            .progress-bar-container { width: calc(100% - 55px); }
            .progress-percentage { font-size: 1rem; }
            .modules-grid { grid-template-columns: 1fr; gap: 1rem; }
            .card-content { padding: 1.2rem; }
            .module-links { padding: 0.8rem 1.2rem; }
            /* Make chat panel larger on smaller screens */
             #chat-panel {
                 right: 15px; bottom: 80px; left: 15px; /* Stretch closer to edges */
                 width: auto; /* Let left/right define width */
                 max-width: none;
                 max-height: 65vh;
             }
        }
        @media (max-width: 576px) { /* Mobile breakpoint */
             html { font-size: 14px; }
            .dashboard-header { padding: 1.5rem 1rem 1rem 1rem; }
            .dashboard-header h1 { font-size: 1.6rem; }
            .progress-bar-container { width: calc(100% - 50px); }
            .progress-percentage { font-size: 0.95rem; }
            .module-card h3 { font-size: 1.15rem; }
            .module-topics { font-size: 0.85rem; }
            .module-links a { flex-basis: 100%; font-size: 0.9rem; padding: 0.6rem; }
            #chatbot-fab { width: 50px; height: 50px; font-size: 1.5rem; bottom: 20px; right: 20px; }
             #chat-panel {
                 bottom: 75px; /* Position above smaller FAB */
                 right: 10px; left: 10px;
                 height: 60vh; max-height: none;
             }
             #chatbox { padding: 0.8rem; }
             #input-area { padding: 0.6rem; }
             #userInput { padding: 0.5rem 0.7rem; font-size: 0.9rem; }
             #sendButton { padding: 0 1rem; font-size: 0.9rem; }
        }

    </style>
</head>
<body>

    <header class="dashboard-header">
        <div class="header-content">
            <h1>Python Course Dashboard</h1>
            <div class="progress-area">
                <label for="overall-kc-progress">Knowledge Checks Completed</label>
                <div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="overall-kc-progress-fill" style="width: 0%;"></div>
                    </div>
                    <span class="progress-percentage" id="overall-kc-progress-value">0%</span>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-container">

        <!-- === Sidebar === -->
        <aside class="dashboard-sidebar">
             <!-- Navigation Widget -->
            <div class="sidebar-widget">
                <h4><i class="fas fa-compass"></i> Navigate Sections</h4>
                <ul class="section-nav">
                    <li><a href="#section-basics" class="nav-link active">Basics & I/O</a></li>
                    <li><a href="#section-flow-control" class="nav-link">Flow Control</a></li>
                    <li><a href="#section-data-structures" class="nav-link">Data Structures</a></li>
                    <li><a href="#section-functions" class="nav-link">Functions & Scope</a></li>
                    <li><a href="#section-files-errors" class="nav-link">Files & Errors</a></li>
                    <li><a href="#section-advanced" class="nav-link">Advanced & Project</a></li>
                </ul>
            </div>

             <!-- Certificate Tracker Widget -->
            <div class="sidebar-widget certificate-tracker">
                 <h4><i class="fas fa-award"></i> Certificate Status</h4>
                 <ul>
                    <li data-modules="0,1,2,3,4"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Basics & I/O</span> </li>
                    <li data-modules="5,6,7,8,9,12,13,14,15"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Flow Control</span> </li>
                    <li data-modules="10,11,20,21,22"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Data Structures</span> </li>
                    <li data-modules="16,17,18,19"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Functions</span> </li>
                    <li data-modules="23,24,25"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Files & Errors</span> </li>
                    <li data-modules="26,27,28,29,30,31,32"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Advanced Topics</span> </li>
                    <li data-modules="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32"> <span class="status-icon"><i class="fas fa-lock"></i></span> <span class="cert-name">Full Course</span> </li>
                 </ul>
                 <div class="cert-explanation">
                     <p>Complete all <strong>Knowledge Checks</strong> (<i class="fas fa-check-double" style="color:var(--check-color)"></i>) in a section to earn the certificate.</p>
                     <p><i class="fas fa-exclamation-triangle" style="color: var(--accent-color);"></i> <strong>Note:</strong> Progress uses <code>localStorage</code>. It may be lost if you switch browsers/devices or clear data. Retake KCs to restore.</p>
                 </div>
            </div>

             <!-- Links Widget -->
             <div class="sidebar-widget sidebar-links">
                 <h4><i class="fas fa-link"></i> Quick Links</h4>
                  <ul>
                    <li><a href="index.html" class="link-main-site"><i class="fas fa-home"></i> Main Site</a></li>
                    <li><a href="certificates.html" class="link-certificates"><i class="fas fa-certificate"></i> View Certificates Page</a></li>
                  </ul>
             </div>
        </aside>

        <!-- === Main Content === -->
        <main class="dashboard-main">
            <!-- Module Sections (Content is the same as previous version) -->
            <!-- Section: Basics & I/O -->
            <section id="section-basics" class="module-section">
                <h2><i class="fas fa-play-circle"></i> Basics & I/O (Modules 0-4)</h2>
                <div class="modules-grid"> /* Cards 0-4 */ </div>
            </section>
            <!-- Section: Flow Control -->
            <section id="section-flow-control" class="module-section">
                <h2><i class="fas fa-code-branch"></i> Flow Control (Modules 5-9, 12-15)</h2>
                <div class="modules-grid"> /* Cards 5-9, 12-15 */ </div>
            </section>
            <!-- Section: Data Structures -->
            <section id="section-data-structures" class="module-section">
                 <h2><i class="fas fa-database"></i> Data Structures (Modules 10-11, 20-22)</h2>
                 <div class="modules-grid"> /* Cards 10-11, 20-22 */ </div>
            </section>
            <!-- Section: Functions & Scope -->
            <section id="section-functions" class="module-section">
                 <h2><i class="fas fa-cogs"></i> Functions & Scope (Modules 16-19)</h2>
                  <div class="modules-grid"> /* Cards 16-19 */ </div>
            </section>
             <!-- Section: Files & Errors -->
            <section id="section-files-errors" class="module-section">
                 <h2><i class="fas fa-folder-open"></i> Files & Error Handling (Modules 23-25)</h2>
                  <div class="modules-grid"> /* Cards 23-25 */ </div>
            </section>
             <!-- Section: Advanced Topics & Project -->
            <section id="section-advanced" class="module-section">
                 <h2><i class="fas fa-star"></i> Advanced & Project (Modules 26-32)</h2>
                  <div class="modules-grid"> /* Cards 26-32 */ </div>
            </section>

            <!-- === START: MODULE CARD HTML (Paste all 33 cards from previous answer here) === -->
            <!-- Example Card (repeat for all 33, placed within correct section's .modules-grid) -->
             <section id="section-basics" class="module-section">
                 <!-- ... h2 ... -->
                <div class="modules-grid">
                    <div class="module-card card-fade-in" data-module-id="0">
                        <div class="card-content">
                            <h3><span class="module-number">0</span> Introduction & Output</h3>
                            <p class="module-topics"><code>print()</code> function, Basic strings, Comments (<code>#</code>). <strong>CT:</strong> Expressing instructions.</p>
                        </div>
                        <div class="module-links"> <a href="ctp-theory-0.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-0.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-0.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-0.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-0.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div>
                    </div>
                    <!-- Add Cards 1, 2, 3, 4 here -->
                    <div class="module-card card-fade-in" data-module-id="1"> <div class="card-content"> <h3><span class="module-number">1</span> Variables & Data Types</h3> <p class="module-topics">Assignment (<code>=</code>), <code>int</code>, <code>float</code>, <code>str</code>, <code>type()</code>. <strong>CT:</strong> Data Representation, Abstraction.</p> </div> <div class="module-links"> <a href="ctp-theory-1.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-1.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-1.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-1.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-1.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="2"> <div class="card-content"> <h3><span class="module-number">2</span> Working with Numbers</h3> <p class="module-topics">Arithmetic Operators (<code>+ - * / // % **</code>), Precedence. <strong>CT:</strong> Algorithmic thinking.</p> </div> <div class="module-links"> <a href="ctp-theory-2.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-2.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-2.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-2.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-2.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="3"> <div class="card-content"> <h3><span class="module-number">3</span> Working with Text</h3> <p class="module-topics">Concatenation (<code>+</code>), multiplication (<code>*</code>), <code>len()</code>, Indexing (<code>[]</code>). <strong>CT:</strong> Data Representation, Pattern Recognition.</p> </div> <div class="module-links"> <a href="ctp-theory-3.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-3.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-3.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-3.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-3.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="4"> <div class="card-content"> <h3><span class="module-number">4</span> Getting User Input</h3> <p class="module-topics"><code>input()</code>, Type conversion: <code>int()</code>, <code>float()</code>, <code>str()</code>. <strong>CT:</strong> Interaction, Handling data.</p> </div> <div class="module-links"> <a href="ctp-theory-4.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-4.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-4.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-4.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-4.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                </div>
             </section>
              <section id="section-flow-control" class="module-section">
                  <!-- ... h2 ... -->
                <div class="modules-grid">
                    <div class="module-card card-fade-in" data-module-id="5"> <div class="card-content"> <h3><span class="module-number">5</span> Comparisons & Booleans</h3> <p class="module-topics"><code>== != < > <= >=</code>, Boolean type: <code>True</code>, <code>False</code>. <strong>CT:</strong> Logic, Conditions.</p> </div> <div class="module-links"> <a href="ctp-theory-5.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-5.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-5.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-5.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-5.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="6"> <div class="card-content"> <h3><span class="module-number">6</span> Simple Decisions - if</h3> <p class="module-topics"><code>if</code> syntax, Indentation. <strong>CT:</strong> Algorithmic thinking (conditional paths).</p> </div> <div class="module-links"> <a href="ctp-theory-6.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-6.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-6.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-6.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-6.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="7"> <div class="card-content"> <h3><span class="module-number">7</span> Alternatives - else</h3> <p class="module-topics"><code>if</code>/<code>else</code> structure. <strong>CT:</strong> Algorithmic thinking (branching logic).</p> </div> <div class="module-links"> <a href="ctp-theory-7.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-7.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-7.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-7.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-7.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="8"> <div class="card-content"> <h3><span class="module-number">8</span> Multiple Conditions - elif</h3> <p class="module-topics"><code>if</code>/<code>elif</code>/<code>else</code> structure. <strong>CT:</strong> Algorithmic thinking (complex branching).</p> </div> <div class="module-links"> <a href="ctp-theory-8.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-8.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-8.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-8.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-8.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="9"> <div class="card-content"> <h3><span class="module-number">9</span> Combining Conditions</h3> <p class="module-topics">Logical operators: <code>and</code>, <code>or</code>, <code>not</code>. <strong>CT:</strong> Logic, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-9.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-9.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-9.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-9.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-9.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="12"> <div class="card-content"> <h3><span class="module-number">12</span> Loops - Fixed Times</h3> <p class="module-topics"><code>for i in range(n):</code> syntax. <strong>CT:</strong> Iteration, Pattern Recognition.</p> </div> <div class="module-links"> <a href="ctp-theory-12.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-12.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-12.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-12.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-12.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="13"> <div class="card-content"> <h3><span class="module-number">13</span> Loops - Over Data</h3> <p class="module-topics"><code>for item in list:</code>, <code>for char in string:</code>. <strong>CT:</strong> Iteration over data, Abstraction.</p> </div> <div class="module-links"> <a href="ctp-theory-13.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-13.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-13.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-13.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-13.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="14"> <div class="card-content"> <h3><span class="module-number">14</span> Loops - Conditional (while)</h3> <p class="module-topics"><code>while condition:</code> syntax. <strong>CT:</strong> Conditional iteration.</p> </div> <div class="module-links"> <a href="ctp-theory-14.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-14.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-14.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-14.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-14.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                    <div class="module-card card-fade-in" data-module-id="15"> <div class="card-content"> <h3><span class="module-number">15</span> Controlling Loops</h3> <p class="module-topics"><code>break</code>, <code>continue</code>. <strong>CT:</strong> Fine-tuning iteration.</p> </div> <div class="module-links"> <a href="ctp-theory-15.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-15.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-15.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-15.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-15.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                 </div>
             </section>
             <section id="section-data-structures" class="module-section">
                  <!-- ... h2 ... -->
                 <div class="modules-grid">
                     <div class="module-card card-fade-in" data-module-id="10"> <div class="card-content"> <h3><span class="module-number">10</span> Introduction to Lists</h3> <p class="module-topics">Creation (<code>[]</code>), Indexing, <code>len()</code>. <strong>CT:</strong> Data Structures, Abstraction.</p> </div> <div class="module-links"> <a href="ctp-theory-10.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-10.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-10.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-10.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-10.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="11"> <div class="card-content"> <h3><span class="module-number">11</span> Modifying Lists</h3> <p class="module-topics"><code>.append()</code>, <code>.insert()</code>, <code>del</code>, <code>.pop()</code>, <code>.remove()</code>, Slicing. <strong>CT:</strong> Data Manipulation, Mutability.</p> </div> <div class="module-links"> <a href="ctp-theory-11.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-11.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-11.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-11.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-11.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="20"> <div class="card-content"> <h3><span class="module-number">20</span> Dictionaries Intro</h3> <p class="module-topics">Creation (<code>{}</code>), Key access, Adding/updating. <strong>CT:</strong> Data Structures, Data Representation.</p> </div> <div class="module-links"> <a href="ctp-theory-20.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-20.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-20.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-20.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-20.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="21"> <div class="card-content"> <h3><span class="module-number">21</span> Working with Dictionaries</h3> <p class="module-topics">Iterating (<code>.keys()</code> etc.), Checking keys (<code>in</code>), Deleting (<code>del</code>). <strong>CT:</strong> Data Manipulation, Algorithms.</p> </div> <div class="module-links"> <a href="ctp-theory-21.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-21.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-21.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-21.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-21.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="22"> <div class="card-content"> <h3><span class="module-number">22</span> Introduction to Tuples</h3> <p class="module-topics">Creation (<code>()</code>), Accessing, Immutability. <strong>CT:</strong> Data Structures, Constraints.</p> </div> <div class="module-links"> <a href="ctp-theory-22.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-22.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-22.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-22.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-22.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                 </div>
             </section>
             <section id="section-functions" class="module-section">
                   <!-- ... h2 ... -->
                  <div class="modules-grid">
                     <div class="module-card card-fade-in" data-module-id="16"> <div class="card-content"> <h3><span class="module-number">16</span> Defining Simple Functions</h3> <p class="module-topics"><code>def func():</code> syntax, Calling functions. <strong>CT:</strong> Abstraction, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-16.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-16.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-16.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-16.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-16.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="17"> <div class="card-content"> <h3><span class="module-number">17</span> Function Parameters</h3> <p class="module-topics"><code>def func(param1):</code>, Passing arguments. <strong>CT:</strong> Abstraction, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-17.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-17.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-17.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-17.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-17.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="18"> <div class="card-content"> <h3><span class="module-number">18</span> Function Return Values</h3> <p class="module-topics"><code>return</code> statement. <strong>CT:</strong> Abstraction, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-18.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-18.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-18.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-18.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-18.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="19"> <div class="card-content"> <h3><span class="module-number">19</span> Understanding Scope</h3> <p class="module-topics">Local vs Global variables (basic). <strong>CT:</strong> Abstraction, Debugging.</p> </div> <div class="module-links"> <a href="ctp-theory-19.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-19.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-19.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-19.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-19.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                  </div>
             </section>
             <section id="section-files-errors" class="module-section">
                  <!-- ... h2 ... -->
                  <div class="modules-grid">
                     <div class="module-card card-fade-in" data-module-id="23"> <div class="card-content"> <h3><span class="module-number">23</span> Reading from Files</h3> <p class="module-topics"><code>open('r')</code>, <code>.read()</code>, <code>.readline()</code>, <code>.readlines()</code>, <code>with</code>. <strong>CT:</strong> I/O, Data Persistence.</p> </div> <div class="module-links"> <a href="ctp-theory-23.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-23.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-23.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-23.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-23.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="24"> <div class="card-content"> <h3><span class="module-number">24</span> Writing to Files</h3> <p class="module-topics"><code>open('w'/'a')</code>, <code>.write()</code>, Newline (<code>\n</code>), <code>with</code>. <strong>CT:</strong> I/O, Data Persistence.</p> </div> <div class="module-links"> <a href="ctp-theory-24.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-24.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-24.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-24.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-24.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="25"> <div class="card-content"> <h3><span class="module-number">25</span> Exception Handling</h3> <p class="module-topics"><code>try...except</code>, Handling specific errors. <strong>CT:</strong> Robustness, Error handling.</p> </div> <div class="module-links"> <a href="ctp-theory-25.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-25.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-25.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-25.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-25.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                  </div>
             </section>
              <section id="section-advanced" class="module-section">
                   <!-- ... h2 ... -->
                  <div class="modules-grid">
                     <div class="module-card card-fade-in" data-module-id="26"> <div class="card-content"> <h3><span class="module-number">26</span> Importing Modules</h3> <p class="module-topics"><code>import</code>, Using module functions (<code>math</code>, <code>random</code>). <strong>CT:</strong> Abstraction, Reusability.</p> </div> <div class="module-links"> <a href="ctp-theory-26.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-26.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-26.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-26.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-26.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="27"> <div class="card-content"> <h3><span class="module-number">27</span> Algorithms - Searching</h3> <p class="module-topics">Linear search. <strong>CT:</strong> Algorithm Design, Efficiency.</p> </div> <div class="module-links"> <a href="ctp-theory-27.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-27.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-27.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-27.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-27.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="28"> <div class="card-content"> <h3><span class="module-number">28</span> Algorithms - Sorting</h3> <p class="module-topics">Simple sorting (Bubble/Selection). <strong>CT:</strong> Algorithm Design, Comparison.</p> </div> <div class="module-links"> <a href="ctp-theory-28.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-28.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-28.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-28.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-28.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="29"> <div class="card-content"> <h3><span class="module-number">29</span> OOP Intro (Opt)</h3> <p class="module-topics"><code>class</code>, <code>__init__</code>, Instances, Attributes. <strong>CT:</strong> Abstraction, Decomposition, Modeling.</p> </div> <div class="module-links"> <a href="ctp-theory-29.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-29.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-29.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-29.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-29.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="30"> <div class="card-content"> <h3><span class="module-number">30</span> Recursion Intro (Opt)</h3> <p class="module-topics">Self-calling functions, Base case. <strong>CT:</strong> Recursion vs Iteration, Decomposition.</p> </div> <div class="module-links"> <a href="ctp-theory-30.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-30.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-30.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-30.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-30.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="31"> <div class="card-content"> <h3><span class="module-number">31</span> Final Project Prep</h3> <p class="module-topics">Integrating concepts, Problem-solving. <strong>CT:</strong> Decomposition, Abstraction, Design, Evaluation.</p> </div> <div class="module-links"> <a href="ctp-theory-31.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-practice-31.html" class="link-practice"><i class="fas fa-pencil-alt"></i> Practice</a> <a href="ctp-advanced-31.html" class="link-advanced"><i class="fas fa-flask"></i> Advanced</a> <a href="ctp-video-31.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-31.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                     <div class="module-card card-fade-in" data-module-id="32"> <div class="card-content"> <h3><span class="module-number">32</span> Course Conclusion</h3> <p class="module-topics">Review, Next steps, Further resources.</p> </div> <div class="module-links"> <a href="ctp-theory-32.html" class="link-theory"><i class="fas fa-book-open"></i> Theory</a> <a href="ctp-video-32.html" class="link-video"><i class="fas fa-video"></i> Video</a> <a href="ctp-knowledge-check-32.html" class="link-knowledge"><i class="fas fa-check-double"></i> Check</a> </div> </div>
                  </div>
             </section>
            <!-- === END: MODULE CARD HTML === -->

        </main>
    </div><!-- /.dashboard-container -->

    <!-- Chat Panel Overlay -->
    <div id="chat-panel-overlay"></div>

    <!-- Chat Panel -->
    <div id="chat-panel">
        <div class="chat-panel-header">
            <h5><i class="fas fa-robot" style="margin-right: 8px; color: var(--primary-color);"></i> Course Assistant</h5>
            <button id="chat-close-button" aria-label="Close Chat"></button>
        </div>
        <div id="chatbox">
            <!-- Initial Bot Message (optional) -->
            <div class="message bot-message"><strong>Bot:</strong> Hello! Ask me about Python, computational thinking, or anything course-related!</div>
        </div>
        <div id="input-area">
            <input id="userInput" type="text" autofocus placeholder="Type your message... (Press Enter)">
            <button id="sendButton" aria-label="Send Message"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Floating Chatbot Button -->
    <button id="chatbot-fab" aria-label="Open Course Assistant">
        <i class="fas fa-comment-dots"></i>
    </button>

    <footer>
        <p>Part of the Road to Free Open AGI Project</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1'; // Added version
            const TOTAL_MODULES = 33; // 0-32

            // --- Data Loading & Saving (LocalStorage) ---
            function loadKnowledgeCheckStatus() {
                try {
                    const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY);
                    // Basic validation: Check if it's an object
                    const parsed = storedStatus ? JSON.parse(storedStatus) : {};
                    return typeof parsed === 'object' && parsed !== null ? parsed : {};
                } catch (e) {
                    console.error("Error reading KC status from localStorage:", e);
                    return {};
                }
            }

            // --- Progress & Certificate Calculation ---
            const knowledgeCheckStatus = loadKnowledgeCheckStatus(); // Load status once

            function calculateOverallCompletion(statusObject) {
                let completedCount = 0;
                for (let i = 0; i < TOTAL_MODULES; i++) {
                    if (statusObject[i] === true) completedCount++;
                }
                return TOTAL_MODULES > 0 ? Math.round((completedCount / TOTAL_MODULES) * 100) : 0;
            }

            function getCertificateStatus(moduleIds, statusObject) {
                if (!Array.isArray(moduleIds) || moduleIds.length === 0) return 'locked';
                const allComplete = moduleIds.every(id => statusObject[id] === true);
                if (allComplete) return 'earned';
                const anyComplete = moduleIds.some(id => statusObject[id] === true);
                return anyComplete ? 'inprogress' : 'locked';
            }

            // --- UI Update Functions ---
            function updateOverallKCProgress(percentage) {
                const fillElement = document.getElementById('overall-kc-progress-fill');
                const valueElement = document.getElementById('overall-kc-progress-value');
                if (fillElement && valueElement) {
                    fillElement.style.width = `${percentage}%`;
                    valueElement.textContent = `${percentage}%`;
                }
            }

             function updateModuleCardStatus(moduleId, isComplete) {
                 const card = document.querySelector(`.module-card[data-module-id="${moduleId}"]`);
                 if (card) {
                     card.classList.toggle('knowledge-complete', isComplete);
                 }
             }

             function updateCertificateStatusDisplay() {
                const certificateItems = document.querySelectorAll('.certificate-tracker li[data-modules]');
                certificateItems.forEach(item => {
                    const modulesAttr = item.dataset.modules;
                    if (!modulesAttr) return;
                    const moduleIds = modulesAttr.split(',').map(Number);
                    const status = getCertificateStatus(moduleIds, knowledgeCheckStatus);
                    const statusIcon = item.querySelector('.status-icon i');
                    item.dataset.status = status;
                    if(statusIcon){
                        switch(status) {
                            case 'earned': statusIcon.className = 'fas fa-check-circle'; break;
                            case 'inprogress': statusIcon.className = 'fas fa-spinner fa-spin'; break;
                            case 'locked': default: statusIcon.className = 'fas fa-lock'; break;
                         }
                    }
                });
            }


            // --- Initial Data Application ---
            const overallCompletion = calculateOverallCompletion(knowledgeCheckStatus);
            updateOverallKCProgress(overallCompletion);
            for (let i = 0; i < TOTAL_MODULES; i++) {
                 updateModuleCardStatus(i, knowledgeCheckStatus[i] === true);
            }
            updateCertificateStatusDisplay();


             // --- Staggered Card Animation ---
             const cards = document.querySelectorAll('.module-card');
             cards.forEach((card, index) => {
                 const delay = index * 0.05;
                 card.style.animationDelay = `${delay}s`;
                 card.classList.add('card-fade-in');
             });


            // --- Sidebar Navigation & Active Link Highlighting ---
            const navLinks = document.querySelectorAll('.section-nav a.nav-link');
            const sections = document.querySelectorAll('.module-section');
            const observerOptions = { root: null, rootMargin: '-25% 0px -65% 0px', threshold: 0 };
            let lastActiveLink = navLinks.length > 0 ? navLinks[0] : null;

            navLinks.forEach(link => { // Smooth Scroll Logic
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        const offset = 20;
                        const elementPosition = targetSection.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - offset;
                        window.scrollTo({ top: offsetPosition, behavior: "smooth" });
                    }
                });
            });

            const observerCallback = (entries) => { // Active Link Logic
                let foundActive = false;
                entries.forEach(entry => {
                    const correspondingLink = document.querySelector(`.section-nav a[href="#${entry.target.id}"]`);
                    if (entry.isIntersecting && correspondingLink) {
                         navLinks.forEach(l => l.classList.remove('active'));
                         correspondingLink.classList.add('active');
                         lastActiveLink = correspondingLink;
                         foundActive = true;
                    }
                });
                 if (!foundActive) {
                     const anyActive = document.querySelector('.section-nav a.nav-link.active');
                     if (!anyActive && lastActiveLink) lastActiveLink.classList.add('active');
                 }
            };
            const observer = new IntersectionObserver(observerCallback, observerOptions);
            sections.forEach(section => { observer.observe(section); });
             if (window.pageYOffset < 100 && navLinks.length > 0) { // Initial Active Link
                 navLinks.forEach(l => l.classList.remove('active'));
                 navLinks[0].classList.add('active');
                 lastActiveLink = navLinks[0];
             }


            // --- Chat Panel Logic ---
            const chatbotFab = document.getElementById('chatbot-fab');
            const chatPanel = document.getElementById('chat-panel');
            const chatCloseButton = document.getElementById('chat-close-button');
            const chatPanelOverlay = document.getElementById('chat-panel-overlay');
            const chatboxEl = document.getElementById('chatbox'); // Renamed from chatbox
            const userInputEl = document.getElementById('userInput'); // Renamed from userInput
            const sendButtonEl = document.getElementById('sendButton'); // Renamed from sendButton
            const bodyEl = document.body;

            function openChatPanel() {
                bodyEl.classList.add('chat-open');
                chatbotFab.setAttribute('aria-expanded', 'true');
                userInputEl.focus(); // Focus input when opened
            }

            function closeChatPanel() {
                bodyEl.classList.remove('chat-open');
                chatbotFab.setAttribute('aria-expanded', 'false');
            }

            if (chatbotFab && chatPanel && chatCloseButton && chatPanelOverlay && userInputEl) {
                chatbotFab.addEventListener('click', () => {
                    if (bodyEl.classList.contains('chat-open')) {
                        closeChatPanel();
                    } else {
                        openChatPanel();
                    }
                });

                chatCloseButton.addEventListener('click', closeChatPanel);
                chatPanelOverlay.addEventListener('click', closeChatPanel);

                // Close on Escape key
                 document.addEventListener('keydown', (event) => {
                     if (event.key === 'Escape' && bodyEl.classList.contains('chat-open')) {
                         closeChatPanel();
                     }
                 });
            }

            // --- Chatbot Messaging Logic (Adapted) ---
            let conversationHistory = [
                 { role: "assistant", content: "Hello! Ask me about Python, computational thinking, or anything course-related!" }
            ];

            function displayMessage(role, text) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                const strong = document.createElement('strong');

                if (role === 'user') { messageDiv.classList.add('user-message'); strong.textContent = "You:"; }
                else if (role === 'assistant') { messageDiv.classList.add('bot-message'); strong.textContent = "Bot:"; }
                else if (role === 'error') { messageDiv.classList.add('error-message'); strong.textContent = "Error:"; text = text || "An unknown error occurred."; }
                else if (role === 'typing') { messageDiv.classList.add('typing-indicator'); messageDiv.textContent = text || 'Assistant is thinking...'; chatboxEl.appendChild(messageDiv); chatboxEl.scrollTop = chatboxEl.scrollHeight; return messageDiv; }
                else { strong.textContent = "System:"; }

                messageDiv.appendChild(strong);
                (text || '').split('\n').forEach((line, index) => {
                    if (index > 0) messageDiv.appendChild(document.createElement('br'));
                    messageDiv.appendChild(document.createTextNode(' ' + line));
                });

                chatboxEl.appendChild(messageDiv);
                chatboxEl.scrollTop = chatboxEl.scrollHeight; // Scroll to bottom
            }

            async function sendMessage() {
                const userText = userInputEl.value.trim();
                if (!userText) return;

                conversationHistory.push({ role: "user", content: userText });
                displayMessage('user', userText);
                userInputEl.value = '';
                sendButtonEl.disabled = true;
                const typingIndicator = displayMessage('typing');
                const proxyUrl = '/api/proxy'; // Your Cloudflare Pages Function endpoint

                try {
                    const response = await fetch(proxyUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            model: "glm-4-flash",
                            messages: conversationHistory,
                            temperature: 0.7, max_tokens: 1024
                        })
                    });

                    if (typingIndicator) typingIndicator.remove();

                    if (!response.ok) {
                         const errorText = await response.text();
                         console.error(`Proxy/API Error (${response.status}):`, errorText);
                         let displayError = `Request failed (${response.status}).`;
                         // Add more specific user-facing errors if desired
                         throw new Error(displayError);
                    }

                    const data = await response.json();

                     if (data.choices?.[0]?.message?.content) {
                        const botText = data.choices[0].message.content.trim();
                        conversationHistory.push({ role: "assistant", content: botText });
                        displayMessage('assistant', botText);
                    } else {
                         console.error("Invalid API response structure:", data);
                         throw new Error("Received an invalid response from the assistant.");
                    }

                } catch (error) {
                    console.error('Chat fetch error:', error);
                    if (typingIndicator && typingIndicator.parentNode === chatboxEl) typingIndicator.remove();
                    displayMessage('error', error.message || "Could not reach the assistant.");
                    // conversationHistory.pop(); // Optionally remove user message on error
                } finally {
                    sendButtonEl.disabled = false;
                    if (bodyEl.classList.contains('chat-open')) { // Only refocus if panel is still open
                        userInputEl.focus();
                    }
                }
            }

            // Chat Event Listeners
            if (sendButtonEl && userInputEl) {
                sendButtonEl.addEventListener('click', sendMessage);
                userInputEl.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter' && !event.shiftKey) {
                        event.preventDefault();
                        sendMessage();
                    }
                });
            }

             // Display initial message if needed (and not hardcoded in HTML)
             // function initializeChat() {
             //     chatboxEl.innerHTML = ''; // Clear first
             //     conversationHistory.forEach(msg => displayMessage(msg.role, msg.content));
             // }
             // initializeChat();


        }); // End DOMContentLoaded
    </script>

</body>
</html>
