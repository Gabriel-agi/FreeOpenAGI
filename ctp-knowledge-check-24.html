<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title_kc24">Knowledge Check: Module 24</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Copied from dashboard for consistency) --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --info-color: #0dcaf0;
            --check-color: #6f42c1; /* Color for checks/quiz */
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;

            /* Quiz Specific */
            --correct-answer-bg: #d1e7dd;
            --correct-answer-border: #a3cfbb;
            --incorrect-answer-bg: #f8d7da;
            --incorrect-answer-border: #f1aeae;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- Animations --- */
        .fade-in { opacity: 0; animation: fadeInAnimation 0.6s ease-out forwards; }
        @keyframes fadeInAnimation { to { opacity: 1; } }

        /* --- Header/Navigation --- */
        .kc-header {
            background-color: var(--background-card);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .return-button {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background-color: var(--secondary-color);
            color: var(--text-light);
            text-decoration: none;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color var(--transition-speed) ease;
            border: none;
            cursor: pointer;
        }
        .return-button i { margin-right: 6px; }
        .return-button:hover { background-color: #5a6268; }

        .language-switcher-minimal select { /* Minimal switcher for KC page */
             background: var(--background-card);
             color: var(--text-dark);
             border: 1px solid var(--border-color);
             border-radius: 5px;
             padding: 8px 12px;
             cursor: pointer;
             font-size: 0.9rem;
             font-weight: 500;
             appearance: none; -webkit-appearance: none; -moz-appearance: none;
             background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
             background-repeat: no-repeat;
             background-position: right 8px center;
             background-size: 8px auto;
             padding-right: 30px;
        }
        .language-switcher-minimal select:hover { border-color: var(--secondary-color); }
        .language-switcher-minimal select:focus { outline: none; border-color: var(--primary-color); }


        /* --- Main Quiz Area --- */
        .dashboard-main { flex-grow: 1; display: flex; justify-content: center; padding: 2rem 1.5rem; }
        .knowledge-check-container {
            background-color: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 2rem 2.5rem;
            max-width: 800px;
            width: 100%;
            border: 1px solid var(--border-color);
        }
        .knowledge-check-container h2 {
            font-family: var(--font-title);
            font-size: 1.8rem;
            color: var(--check-color);
            margin-bottom: 0.5rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .knowledge-check-container h2 i { margin-right: 10px; }
        .kc-instructions {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 2rem;
            text-align: center;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 1rem;
        }
        .kc-instructions strong { color: var(--text-dark); }

        /* --- Question Styling --- */
        .question-block {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .question-block:last-of-type { border-bottom: none; margin-bottom: 1rem; padding-bottom: 0.5rem;}
        .question-number {
            font-weight: 700;
            color: var(--check-color);
            margin-right: 8px;
            display: inline-block;
        }
        .question-text {
            font-weight: 500;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        .question-text code {
            font-size: 0.95em;
            background: #eee;
            padding: 2px 5px;
            border-radius: 4px;
            color: #c7254e; /* Bootstrap's code color */
            font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        /* --- Answer Styling --- */
        .answers label {
            display: block;
            background-color: var(--background-page);
            padding: 0.8rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
            position: relative; /* For potential feedback icons */
        }
        .answers label:hover { background-color: #e9ecef; }
        .answers input[type="radio"] { display: none; /* Hide default radio */ }
        .answers input[type="radio"]:checked + span { font-weight: 500; color: var(--primary-color); }
        .answers label span code { /* Code within answers */
            font-size: 0.9em;
            background: #ddd;
            padding: 1px 4px;
            border-radius: 3px;
            color: #c7254e;
        }
        /* Styles for showing results */
        .answers label.correct {
            background-color: var(--correct-answer-bg);
            border-color: var(--correct-answer-border);
            font-weight: 500;
            color: var(--success-color);
        }
        .answers label.incorrect {
            background-color: var(--incorrect-answer-bg);
            border-color: var(--incorrect-answer-border);
            color: var(--error-color);
            text-decoration: line-through;
             opacity: 0.8;
        }
        /* Add check/cross icons after submission (Optional but nice) */
         .answers label.correct::after,
         .answers label.incorrect::after {
             font-family: 'Font Awesome 6 Free';
             font-weight: 900;
             position: absolute;
             right: 15px;
             top: 50%;
             transform: translateY(-50%);
             font-size: 1.1rem;
         }
         .answers label.correct::after { content: '\f00c'; color: var(--success-color); }
         .answers label.incorrect::after { content: '\f00d'; color: var(--error-color); }


        /* --- Buttons --- */
        .button-container { text-align: center; margin-top: 2rem; }
        .button-primary, .button-secondary {
            padding: 0.8rem 1.8rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
            margin: 0 0.5rem;
        }
        .button-primary { background-color: var(--check-color); color: var(--text-light); }
        .button-primary:hover { background-color: #5a35a1; transform: translateY(-2px); }
        .button-secondary { background-color: var(--secondary-color); color: var(--text-light); }
        .button-secondary:hover { background-color: #5a6268; transform: translateY(-2px); }
        .button-primary:disabled { background-color: var(--text-muted); cursor: not-allowed; transform: none; }


        /* --- Results Area --- */
        #results-area {
            margin-top: 2.5rem;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            border: 1px solid var(--border-color);
            display: none; /* Hidden initially */
        }
        #results-area.pass { background-color: var(--correct-answer-bg); border-color: var(--correct-answer-border); }
        #results-area.fail { background-color: var(--incorrect-answer-bg); border-color: var(--incorrect-answer-border); }
        #score { font-size: 1.3rem; font-weight: 700; margin-bottom: 0.5rem; }
        #results-area.pass #score { color: var(--success-color); }
        #results-area.fail #score { color: var(--error-color); }
        #feedback { font-size: 1rem; font-weight: 500; margin-bottom: 1.5rem; }
        #results-area.pass #feedback { color: var(--success-color); }
        #results-area.fail #feedback { color: var(--error-color); }


        /* --- Footer --- */
        footer {
            text-align: center; padding: 1.5rem; margin-top: auto; /* Pushes footer down */
            background-color: var(--background-card); border-top: 1px solid var(--border-color);
            color: var(--text-muted); font-size: 0.9rem;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            html { font-size: 15px; }
            .knowledge-check-container { padding: 1.5rem; }
            .kc-header { padding: 0.8rem 1rem; flex-direction: column; gap: 0.5rem;}
            .return-button { font-size: 0.85rem; padding: 0.4rem 0.8rem;}
            .knowledge-check-container h2 { font-size: 1.6rem; }
             .dashboard-main { padding: 1.5rem 1rem; }
             .question-text { font-size: 1rem; }
             .answers label { padding: 0.7rem 0.9rem; }
        }
         @media (max-width: 576px) {
            html { font-size: 14px; }
            .knowledge-check-container { padding: 1rem 1.2rem; }
            .kc-header { padding: 0.6rem 0.8rem; }
            .knowledge-check-container h2 { font-size: 1.4rem; }
             .dashboard-main { padding: 1rem 0.8rem; }
             .question-text { font-size: 0.95rem; }
             .answers label { padding: 0.6rem 0.8rem; font-size: 0.9rem; }
             .button-primary, .button-secondary { padding: 0.7rem 1.5rem; font-size: 0.9rem; }
        }

    </style>
</head>
<body>

    <header class="kc-header">
        <a href="ctp-dashboard.html" class="return-button">
            <i class="fas fa-arrow-left"></i> <span data-translate="kc_return_dashboard">Return to Dashboard</span>
        </a>
        <!-- Minimal Language Switcher -->
        <div class="language-switcher-minimal">
            <select id="languageSelect" aria-label="Select Language">
                 <option value="en">🇬🇧 English</option>
                 <option value="pt">🇧🇷 Português</option>
                 <option value="zh">🇨🇳 中文</option>
            </select>
        </div>
    </header>

    <main class="dashboard-main">
        <div class="knowledge-check-container fade-in">
            <h2 data-translate="kc24_title"><i class="fas fa-file-alt"></i> Module 24: Writing to Files</h2>
            <p class="kc-instructions" data-translate="kc_instructions">Select the best answer for each question. Score <strong data-translate="kc_pass_score">6 out of 10</strong> to pass.</p>

            <form id="quiz-form">

                <!-- Question 1 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">1.</span> <span data-translate="kc24_q1">Which mode should you use with `open()` to write to a file, completely overwriting its previous content if it exists?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q1" value="a"> <span data-translate="kc24_q1_a">`'r'`</span></label>
                        <label><input type="radio" name="q1" value="b"> <span data-translate="kc24_q1_b">`'a'`</span></label>
                        <label><input type="radio" name="q1" value="c"> <span data-translate="kc24_q1_c">`'w'`</span></label>
                        <label><input type="radio" name="q1" value="d"> <span data-translate="kc24_q1_d">`'x'`</span></label>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">2.</span> <span data-translate="kc24_q2">If you want to add new lines to the end of an existing file without deleting its content, which mode should you use?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q2" value="a"> <span data-translate="kc24_q2_a">`'w'`</span></label>
                        <label><input type="radio" name="q2" value="b"> <span data-translate="kc24_q2_b">`'r+'`</span></label>
                        <label><input type="radio" name="q2" value="c"> <span data-translate="kc24_q2_c">`'a'` (append)</span></label>
                        <label><input type="radio" name="q2" value="d"> <span data-translate="kc24_q2_d">`'r'`</span></label>
                    </div>
                </div>

                <!-- Question 3 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">3.</span> <span data-translate="kc24_q3">What is the primary method used on a file object (e.g., `f`) to write a string into the file?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q3" value="a"> <span data-translate="kc24_q3_a">`f.print("text")`</span></label>
                        <label><input type="radio" name="q3" value="b"> <span data-translate="kc24_q3_b">`f.append("text")`</span></label>
                        <label><input type="radio" name="q3" value="c"> <span data-translate="kc24_q3_c">`f.write("text")`</span></label>
                        <label><input type="radio" name="q3" value="d"> <span data-translate="kc24_q3_d">`f.save("text")`</span></label>
                    </div>
                </div>

                <!-- Question 4 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">4.</span> <span data-translate="kc24_q4">What is the main advantage of using the `with open(...) as f:` structure when working with files?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q4" value="a"> <span data-translate="kc24_q4_a">It automatically reads the entire file content.</span></label>
                        <label><input type="radio" name="q4" value="b"> <span data-translate="kc24_q4_b">It ensures the file is automatically closed, even if errors occur.</span></label>
                        <label><input type="radio" name="q4" value="c"> <span data-translate="kc24_q4_c">It automatically creates the file if it doesn't exist.</span></label>
                        <label><input type="radio" name="q4" value="d"> <span data-translate="kc24_q4_d">It makes the file write operations faster.</span></label>
                    </div>
                </div>

                <!-- Question 5 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">5.</span> <span data-translate="kc24_q5">How do you typically represent a newline character when writing to a text file in Python?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q5" value="a"> <span data-translate="kc24_q5_a">`"<br>"`</span></label>
                        <label><input type="radio" name="q5" value="b"> <span data-translate="kc24_q5_b">`"\\n"`</span></label>
                        <label><input type="radio" name="q5" value="c"> <span data-translate="kc24_q5_c">`"<newline>"`</span></label>
                        <label><input type="radio" name="q5" value="d"> <span data-translate="kc24_q5_d">`"\\r\\n"` (always)</span></label>
                    </div>
                </div>

                <!-- Question 6 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">6.</span> <span data-translate="kc24_q6">What happens if you use `open('my_new_file.txt', 'w')` and the file `my_new_file.txt` does not exist?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q6" value="a"> <span data-translate="kc24_q6_a">Python raises a `FileNotFoundError`.</span></label>
                        <label><input type="radio" name="q6" value="b"> <span data-translate="kc24_q6_b">Python creates the empty file `my_new_file.txt`.</span></label>
                        <label><input type="radio" name="q6" value="c"> <span data-translate="kc24_q6_c">It returns `None` instead of a file object.</span></label>
                        <label><input type="radio" name="q6" value="d"> <span data-translate="kc24_q6_d">It asks the user for permission to create the file.</span></label>
                    </div>
                </div>

                <!-- Question 7 -->
                <div class="question-block">
                    <p class="question-text"><span class="question-number">7.</span> <span data-translate="kc24_q7">Consider this code: `with open('data.txt', 'a') as f: f.write("More data")`. If `data.txt` did not exist before running this, what will be the result?</span></p>
                    <div class="answers">
                        <label><input type="radio" name="q7" value="a"> <span data-translate="kc24_q7_a">An error will occur because 'a' mode cannot create files.</span></label>
                        <label><input type="radio" name="q7" value="b"> <span data-translate="kc24_q7_b">The file `data.txt` will be created and will contain "More data".</span></label>
                        <label><input type="radio" name="q7" value="c"> <span data-translate="kc24_q7_c">The file `data.txt` will be created, but it will be empty.</span></label>
                        <label><input type="radio" name="q7" value="d"> <span data-translate="kc24_q7_d">Nothing will happen, the operation fails silently.</span></label>
                    </div>
                </div>

                 <!-- Question 8 -->
                 <div class="question-block">
                     <p class="question-text"><span class="question-number">8.</span> <span data-translate="kc24_q8">The `f.write()` method expects its argument to be what data type?</span></p>
                     <div class="answers">
                         <label><input type="radio" name="q8" value="a"> <span data-translate="kc24_q8_a">An integer (`int`)</span></label>
                         <label><input type="radio" name="q8" value="b"> <span data-translate="kc24_q8_b">A list (`list`)</span></label>
                         <label><input type="radio" name="q8" value="c"> <span data-translate="kc24_q8_c">A string (`str`)</span></label>
                         <label><input type="radio" name="q8" value="d"> <span data-translate="kc24_q8_d">A boolean (`bool`)</span></label>
                     </div>
                 </div>

                 <!-- Question 9 -->
                 <div class="question-block">
                     <p class="question-text"><span class="question-number">9.</span> <span data-translate="kc24_q9">If you have a list of strings, like `lines = ["First line", "Second line"]`, how would you typically write each string on a new line in a file using `f.write()`?</span></p>
                     <div class="answers">
                         <label><input type="radio" name="q9" value="a"> <span data-translate="kc24_q9_a">`f.write(lines)`</span></label>
                         <label><input type="radio" name="q9" value="b"> <span data-translate="kc24_q9_b">`f.writelines(lines)` (Note: `writelines` does not add newlines automatically)</span></label>
                         <label><input type="radio" name="q9" value="c"> <span data-translate="kc24_q9_c">Use a loop: `for line in lines: f.write(line + "\\n")`</span></label>
                         <label><input type="radio" name="q9" value="d"> <span data-translate="kc24_q9_d">`f.write(str(lines))`</span></label>
                     </div>
                 </div>

                 <!-- Question 10 -->
                 <div class="question-block">
                     <p class="question-text"><span class="question-number">10.</span> <span data-translate="kc24_q10">Forgetting to close a file after writing (when not using `with`) can potentially lead to...?</span></p>
                     <div class="answers">
                         <label><input type="radio" name="q10" value="a"> <span data-translate="kc24_q10_a">The file being automatically deleted by Python.</span></label>
                         <label><input type="radio" name="q10" value="b"> <span data-translate="kc24_q10_b">Data loss, as written data might not be fully flushed from the buffer to the disk.</span></label>
                         <label><input type="radio" name="q10" value="c"> <span data-translate="kc24_q10_c">Faster subsequent read operations.</span></label>
                         <label><input type="radio" name="q10" value="d"> <span data-translate="kc24_q10_d">Improved program performance.</span></label>
                     </div>
                 </div>


                <div class="button-container">
                    <button type="submit" class="button-primary" id="submit-button" data-translate="kc_submit">Submit Answers</button>
                </div>

            </form>

            <div id="results-area">
                <p id="score"></p>
                <p id="feedback"></p>
                <div class="button-container">
                     <button type="button" class="button-secondary" id="retry-button" data-translate="kc_retry">Retry Quiz</button>
                     <a href="ctp-dashboard.html" class="button-secondary" data-translate="kc_back_dash">Back to Dashboard</a>
                 </div>
            </div>
        </div>
    </main>

     <footer>
        <p data-translate="footer_text">Part of the Road to Free Open AGI Project</p>
    </footer>

    <script>
        // --- Translations Object ---
        const translations = {
            en: {
                "page_title_kc24": "Knowledge Check: Module 24 - Writing to Files",
                "kc_return_dashboard": "Return to Dashboard",
                "kc24_title": "Module 24: Writing to Files",
                "kc_instructions": "Select the best answer for each question. Score %s to pass.",
                "kc_pass_score": "6 out of 10",
                "kc_submit": "Submit Answers",
                "kc_retry": "Retry Quiz",
                "kc_back_dash": "Back to Dashboard",
                "kc_feedback_pass": "Congratulations! You passed! (Score: %s/10). Module progress updated.",
                "kc_feedback_fail": "Good effort! You scored %s/10. You need 6 or more to pass. Please review the material and try again!",
                "kc_score_display": "Your Score: %s / 10",
                "footer_text": "Part of the Road to Free Open AGI Project",

                "kc24_q1": "Which mode should you use with `open()` to write to a file, completely overwriting its previous content if it exists?",
                "kc24_q1_a": "`'r'`", "kc24_q1_b": "`'a'`", "kc24_q1_c": "`'w'`", "kc24_q1_d": "`'x'`",

                "kc24_q2": "If you want to add new lines to the end of an existing file without deleting its content, which mode should you use?",
                "kc24_q2_a": "`'w'`", "kc24_q2_b": "`'r+'`", "kc24_q2_c": "`'a'` (append)", "kc24_q2_d": "`'r'`",

                "kc24_q3": "What is the primary method used on a file object (e.g., `f`) to write a string into the file?",
                "kc24_q3_a": "`f.print(\"text\")`", "kc24_q3_b": "`f.append(\"text\")`", "kc24_q3_c": "`f.write(\"text\")`", "kc24_q3_d": "`f.save(\"text\")`",

                "kc24_q4": "What is the main advantage of using the `with open(...) as f:` structure when working with files?",
                "kc24_q4_a": "It automatically reads the entire file content.", "kc24_q4_b": "It ensures the file is automatically closed, even if errors occur.", "kc24_q4_c": "It automatically creates the file if it doesn't exist.", "kc24_q4_d": "It makes the file write operations faster.",

                "kc24_q5": "How do you typically represent a newline character when writing to a text file in Python?",
                "kc24_q5_a": "`\"<br>\"`", "kc24_q5_b": "`\"\\n\"`", "kc24_q5_c": "`\"<newline>\"`", "kc24_q5_d": "`\"\\r\\n\"` (always)",

                "kc24_q6": "What happens if you use `open('my_new_file.txt', 'w')` and the file `my_new_file.txt` does not exist?",
                "kc24_q6_a": "Python raises a `FileNotFoundError`.", "kc24_q6_b": "Python creates the empty file `my_new_file.txt`.", "kc24_q6_c": "It returns `None` instead of a file object.", "kc24_q6_d": "It asks the user for permission to create the file.",

                "kc24_q7": "Consider this code: `with open('data.txt', 'a') as f: f.write(\"More data\")`. If `data.txt` did not exist before running this, what will be the result?",
                "kc24_q7_a": "An error will occur because 'a' mode cannot create files.", "kc24_q7_b": "The file `data.txt` will be created and will contain \"More data\".", "kc24_q7_c": "The file `data.txt` will be created, but it will be empty.", "kc24_q7_d": "Nothing will happen, the operation fails silently.",

                "kc24_q8": "The `f.write()` method expects its argument to be what data type?",
                "kc24_q8_a": "An integer (`int`)", "kc24_q8_b": "A list (`list`)", "kc24_q8_c": "A string (`str`)", "kc24_q8_d": "A boolean (`bool`)",

                "kc24_q9": "If you have a list of strings, like `lines = [\"First line\", \"Second line\"]`, how would you typically write each string on a new line in a file using `f.write()`?",
                "kc24_q9_a": "`f.write(lines)`", "kc24_q9_b": "`f.writelines(lines)` (Note: `writelines` does not add newlines automatically)", "kc24_q9_c": "Use a loop: `for line in lines: f.write(line + \"\\n\")`", "kc24_q9_d": "`f.write(str(lines))`",

                "kc24_q10": "Forgetting to close a file after writing (when not using `with`) can potentially lead to...?",
                "kc24_q10_a": "The file being automatically deleted by Python.", "kc24_q10_b": "Data loss, as written data might not be fully flushed from the buffer to the disk.", "kc24_q10_c": "Faster subsequent read operations.", "kc24_q10_d": "Improved program performance."
            },
            pt: {
                "page_title_kc24": "Verificação de Conhecimento: Módulo 24 - Escrita em Arquivos",
                "kc_return_dashboard": "Voltar ao Painel",
                "kc24_title": "Módulo 24: Escrita em Arquivos",
                "kc_instructions": "Selecione a melhor resposta para cada pergunta. Acerte %s para passar.",
                "kc_pass_score": "6 de 10",
                "kc_submit": "Enviar Respostas",
                "kc_retry": "Tentar Novamente",
                "kc_back_dash": "Voltar ao Painel",
                "kc_feedback_pass": "Parabéns! Você passou! (Pontuação: %s/10). Progresso do módulo atualizado.",
                "kc_feedback_fail": "Bom esforço! Você fez %s/10. Precisa de 6 ou mais para passar. Revise o material e tente novamente!",
                "kc_score_display": "Sua Pontuação: %s / 10",
                "footer_text": "Parte do Projeto Road to Free Open AGI",

                "kc24_q1": "Qual modo você deve usar com `open()` para escrever em um arquivo, sobrescrevendo completamente seu conteúdo anterior se ele existir?",
                "kc24_q1_a": "`'r'`", "kc24_q1_b": "`'a'`", "kc24_q1_c": "`'w'`", "kc24_q1_d": "`'x'`",

                "kc24_q2": "Se você quiser adicionar novas linhas ao final de um arquivo existente sem apagar seu conteúdo, qual modo deve usar?",
                "kc24_q2_a": "`'w'`", "kc24_q2_b": "`'r+'`", "kc24_q2_c": "`'a'` (append/anexar)", "kc24_q2_d": "`'r'`",

                "kc24_q3": "Qual é o método principal usado em um objeto de arquivo (ex: `f`) para escrever uma string no arquivo?",
                "kc24_q3_a": "`f.print(\"texto\")`", "kc24_q3_b": "`f.append(\"texto\")`", "kc24_q3_c": "`f.write(\"texto\")`", "kc24_q3_d": "`f.save(\"texto\")`",

                "kc24_q4": "Qual é a principal vantagem de usar a estrutura `with open(...) as f:` ao trabalhar com arquivos?",
                "kc24_q4_a": "Ela lê automaticamente todo o conteúdo do arquivo.", "kc24_q4_b": "Ela garante que o arquivo seja fechado automaticamente, mesmo que ocorram erros.", "kc24_q4_c": "Ela cria automaticamente o arquivo se ele não existir.", "kc24_q4_d": "Ela torna as operações de escrita no arquivo mais rápidas.",

                "kc24_q5": "Como você representa tipicamente um caractere de nova linha ao escrever em um arquivo de texto em Python?",
                "kc24_q5_a": "`\"<br>\"`", "kc24_q5_b": "`\"\\n\"`", "kc24_q5_c": "`\"<newline>\"`", "kc24_q5_d": "`\"\\r\\n\"` (sempre)",

                "kc24_q6": "O que acontece se você usar `open('meu_novo_arquivo.txt', 'w')` e o arquivo `meu_novo_arquivo.txt` não existir?",
                "kc24_q6_a": "Python levanta um `FileNotFoundError`.", "kc24_q6_b": "Python cria o arquivo vazio `meu_novo_arquivo.txt`.", "kc24_q6_c": "Ele retorna `None` em vez de um objeto de arquivo.", "kc24_q6_d": "Ele pergunta ao usuário permissão para criar o arquivo.",

                "kc24_q7": "Considere este código: `with open('dados.txt', 'a') as f: f.write(\"Mais dados\")`. Se `dados.txt` não existia antes de executar isso, qual será o resultado?",
                "kc24_q7_a": "Ocorrerá um erro porque o modo 'a' não pode criar arquivos.", "kc24_q7_b": "O arquivo `dados.txt` será criado e conterá \"Mais dados\".", "kc24_q7_c": "O arquivo `dados.txt` será criado, mas estará vazio.", "kc24_q7_d": "Nada acontecerá, a operação falha silenciosamente.",

                "kc24_q8": "O método `f.write()` espera que seu argumento seja de qual tipo de dado?",
                "kc24_q8_a": "Um inteiro (`int`)", "kc24_q8_b": "Uma lista (`list`)", "kc24_q8_c": "Uma string (`str`)", "kc24_q8_d": "Um booleano (`bool`)",

                "kc24_q9": "Se você tem uma lista de strings, como `linhas = [\"Primeira linha\", \"Segunda linha\"]`, como você normalmente escreveria cada string em uma nova linha em um arquivo usando `f.write()`?",
                "kc24_q9_a": "`f.write(linhas)`", "kc24_q9_b": "`f.writelines(linhas)` (Obs: `writelines` não adiciona novas linhas automaticamente)", "kc24_q9_c": "Usar um loop: `for linha in linhas: f.write(linha + \"\\n\")`", "kc24_q9_d": "`f.write(str(linhas))`",

                "kc24_q10": "Esquecer de fechar um arquivo após escrever (quando não se usa `with`) pode potencialmente levar a...?",
                "kc24_q10_a": "O arquivo ser automaticamente deletado pelo Python.", "kc24_q10_b": "Perda de dados, pois os dados escritos podem não ter sido totalmente descarregados do buffer para o disco.", "kc24_q10_c": "Operações de leitura subsequentes mais rápidas.", "kc24_q10_d": "Melhora no desempenho do programa."
             },
             zh: {
                "page_title_kc24": "知识测验：模块 24 - 写入文件",
                "kc_return_dashboard": "返回仪表板",
                "kc24_title": "模块 24: 写入文件",
                "kc_instructions": "为每个问题选择最佳答案。达到 %s 分即可通过。",
                "kc_pass_score": "10 分中的 6 分",
                "kc_submit": "提交答案",
                "kc_retry": "重试测验",
                "kc_back_dash": "返回仪表板",
                "kc_feedback_pass": "恭喜！您通过了！(得分: %s/10)。模块进度已更新。",
                "kc_feedback_fail": "还需努力！您的得分是 %s/10。您需要 6 分或以上才能通过。请复习材料后重试！",
                "kc_score_display": "您的得分: %s / 10",
                "footer_text": "通往自由开放AGI之路项目的一部分",

                "kc24_q1": "使用 `open()` 写入文件时，如果文件存在则完全覆盖其先前内容，应使用哪种模式？",
                "kc24_q1_a": "`'r'`", "kc24_q1_b": "`'a'`", "kc24_q1_c": "`'w'`", "kc24_q1_d": "`'x'`",

                "kc24_q2": "如果要在现有文件的末尾添加新行而不删除其内容，应使用哪种模式？",
                "kc24_q2_a": "`'w'`", "kc24_q2_b": "`'r+'`", "kc24_q2_c": "`'a'` (追加)", "kc24_q2_d": "`'r'`",

                "kc24_q3": "在文件对象（例如 `f`）上，用于将字符串写入文件的主要方法是什么？",
                "kc24_q3_a": "`f.print(\"text\")`", "kc24_q3_b": "`f.append(\"text\")`", "kc24_q3_c": "`f.write(\"text\")`", "kc24_q3_d": "`f.save(\"text\")`",

                "kc24_q4": "使用 `with open(...) as f:` 结构处理文件时的主要优点是什么？",
                "kc24_q4_a": "它会自动读取整个文件内容。", "kc24_q4_b": "它确保文件被自动关闭，即使发生错误也是如此。", "kc24_q4_c": "如果文件不存在，它会自动创建文件。", "kc24_q4_d": "它使文件写入操作更快。",

                "kc24_q5": "在 Python 中向文本文件写入时，通常如何表示换行符？",
                "kc24_q5_a": "`\"<br>\"`", "kc24_q5_b": "`\"\\n\"`", "kc24_q5_c": "`\"<newline>\"`", "kc24_q5_d": "`\"\\r\\n\"` (总是)",

                "kc24_q6": "如果使用 `open('my_new_file.txt', 'w')` 并且文件 `my_new_file.txt` 不存在，会发生什么？",
                "kc24_q6_a": "Python 引发 `FileNotFoundError`。", "kc24_q6_b": "Python 创建空文件 `my_new_file.txt`。", "kc24_q6_c": "它返回 `None` 而不是文件对象。", "kc24_q6_d": "它会询问用户是否允许创建文件。",

                "kc24_q7": "考虑这段代码: `with open('data.txt', 'a') as f: f.write(\"More data\")`。如果在运行之前 `data.txt` 不存在，结果会是什么？",
                "kc24_q7_a": "会发生错误，因为 'a' 模式不能创建文件。", "kc24_q7_b": "将创建文件 `data.txt` 并包含 \"More data\"。", "kc24_q7_c": "将创建文件 `data.txt`，但它将是空的。", "kc24_q7_d": "什么都不会发生，操作会静默失败。",

                "kc24_q8": " `f.write()` 方法期望其参数是什么数据类型？",
                "kc24_q8_a": "整数 (`int`)", "kc24_q8_b": "列表 (`list`)", "kc24_q8_c": "字符串 (`str`)", "kc24_q8_d": "布尔值 (`bool`)",

                "kc24_q9": "如果你有一个字符串列表，例如 `lines = [\"First line\", \"Second line\"]`，通常如何使用 `f.write()` 将每个字符串写在新的一行？",
                "kc24_q9_a": "`f.write(lines)`", "kc24_q9_b": "`f.writelines(lines)` (注意: `writelines` 不会自动添加换行符)", "kc24_q9_c": "使用循环: `for line in lines: f.write(line + \"\\n\")`", "kc24_q9_d": "`f.write(str(lines))`",

                "kc24_q10": "写入文件后忘记关闭（未使用 `with` 时）可能会导致...？",
                "kc24_q10_a": "文件被 Python 自动删除。", "kc24_q10_b": "数据丢失，因为写入的数据可能未完全从缓冲区刷新到磁盘。", "kc24_q10_c": "后续读取操作更快。", "kc24_q10_d": "程序性能提高。"
            }
         };

        // --- Quiz Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const quizForm = document.getElementById('quiz-form');
            const resultsArea = document.getElementById('results-area');
            const scoreDisplay = document.getElementById('score');
            const feedbackDisplay = document.getElementById('feedback');
            const retryButton = document.getElementById('retry-button');
            const submitButton = document.getElementById('submit-button');
            const languageSelect = document.getElementById('languageSelect');

            const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
            const CURRENT_MODULE_ID = 24; // <<< Set Module ID here
            const PASSING_SCORE = 6;
            const TOTAL_QUESTIONS = 10; // <<< Set total questions here

            const correctAnswers = { q1: 'c', q2: 'c', q3: 'c', q4: 'b', q5: 'b', q6: 'b', q7: 'b', q8: 'c', q9: 'c', q10: 'b' };

             // --- Language Handling ---
             const LANGUAGE_STORAGE_KEY = 'userLanguage';
             function getStoredLanguage() { const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY); return storedLang && translations[storedLang] ? storedLang : 'en'; }

             function getTranslation(key, lang, replacements = []) {
                let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`;
                replacements.forEach((value, index) => {
                    text = text.replace(`%s`, value); // Simple %s replacement
                });
                return text;
             }

            function translatePage(lang) {
                 if (!translations[lang]) lang = 'en';
                 document.documentElement.lang = lang;
                 languageSelect.value = lang; // Sync dropdown

                 document.querySelectorAll('[data-translate]').forEach(el => {
                     const key = el.getAttribute('data-translate');
                     const replacements = [];
                     if (key === 'kc_instructions' || key === 'kc_feedback_pass' || key === 'kc_feedback_fail' || key === 'kc_score_display') {
                         // Add score values for replacement in specific keys
                         // This part might need adjustment based on when score is known
                         if (key === 'kc_instructions') replacements.push(getTranslation('kc_pass_score', lang));
                         // For feedback/score, replacements are added during score calculation
                     }

                     const translation = getTranslation(key, lang, replacements);

                     if (el.tagName === 'TITLE') { document.title = translation; }
                     else if (translation.includes('<') && translation.includes('>')) { el.innerHTML = translation; } // Allow HTML in translations
                     else { el.textContent = translation; }
                 });
             }

             function setLanguage(lang) {
                 if (!translations[lang]) lang = 'en'; // Fallback
                 localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
                 translatePage(lang);
                 // If results are showing, re-translate them
                 if(resultsArea.style.display !== 'none') {
                     const score = parseInt(scoreDisplay.dataset.score || '0');
                     displayResults(score); // Re-display results with new language
                 }
             }

             languageSelect.addEventListener('change', (e) => setLanguage(e.target.value));
             // Initial load
             const initialLang = getStoredLanguage();
             translatePage(initialLang);


            // --- LocalStorage for Progress ---
            function loadKnowledgeCheckStatus() { try { const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY); const parsed = storedStatus ? JSON.parse(storedStatus) : {}; return typeof parsed === 'object' && parsed !== null ? parsed : {}; } catch (e) { console.error("Error reading KC status from localStorage:", e); return {}; } }
            function saveKnowledgeCheckStatus(statusObject) { try { localStorage.setItem(KNOWLEDGE_CHECK_STORAGE_KEY, JSON.stringify(statusObject)); } catch (e) { console.error("Error saving KC status to localStorage:", e); } }

            function updateModuleProgress() {
                const currentStatus = loadKnowledgeCheckStatus();
                if (currentStatus[CURRENT_MODULE_ID] !== true) { // Only update if not already passed
                    currentStatus[CURRENT_MODULE_ID] = true;
                    saveKnowledgeCheckStatus(currentStatus);
                     console.log(`Module ${CURRENT_MODULE_ID} progress saved.`);
                     return true; // Indicate that progress was updated
                }
                return false; // Progress was already saved
            }


             // --- Quiz Submission and Scoring ---
             function showFeedback() {
                const questionBlocks = quizForm.querySelectorAll('.question-block');
                questionBlocks.forEach((block, index) => {
                    const qName = `q${index + 1}`;
                    const correctAnswer = correctAnswers[qName];
                    const selectedInput = quizForm.querySelector(`input[name="${qName}"]:checked`);
                    const labels = block.querySelectorAll('.answers label');

                    labels.forEach(label => {
                        const input = label.querySelector('input');
                        label.classList.remove('correct', 'incorrect'); // Clear previous feedback
                         if (input.value === correctAnswer) {
                            label.classList.add('correct'); // Mark correct option
                        }
                        if (selectedInput && selectedInput.value !== correctAnswer && input.value === selectedInput.value) {
                            label.classList.add('incorrect'); // Mark selected wrong option
                        }
                        // Disable inputs after showing feedback
                        input.disabled = true;
                    });
                });
             }


            function displayResults(score) {
                const lang = getStoredLanguage();
                const passed = score >= PASSING_SCORE;
                let feedbackText = '';
                let progressUpdated = false;

                scoreDisplay.textContent = getTranslation('kc_score_display', lang, [score]);
                scoreDisplay.dataset.score = score; // Store score for re-translation

                resultsArea.classList.remove('pass', 'fail'); // Clear previous classes

                if (passed) {
                    progressUpdated = updateModuleProgress(); // Try to update progress
                    feedbackText = getTranslation('kc_feedback_pass', lang, [score]);
                    resultsArea.classList.add('pass');
                } else {
                    feedbackText = getTranslation('kc_feedback_fail', lang, [score]);
                    resultsArea.classList.add('fail');
                }

                feedbackDisplay.textContent = feedbackText;
                resultsArea.style.display = 'block';
                submitButton.style.display = 'none'; // Hide submit button
                showFeedback(); // Highlight correct/incorrect answers
            }

            quizForm.addEventListener('submit', (event) => {
                event.preventDefault();
                let score = 0;
                const formData = new FormData(quizForm);

                for (const [name, value] of formData.entries()) {
                    if (correctAnswers[name] === value) {
                        score++;
                    }
                }
                displayResults(score);
                window.scrollTo({ top: resultsArea.offsetTop - 80, behavior: 'smooth' }); // Scroll to results
            });

             // --- Retry Logic ---
            retryButton.addEventListener('click', () => {
                resultsArea.style.display = 'none';
                submitButton.style.display = 'inline-block';
                quizForm.reset(); // Clear selected answers
                 // Re-enable inputs and clear feedback classes
                 const questionBlocks = quizForm.querySelectorAll('.question-block');
                 questionBlocks.forEach(block => {
                    const labels = block.querySelectorAll('.answers label');
                    labels.forEach(label => {
                        label.classList.remove('correct', 'incorrect');
                        const input = label.querySelector('input');
                        if (input) input.disabled = false;
                     });
                 });
                 window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll back to top
             });
        });
    </script>

</body>
</html>
