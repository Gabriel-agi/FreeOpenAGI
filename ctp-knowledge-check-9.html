<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Knowledge Check - Module 9</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Copied from dashboard) --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --info-color: #0dcaf0;
            --check-color: #6f42c1; /* Purple for checks */
            --certificate-color: #d63384;
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 6px 18px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
             /* Colors for lang switcher */
             --lang-select-border: var(--certificate-color);
             --lang-select-bg: rgba(255, 255, 255, 0.1);
             --lang-select-bg-hover: rgba(255, 255, 255, 0.15);
             --lang-option-bg: var(--background-card);
             --lang-option-text: var(--text-dark);
             --lang-arrow-color: var(--certificate-color);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            padding-top: 80px; /* Space for fixed header */
        }

        /* --- Header Elements --- */
        .kc-header {
            background: var(--background-card);
            padding: 1rem 1.5rem;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 0.95rem;
            padding: 0.5rem 1rem;
            border: 1px solid var(--primary-color);
            border-radius: var(--border-radius);
            transition: all var(--transition-speed) ease;
        }
        .back-link i { margin-right: 8px; }
        .back-link:hover { background-color: var(--primary-color); color: var(--text-light); }

        .header-controls { display: flex; align-items: center; gap: 1rem; }

        .language-switcher select {
            background: var(--background-card);
            color: var(--text-dark);
            border: 1px solid var(--lang-select-border);
            border-radius: 5px;
            padding: 8px 35px 8px 15px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--certificate-color').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 10px auto;
            transition: border-color 0.3s ease;
        }
        .language-switcher select:hover { border-color: #b02a6e; }
        .language-switcher select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); }

        /* --- Knowledge Check Container --- */
        .kc-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }

        .kc-container h1 {
            font-family: var(--font-title);
            color: var(--check-color);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .kc-instructions {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }
        .kc-instructions strong { color: var(--text-dark); }
        .kc-instructions code { font-size: 0.9em; background: #eee; padding: 1px 4px; border-radius: 3px; }

        /* --- Question Styling --- */
        .question-block {
            margin-bottom: 1.8rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px dashed var(--border-color);
        }
        .question-block:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 1rem;
            font-size: 1.05rem;
        }
        .question-text code {
            background-color: #e9ecef;
            padding: 0.1em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
            color: #c7254e;
        }

        .options label {
            display: block;
            margin-bottom: 0.7rem;
            padding: 0.6rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
            position: relative; /* For feedback icon */
        }
        .options label:hover {
            background-color: #f8f9fa;
            border-color: var(--secondary-color);
        }
        .options input[type="radio"] {
            margin-right: 10px;
            accent-color: var(--check-color);
            vertical-align: middle;
        }
         .options .option-text {
            vertical-align: middle;
            color: var(--text-dark);
        }
         .options code {
            background-color: #e9ecef;
            padding: 0.1em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
            color: #c7254e;
        }


        /* --- Feedback Styling --- */
        .feedback {
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }
        .feedback.correct {
            background-color: #d1e7dd; /* Light green */
            color: #0f5132; /* Dark green */
            border: 1px solid #badbcc;
        }
        .feedback.incorrect {
            background-color: #f8d7da; /* Light red */
            color: #842029; /* Dark red */
            border: 1px solid #f5c2c7;
        }
        /* Add icons to options AFTER submission */
        .options label.correct-answer::after {
            content: '\f00c'; /* Checkmark */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: var(--success-color);
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1rem;
        }
         .options label.incorrect-selection::after {
            content: '\f00d'; /* X mark */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: var(--error-color);
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1rem;
        }
         .options label.correct-answer {
            border-color: var(--success-color);
             background-color: #e9f7ef; /* Lighter green background */
         }
        .options label.incorrect-selection {
            border-color: var(--error-color);
             background-color: #fdedee; /* Lighter red background */
        }

        /* --- Results Area --- */
        #kc-results {
            margin-top: 2.5rem;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: #f8f9fa;
            text-align: center;
            display: none; /* Hidden by default */
        }
        #kc-results h2 {
            font-family: var(--font-title);
            margin-bottom: 1rem;
            color: var(--text-dark);
        }
        #score-display {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        #pass-fail-status {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        #pass-fail-status.pass { color: var(--success-color); }
        #pass-fail-status.fail { color: var(--error-color); }
        #result-message { color: var(--text-muted); margin-bottom: 1.5rem; }

        /* --- Buttons --- */
        .kc-button {
            background-color: var(--check-color);
            color: var(--text-light);
            border: none;
            padding: 0.8rem 1.8rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color var(--transition-speed), transform var(--transition-speed);
            display: inline-block; /* Center using text-align on parent */
            margin-top: 1rem;
        }
        .kc-button:hover {
            background-color: #5a359a; /* Darker purple */
            transform: scale(1.03);
        }
        .kc-button:disabled {
            background-color: var(--secondary-color);
            cursor: not-allowed;
            transform: none;
        }
        #retry-button {
             background-color: var(--secondary-color);
         }
        #retry-button:hover {
            background-color: #5a6268;
        }
        .submit-area { text-align: center; } /* Center the submit button */

        /* --- Responsive --- */
        @media (max-width: 768px) {
            body { padding-top: 70px; }
            .kc-header { padding: 0.8rem 1rem; flex-wrap: wrap; gap: 0.5rem; }
            .back-link { padding: 0.4rem 0.8rem; font-size: 0.9rem; }
            .language-switcher select { padding: 6px 30px 6px 12px; font-size: 0.85rem; }
            .kc-container { margin: 1rem; padding: 1.5rem; }
            .kc-container h1 { font-size: 1.5rem; }
            .kc-instructions { font-size: 0.9rem; }
            .question-text { font-size: 1rem; }
            .options label { padding: 0.5rem 0.8rem; }
            .kc-button { padding: 0.7rem 1.5rem; font-size: 0.95rem; }
        }
         @media (max-width: 480px) {
             body { padding-top: 100px; } /* Adjust if header wraps significantly */
             .kc-header { justify-content: center; } /* Center items if they wrap */
             .back-link { width: 100%; justify-content: center; margin-bottom: 0.5rem; }
             .kc-container { padding: 1rem; }
             .kc-container h1 { font-size: 1.3rem; }
             .options label { font-size: 0.9rem; } /* Make option text slightly smaller */
             .options label.correct-answer::after,
             .options label.incorrect-selection::after { font-size: 1rem; right: 10px;}
         }

    </style>
</head>
<body>

    <header class="kc-header">
         <a href="ctp-dashboard.html" class="back-link">
            <i class="fas fa-arrow-left"></i> <span data-translate="back_to_dashboard">Back to Dashboard</span>
        </a>
        <div class="header-controls">
             <!-- Language Switcher -->
            <div class="language-switcher">
                <select id="languageSelect" data-translate-aria-label="lang_select_aria" aria-label="Select Language">
                    <option value="en" data-translate="lang_en">🇬🇧 English</option>
                    <option value="pt" data-translate="lang_pt">🇧🇷 Português</option>
                    <option value="zh" data-translate="lang_zh">🇨🇳 中文</option>
                </select>
            </div>
        </div>
    </header>

    <div class="kc-container">
        <h1 data-translate="kc9_title">Knowledge Check: Module 9</h1>
        <p class="kc-instructions">
            <span data-translate="kc_instructions_1">Test your understanding of combining conditions using</span> <code>and</code>, <code>or</code>, <span data-translate="kc_instructions_2">and</span> <code>not</code>.
            <br>
            <span data-translate="kc_instructions_3">You need <strong>6 out of 10</strong> correct answers to pass. Good luck!</span>
        </p>

        <form id="knowledge-check-form">

            <!-- Question 1 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">1. </span><span data-translate="kc9_q1_text">What is the result of the following expression:</span> <code>True and False</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> <span class="option-text" data-translate="kc9_q1_opta">True</span></label>
                    <label><input type="radio" name="q1" value="b"> <span class="option-text" data-translate="kc9_q1_optb">False</span></label>
                    <label><input type="radio" name="q1" value="c"> <span class="option-text" data-translate="kc9_q1_optc">None</span></label>
                    <label><input type="radio" name="q1" value="d"> <span class="option-text" data-translate="kc9_q1_optd">Error</span></label>
                </div>
                <div class="feedback" data-feedback-for="q1"></div>
            </div>

            <!-- Question 2 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">2. </span><span data-translate="kc9_q2_text">What is the result of the following expression:</span> <code>True or False</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> <span class="option-text" data-translate="kc9_q2_opta">True</span></label>
                    <label><input type="radio" name="q2" value="b"> <span class="option-text" data-translate="kc9_q2_optb">False</span></label>
                    <label><input type="radio" name="q2" value="c"> <span class="option-text" data-translate="kc9_q2_optc">None</span></label>
                    <label><input type="radio" name="q2" value="d"> <span class="option-text" data-translate="kc9_q2_optd">Error</span></label>
                </div>
                <div class="feedback" data-feedback-for="q2"></div>
            </div>

            <!-- Question 3 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">3. </span><span data-translate="kc9_q3_text">What is the result of the following expression:</span> <code>not True</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> <span class="option-text" data-translate="kc9_q3_opta">True</span></label>
                    <label><input type="radio" name="q3" value="b"> <span class="option-text" data-translate="kc9_q3_optb">False</span></label>
                    <label><input type="radio" name="q3" value="c"> <span class="option-text" data-translate="kc9_q3_optc">None</span></label>
                    <label><input type="radio" name="q3" value="d"> <span class="option-text" data-translate="kc9_q3_optd">Error</span></label>
                </div>
                <div class="feedback" data-feedback-for="q3"></div>
            </div>

            <!-- Question 4 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">4. </span><span data-translate="kc9_q4_text">Consider</span> <code>x = 5</code> <span data-translate="kc9_q4_text_2">and</span> <code>y = 10</code>. <span data-translate="kc9_q4_text_3">What is the result of</span> <code>x > 3 and y < 15</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> <span class="option-text" data-translate="kc9_q4_opta">True</span></label>
                    <label><input type="radio" name="q4" value="b"> <span class="option-text" data-translate="kc9_q4_optb">False</span></label>
                    <label><input type="radio" name="q4" value="c"> <span class="option-text" data-translate="kc9_q4_optc">5</span></label>
                    <label><input type="radio" name="q4" value="d"> <span class="option-text" data-translate="kc9_q4_optd">10</span></label>
                </div>
                <div class="feedback" data-feedback-for="q4"></div>
            </div>

            <!-- Question 5 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">5. </span><span data-translate="kc9_q5_text">What is the result of</span> <code>True or False and False</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> <span class="option-text" data-translate="kc9_q5_opta">True</span></label>
                    <label><input type="radio" name="q5" value="b"> <span class="option-text" data-translate="kc9_q5_optb">False</span></label>
                    <label><input type="radio" name="q5" value="c"> <span class="option-text" data-translate="kc9_q5_optc">None</span></label>
                    <label><input type="radio" name="q5" value="d"> <span class="option-text" data-translate="kc9_q5_optd">Error</span></label>
                </div>
                 <div class="feedback" data-feedback-for="q5"></div>
           </div>

            <!-- Question 6 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">6. </span><span data-translate="kc9_q6_text">Consider</span> <code>a = 0</code> <span data-translate="kc9_q6_text_2">and</span> <code>b = "hello"</code>. <span data-translate="kc9_q6_text_3">What is the result of</span> <code>a or b</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> <span class="option-text"><code>0</code></span></label>
                    <label><input type="radio" name="q6" value="b"> <span class="option-text"><code>"hello"</code></span></label>
                    <label><input type="radio" name="q6" value="c"> <span class="option-text" data-translate="kc9_q6_optc">True</span></label>
                    <label><input type="radio" name="q6" value="d"> <span class="option-text" data-translate="kc9_q6_optd">False</span></label>
                </div>
                 <div class="feedback" data-feedback-for="q6"></div>
           </div>

            <!-- Question 7 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">7. </span><span data-translate="kc9_q7_text">Which operator has the highest precedence among</span> <code>and</code>, <code>or</code>, <span data-translate="kc9_q7_text_2">and</span> <code>not</code>?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> <span class="option-text"><code>and</code></span></label>
                    <label><input type="radio" name="q7" value="b"> <span class="option-text"><code>or</code></span></label>
                    <label><input type="radio" name="q7" value="c"> <span class="option-text"><code>not</code></span></label>
                    <label><input type="radio" name="q7" value="d"> <span class="option-text" data-translate="kc9_q7_optd">They have the same precedence</span></label>
                </div>
                 <div class="feedback" data-feedback-for="q7"></div>
            </div>

            <!-- Question 8 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">8. </span><span data-translate="kc9_q8_text">What is the result of</span> <code>not (True and False)</code>?</p>
                 <div class="options">
                    <label><input type="radio" name="q8" value="a"> <span class="option-text" data-translate="kc9_q8_opta">True</span></label>
                    <label><input type="radio" name="q8" value="b"> <span class="option-text" data-translate="kc9_q8_optb">False</span></label>
                    <label><input type="radio" name="q8" value="c"> <span class="option-text" data-translate="kc9_q8_optc">None</span></label>
                    <label><input type="radio" name="q8" value="d"> <span class="option-text" data-translate="kc9_q8_optd">Error</span></label>
                </div>
                <div class="feedback" data-feedback-for="q8"></div>
            </div>

            <!-- Question 9 -->
            <div class="question-block">
                 <p class="question-text"><span class="q-number">9. </span><span data-translate="kc9_q9_text">Consider</span> <code>age = 20</code>. <span data-translate="kc9_q9_text_2">Which expression checks if age is between 18 (inclusive) and 65 (exclusive)?</span></p>
                 <div class="options">
                    <label><input type="radio" name="q9" value="a"> <span class="option-text"><code>age >= 18 or age < 65</code></span></label>
                    <label><input type="radio" name="q9" value="b"> <span class="option-text"><code>age > 18 and age < 65</code></span></label>
                    <label><input type="radio" name="q9" value="c"> <span class="option-text"><code>age >= 18 and age < 65</code></span></label>
                    <label><input type="radio" name="q9" value="d"> <span class="option-text"><code>not (age < 18 or age >= 65)</code></span></label>
                </div>
                <div class="feedback" data-feedback-for="q9"></div>
            </div>

            <!-- Question 10 -->
            <div class="question-block">
                <p class="question-text"><span class="q-number">10. </span><span data-translate="kc9_q10_text">What does the expression</span> <code>"" or "default"</code> <span data-translate="kc9_q10_text_2">evaluate to? (Empty string is considered Falsy)</span></p>
                 <div class="options">
                    <label><input type="radio" name="q10" value="a"> <span class="option-text"><code>""</code></span></label>
                    <label><input type="radio" name="q10" value="b"> <span class="option-text"><code>"default"</code></span></label>
                    <label><input type="radio" name="q10" value="c"> <span class="option-text" data-translate="kc9_q10_optc">True</span></label>
                    <label><input type="radio" name="q10" value="d"> <span class="option-text" data-translate="kc9_q10_optd">False</span></label>
                </div>
                <div class="feedback" data-feedback-for="q10"></div>
            </div>

            <div class="submit-area">
                <button type="submit" id="submit-button" class="kc-button" data-translate="submit_button">Submit Answers</button>
            </div>
        </form>

        <div id="kc-results">
            <h2 data-translate="results_title">Results</h2>
            <p id="score-display">Your score: 0 / 10</p>
            <p id="pass-fail-status"></p>
            <p id="result-message"></p>
            <button id="retry-button" class="kc-button" data-translate="retry_button">Try Again</button>
        </div>
    </div>

    <script>
        const translations = {
            en: {
                "page_title": "Knowledge Check - Module 9: Combining Conditions",
                "back_to_dashboard": "Back to Dashboard",
                "lang_select_aria": "Select Language",
                "lang_en": "🇬🇧 English",
                "lang_pt": "🇧🇷 Português",
                "lang_zh": "🇨🇳 中文",
                "kc9_title": "Knowledge Check: Module 9 - Combining Conditions",
                "kc_instructions_1": "Test your understanding of combining conditions using",
                "kc_instructions_2": "and",
                "kc_instructions_3": "You need <strong>6 out of 10</strong> correct answers to pass. Good luck!",
                "kc9_q1_text": "What is the result of the following expression:",
                "kc9_q1_opta": "True", "kc9_q1_optb": "False", "kc9_q1_optc": "None", "kc9_q1_optd": "Error",
                "kc9_q2_text": "What is the result of the following expression:",
                "kc9_q2_opta": "True", "kc9_q2_optb": "False", "kc9_q2_optc": "None", "kc9_q2_optd": "Error",
                "kc9_q3_text": "What is the result of the following expression:",
                "kc9_q3_opta": "True", "kc9_q3_optb": "False", "kc9_q3_optc": "None", "kc9_q3_optd": "Error",
                "kc9_q4_text": "Consider", "kc9_q4_text_2": "and", "kc9_q4_text_3": "What is the result of",
                "kc9_q4_opta": "True", "kc9_q4_optb": "False", "kc9_q4_optc": "5", "kc9_q4_optd": "10",
                "kc9_q5_text": "What is the result of",
                "kc9_q5_opta": "True", "kc9_q5_optb": "False", "kc9_q5_optc": "None", "kc9_q5_optd": "Error",
                "kc9_q6_text": "Consider", "kc9_q6_text_2": "and", "kc9_q6_text_3": "What is the result of",
                "kc9_q6_optc": "True", "kc9_q6_optd": "False", /* a and b are code */
                "kc9_q7_text": "Which operator has the highest precedence among", "kc9_q7_text_2": "and",
                "kc9_q7_optd": "They have the same precedence", /* a, b, c are code */
                "kc9_q8_text": "What is the result of",
                "kc9_q8_opta": "True", "kc9_q8_optb": "False", "kc9_q8_optc": "None", "kc9_q8_optd": "Error",
                "kc9_q9_text": "Consider", "kc9_q9_text_2": "Which expression checks if age is between 18 (inclusive) and 65 (exclusive)?",
                /* Options are code */
                "kc9_q10_text": "What does the expression", "kc9_q10_text_2": "evaluate to? (Empty string is considered Falsy)",
                "kc9_q10_optc": "True", "kc9_q10_optd": "False", /* a and b are code */
                "submit_button": "Submit Answers",
                "results_title": "Results",
                "score_message": "Your score: {score} / 10",
                "status_pass": "Passed!",
                "status_fail": "Not Passed Yet",
                "result_message_pass": "Great job! You've passed this knowledge check. Your progress has been updated.",
                "result_message_fail": "Keep trying! Review the material and try the check again.",
                "feedback_correct": "Correct!",
                "feedback_incorrect": "Incorrect. The correct answer was: {correct_option}",
                "retry_button": "Try Again"
            },
            pt: {
                "page_title": "Verificação de Conhecimento - Módulo 9: Combinando Condições",
                "back_to_dashboard": "Voltar ao Painel",
                "lang_select_aria": "Selecionar Idioma",
                "lang_en": "🇬🇧 English",
                "lang_pt": "🇧🇷 Português",
                "lang_zh": "🇨🇳 中文",
                "kc9_title": "Verificação de Conhecimento: Módulo 9 - Combinando Condições",
                "kc_instructions_1": "Teste seu entendimento sobre combinar condições usando",
                "kc_instructions_2": "e",
                "kc_instructions_3": "Você precisa de <strong>6 de 10</strong> respostas corretas para passar. Boa sorte!",
                "kc9_q1_text": "Qual é o resultado da seguinte expressão:",
                "kc9_q1_opta": "True", "kc9_q1_optb": "False", "kc9_q1_optc": "None", "kc9_q1_optd": "Erro",
                "kc9_q2_text": "Qual é o resultado da seguinte expressão:",
                "kc9_q2_opta": "True", "kc9_q2_optb": "False", "kc9_q2_optc": "None", "kc9_q2_optd": "Erro",
                "kc9_q3_text": "Qual é o resultado da seguinte expressão:",
                "kc9_q3_opta": "True", "kc9_q3_optb": "False", "kc9_q3_optc": "None", "kc9_q3_optd": "Erro",
                "kc9_q4_text": "Considere", "kc9_q4_text_2": "e", "kc9_q4_text_3": "Qual é o resultado de",
                "kc9_q4_opta": "True", "kc9_q4_optb": "False", "kc9_q4_optc": "5", "kc9_q4_optd": "10",
                "kc9_q5_text": "Qual é o resultado de",
                "kc9_q5_opta": "True", "kc9_q5_optb": "False", "kc9_q5_optc": "None", "kc9_q5_optd": "Erro",
                "kc9_q6_text": "Considere", "kc9_q6_text_2": "e", "kc9_q6_text_3": "Qual é o resultado de",
                "kc9_q6_optc": "Verdadeiro", "kc9_q6_optd": "Falso", /* a e b são código */
                "kc9_q7_text": "Qual operador tem a maior precedência entre", "kc9_q7_text_2": "e",
                "kc9_q7_optd": "Eles têm a mesma precedência", /* a, b, c são código */
                "kc9_q8_text": "Qual é o resultado de",
                "kc9_q8_opta": "True", "kc9_q8_optb": "False", "kc9_q8_optc": "None", "kc9_q8_optd": "Erro",
                "kc9_q9_text": "Considere", "kc9_q9_text_2": "Qual expressão verifica se a idade está entre 18 (inclusivo) e 65 (exclusivo)?",
                /* Opções são código */
                "kc9_q10_text": "O que a expressão", "kc9_q10_text_2": "avalia? (String vazia é considerada Falsy)",
                "kc9_q10_optc": "Verdadeiro", "kc9_q10_optd": "Falso", /* a e b são código */
                "submit_button": "Enviar Respostas",
                "results_title": "Resultados",
                "score_message": "Sua pontuação: {score} / 10",
                "status_pass": "Aprovado!",
                "status_fail": "Ainda Não Aprovado",
                "result_message_pass": "Ótimo trabalho! Você passou nesta verificação. Seu progresso foi atualizado.",
                "result_message_fail": "Continue tentando! Revise o material e tente a verificação novamente.",
                "feedback_correct": "Correto!",
                "feedback_incorrect": "Incorreto. A resposta correta era: {correct_option}",
                "retry_button": "Tentar Novamente"
            },
             zh: {
                "page_title": "知识测验 - 模块 9: 组合条件",
                "back_to_dashboard": "返回仪表板",
                "lang_select_aria": "选择语言",
                "lang_en": "🇬🇧 English",
                "lang_pt": "🇧🇷 Português",
                "lang_zh": "🇨🇳 中文",
                "kc9_title": "知识测验: 模块 9 - 组合条件",
                "kc_instructions_1": "测试你对使用",
                "kc_instructions_2": "和",
                "kc_instructions_3": "你需要答对 <strong>10 题中的 6 题</strong> 才能通过。祝你好运！",
                "kc9_q1_text": "以下表达式的结果是什么：",
                "kc9_q1_opta": "True", "kc9_q1_optb": "False", "kc9_q1_optc": "None", "kc9_q1_optd": "错误",
                "kc9_q2_text": "以下表达式的结果是什么：",
                "kc9_q2_opta": "True", "kc9_q2_optb": "False", "kc9_q2_optc": "None", "kc9_q2_optd": "错误",
                "kc9_q3_text": "以下表达式的结果是什么：",
                "kc9_q3_opta": "True", "kc9_q3_optb": "False", "kc9_q3_optc": "None", "kc9_q3_optd": "错误",
                "kc9_q4_text": "假设", "kc9_q4_text_2": "且", "kc9_q4_text_3": "的结果是什么？",
                "kc9_q4_opta": "True", "kc9_q4_optb": "False", "kc9_q4_optc": "5", "kc9_q4_optd": "10",
                "kc9_q5_text": "的结果是什么？",
                "kc9_q5_opta": "True", "kc9_q5_optb": "False", "kc9_q5_optc": "None", "kc9_q5_optd": "错误",
                "kc9_q6_text": "假设", "kc9_q6_text_2": "且", "kc9_q6_text_3": "的结果是什么？",
                "kc9_q6_optc": "True", "kc9_q6_optd": "False", /* a 和 b 是代码 */
                "kc9_q7_text": "在", "kc9_q7_text_2": "和", "中，哪个运算符的优先级最高？",
                "kc9_q7_optd": "它们的优先级相同", /* a, b, c 是代码 */
                "kc9_q8_text": "的结果是什么？",
                "kc9_q8_opta": "True", "kc9_q8_optb": "False", "kc9_q8_optc": "None", "kc9_q8_optd": "错误",
                "kc9_q9_text": "假设", "kc9_q9_text_2": "哪个表达式检查年龄是否在 18 (含) 和 65 (不含) 之间？",
                /* 选项是代码 */
                "kc9_q10_text": "表达式", "kc9_q10_text_2": "的计算结果是什么？ (空字符串被视为 Falsy)",
                "kc9_q10_optc": "True", "kc9_q10_optd": "False", /* a 和 b 是代码 */
                "submit_button": "提交答案",
                "results_title": "结果",
                "score_message": "你的得分: {score} / 10",
                "status_pass": "已通过！",
                "status_fail": "尚未通过",
                "result_message_pass": "做得好！你已通过本次知识测验。你的进度已更新。",
                "result_message_fail": "继续努力！复习相关内容后再次尝试测验。",
                "feedback_correct": "正确！",
                "feedback_incorrect": "错误。正确答案是: {correct_option}",
                "retry_button": "再次尝试"
            }
        };

        // --- Knowledge Check Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const MODULE_ID = 9;
            const PASSING_SCORE = 6;
            const TOTAL_QUESTIONS = 10;
            const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
            const LANGUAGE_STORAGE_KEY = 'userLanguage';

            const form = document.getElementById('knowledge-check-form');
            const resultsDiv = document.getElementById('kc-results');
            const scoreDisplay = document.getElementById('score-display');
            const passFailStatus = document.getElementById('pass-fail-status');
            const resultMessage = document.getElementById('result-message');
            const submitButton = document.getElementById('submit-button');
            const retryButton = document.getElementById('retry-button');
            const languageSelect = document.getElementById('languageSelect');

            const correctAnswers = {
                q1: 'b', q2: 'a', q3: 'b', q4: 'a', q5: 'a',
                q6: 'b', q7: 'c', q8: 'a', q9: 'c', q10: 'b'
            };

             // --- Translation Functions (Copied & Adapted) ---
            function getStoredLanguage() { /* ... (same as dashboard) ... */
                const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY);
                if (storedLang && translations[storedLang]) return storedLang;
                const browserLang = navigator.language || navigator.userLanguage;
                if (browserLang.startsWith('pt')) return 'pt';
                if (browserLang.startsWith('zh')) return 'zh';
                return 'en';
            }

            function setLanguage(lang) { /* ... (same as dashboard) ... */
                if (!translations[lang]) lang = 'en'; // Fallback
                localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
                document.documentElement.lang = lang;
                languageSelect.value = lang; // Update dropdown
                translatePage(lang);
                // If results are showing, re-translate them
                if (resultsDiv.style.display === 'block') {
                    const score = parseInt(scoreDisplay.textContent.match(/(\d+)\s*\//)?.[1] || '0');
                    const passed = passFailStatus.classList.contains('pass');
                    displayResults(score, passed, lang); // Re-display results with new language
                }
                // Re-translate feedback if shown
                 document.querySelectorAll('.feedback').forEach(feedbackEl => {
                    if (feedbackEl.style.display === 'block') {
                        const questionName = feedbackEl.getAttribute('data-feedback-for');
                        const isCorrect = feedbackEl.classList.contains('correct');
                        const correctOptValue = correctAnswers[questionName];
                        const correctOptLabel = form.querySelector(`input[name="${questionName}"][value="${correctOptValue}"]`).parentNode;
                        const correctOptText = correctOptLabel.querySelector('.option-text').textContent.trim() || correctOptLabel.querySelector('code')?.outerHTML;

                         if (isCorrect) {
                            feedbackEl.textContent = getTranslation('feedback_correct', lang);
                         } else {
                             feedbackEl.textContent = getTranslation('feedback_incorrect', lang, { correct_option: correctOptText });
                         }
                    }
                 });
            }

            function getTranslation(key, lang, replacements = {}) { /* ... (same as dashboard) ... */
                 let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`;
                 for (const placeholder in replacements) {
                     const regex = new RegExp(`\\{${placeholder}\\}`, 'g');
                     text = text.replace(regex, replacements[placeholder]);
                 }
                 return text;
            }

            function translatePage(lang) { /* ... (same as dashboard, maybe slightly simplified) ... */
                if (!translations[lang]) lang = 'en';
                document.querySelectorAll('[data-translate]').forEach(el => {
                    const key = el.getAttribute('data-translate');
                    const translation = getTranslation(key, lang);
                    if (el.tagName === 'TITLE') {
                        document.title = translation;
                    } else if (translation.includes('<') && translation.includes('>')) { // Handle HTML in translations (like instructions)
                        el.innerHTML = translation;
                     } else {
                        // Check if it's an option text, might contain <code>
                         if (el.classList.contains('option-text') && el.querySelector('code')) {
                            // Don't translate if it's just code, parent loop handles text part
                         } else {
                             el.textContent = translation;
                         }
                    }
                });
                document.querySelectorAll('[data-translate-placeholder]').forEach(el => { const key = el.getAttribute('data-translate-placeholder'); el.setAttribute('placeholder', getTranslation(key, lang)); });
                document.querySelectorAll('[data-translate-aria-label]').forEach(el => { const key = el.getAttribute('data-translate-aria-label'); el.setAttribute('aria-label', getTranslation(key, lang)); });

                 // Translate option text specifically, handling potential code elements
                form.querySelectorAll('.options label').forEach(label => {
                    const span = label.querySelector('span.option-text');
                    const code = label.querySelector('code');
                    if (span && span.hasAttribute('data-translate')) {
                         const key = span.getAttribute('data-translate');
                         span.textContent = getTranslation(key, lang);
                    } else if (span && !code) {
                         // Handle cases where option is just text without data-translate (maybe legacy or missed)
                         // console.warn("Option text without data-translate:", span.textContent);
                    }
                    // Code elements inside options are usually not translated directly
                 });
            }

            // --- Storage Functions ---
             function loadKnowledgeCheckStatus() { try { const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY); const parsed = storedStatus ? JSON.parse(storedStatus) : {}; return typeof parsed === 'object' && parsed !== null ? parsed : {}; } catch (e) { console.error("Error reading KC status from localStorage:", e); return {}; } }
             function saveKnowledgeCheckStatus(statusObject) { try { localStorage.setItem(KNOWLEDGE_CHECK_STORAGE_KEY, JSON.stringify(statusObject)); } catch (e) { console.error("Error saving KC status to localStorage:", e); } }

            // --- Quiz Logic ---
            function displayResults(score, passed, lang) {
                const currentLang = lang || getStoredLanguage();
                scoreDisplay.textContent = getTranslation('score_message', currentLang, { score: score });
                passFailStatus.textContent = passed ? getTranslation('status_pass', currentLang) : getTranslation('status_fail', currentLang);
                passFailStatus.className = passed ? 'pass' : 'fail';
                resultMessage.textContent = passed ? getTranslation('result_message_pass', currentLang) : getTranslation('result_message_fail', currentLang);
                resultsDiv.style.display = 'block';
                submitButton.disabled = true;
                submitButton.style.display = 'none'; // Hide submit after attempt
                retryButton.style.display = 'inline-block'; // Show retry
            }

            function showFeedback(selectedAnswers, lang) {
                const currentLang = lang || getStoredLanguage();
                 form.querySelectorAll('.question-block').forEach(block => {
                    const questionName = block.querySelector('input[type="radio"]').name;
                    const correctAnswerValue = correctAnswers[questionName];
                    const selectedValue = selectedAnswers[questionName];
                    const feedbackEl = block.querySelector('.feedback');
                    const options = block.querySelectorAll('.options label');

                    options.forEach(label => {
                        const input = label.querySelector('input');
                        label.classList.remove('correct-answer', 'incorrect-selection'); // Clear previous states
                        input.disabled = true; // Disable options after submission

                        if (input.value === correctAnswerValue) {
                            label.classList.add('correct-answer');
                        }
                        if (input.value === selectedValue && selectedValue !== correctAnswerValue) {
                             label.classList.add('incorrect-selection');
                        }
                    });

                    const correctOptLabel = block.querySelector(`input[value="${correctAnswerValue}"]`).parentNode;
                    // Get text content, preferring span, fallback to code, then direct label text
                    const correctOptText = correctOptLabel.querySelector('.option-text')?.textContent.trim() || correctOptLabel.querySelector('code')?.outerHTML || correctOptLabel.textContent.trim();


                     if (selectedValue === correctAnswerValue) {
                        feedbackEl.textContent = getTranslation('feedback_correct', currentLang);
                        feedbackEl.className = 'feedback correct';
                     } else if (selectedValue) {
                        feedbackEl.textContent = getTranslation('feedback_incorrect', currentLang, { correct_option: correctOptText });
                        feedbackEl.className = 'feedback incorrect';
                     } else {
                        // Handle unanswered questions if needed, though radios usually have a default or force selection
                        feedbackEl.textContent = getTranslation('feedback_incorrect', currentLang, { correct_option: correctOptText }) + " (You didn't answer)"; // Example
                        feedbackEl.className = 'feedback incorrect';
                    }
                     feedbackEl.style.display = 'block';
                });
            }

            function resetQuiz() {
                form.reset();
                resultsDiv.style.display = 'none';
                submitButton.disabled = false;
                submitButton.style.display = 'inline-block';
                retryButton.style.display = 'none';

                 form.querySelectorAll('.question-block').forEach(block => {
                    block.querySelector('.feedback').style.display = 'none';
                    block.querySelectorAll('.options label').forEach(label => {
                        label.classList.remove('correct-answer', 'incorrect-selection');
                         label.querySelector('input').disabled = false;
                    });
                 });
                 // Scroll back to the top
                 window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function handleSubmit(event) {
                event.preventDefault();
                const formData = new FormData(form);
                let score = 0;
                const selectedAnswers = {};

                for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                    const qName = `q${i}`;
                    const answer = formData.get(qName);
                    selectedAnswers[qName] = answer;
                    if (answer === correctAnswers[qName]) {
                        score++;
                    }
                }

                const passed = score >= PASSING_SCORE;
                const currentLang = getStoredLanguage();

                showFeedback(selectedAnswers, currentLang);
                displayResults(score, passed, currentLang);

                if (passed) {
                    const currentStatus = loadKnowledgeCheckStatus();
                    currentStatus[MODULE_ID] = true; // Mark this module as complete
                    saveKnowledgeCheckStatus(currentStatus);
                }
            }

            // --- Event Listeners ---
            form.addEventListener('submit', handleSubmit);
            retryButton.addEventListener('click', resetQuiz);
            languageSelect.addEventListener('change', (e) => {
                setLanguage(e.target.value);
            });

            // --- Initial Load ---
             const initialLang = getStoredLanguage();
            languageSelect.value = initialLang; // Set dropdown to stored/detected lang
            setLanguage(initialLang); // Translate page on load
        });

    </script>

</body>
</html>