<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Knowledge Check: Module 16</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Copied from dashboard, slightly adapted) --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --background-sidebar: #ffffff; /* Not used directly, but kept for consistency */
            --background-header: linear-gradient(135deg, #0d6efd, #0a58ca);
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --info-color: #0dcaf0;
            --check-color: #6f42c1; /* Knowledge Check color */
            --certificate-color: #d63384;
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 6px 18px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            /* Colors for lang switcher */
             --lang-select-border: var(--certificate-color);
             --lang-select-bg: rgba(255, 255, 255, 0.1);
             --lang-select-bg-hover: rgba(255, 255, 255, 0.15);
             --lang-option-bg: var(--background-card);
             --lang-option-text: var(--text-dark);
             --lang-arrow-color: var(--certificate-color);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            overflow-x: hidden;
        }

        /* --- Quiz Page Specific Header/Layout --- */
        .quiz-header {
            background: var(--background-header);
            color: var(--text-light);
            padding: 1.5rem 1.5rem 1rem 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .quiz-header h1 {
            font-family: var(--font-title);
            font-size: 1.8rem; /* Slightly smaller than dashboard */
            margin: 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        .quiz-header .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background-color: rgba(255, 255, 255, 0.15);
            color: var(--text-light);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--border-radius);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color var(--transition-speed);
        }
        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.25);
            color: var(--text-light);
        }
        .back-button i { margin-right: 6px; }
        .language-switcher { /* Simplified for header placement */ }
        #languageSelect {
            background: var(--lang-select-bg);
            color: var(--text-light);
            border: 1px solid var(--lang-select-border);
            border-radius: 5px;
            padding: 6px 30px 6px 12px; /* Adjusted padding */
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--certificate-color').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 8px auto;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }
         #languageSelect:hover { background-color: var(--lang-select-bg-hover); border-color: #e75480;}
         #languageSelect:focus { outline: none; border-color: var(--accent-color); }
         #languageSelect option { background: var(--lang-option-bg); color: var(--lang-option-text); }


        .quiz-container {
            max-width: 900px; /* Wider for questions */
            margin: 0 auto;
            padding: 1.5rem;
            background-color: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }

        .quiz-instructions {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed var(--border-color);
        }
        .quiz-instructions strong { color: var(--text-dark); }
        .quiz-instructions .pass-score { color: var(--success-color); font-weight: bold; }
        .quiz-instructions .retake-info { color: var(--info-color); font-weight: bold; }

        #quiz-form { display: flex; flex-direction: column; gap: 2.5rem; }

        .question-block {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1.5rem;
        }
        .question-block:last-of-type { border-bottom: none; }

        .question-block h4 {
            font-size: 1.15rem;
            color: var(--text-dark);
            margin-bottom: 1rem;
            font-weight: 500;
        }
        .question-block h4 .question-number {
            display: inline-block;
            background-color: var(--check-color);
            color: var(--text-light);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            line-height: 28px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: bold;
            margin-right: 10px;
        }

        .options { display: flex; flex-direction: column; gap: 0.8rem; }
        .option {
            display: flex;
            align-items: center;
            background-color: #f8f9fa;
            padding: 0.8rem 1rem;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .option:hover { background-color: #e9ecef; }
        .option input[type="radio"] { margin-right: 10px; accent-color: var(--check-color); transform: scale(1.1); cursor: pointer;}
        .option label { flex-grow: 1; cursor: pointer; color: var(--text-dark); font-size: 0.95rem;}
        .option label code {
             background-color: #e0e0e0;
             padding: 0.1em 0.4em;
             border-radius: 3px;
             font-size: 0.9em;
             color: #333;
             border: 1px solid #ccc;
        }
        /* Style for code blocks within questions or options */
        pre {
            background-color: #282c34; /* Dark background for code */
            color: #abb2bf; /* Light text */
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 0.8rem 0;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            border: 1px solid #444;
        }
        pre code { background-color: transparent; color: inherit; padding: 0; border: none; font-size: inherit;}


        .submit-button-container {
            margin-top: 2rem;
            text-align: center;
        }
        #submit-quiz {
            background-color: var(--check-color);
            color: var(--text-light);
            border: none;
            padding: 0.8rem 2rem;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color var(--transition-speed), transform 0.1s ease;
        }
        #submit-quiz:hover { background-color: #5a35a4; }
        #submit-quiz:active { transform: scale(0.98); }
        #submit-quiz:disabled { background-color: var(--secondary-color); cursor: not-allowed; opacity: 0.7; }


        #quiz-results {
            margin-top: 2.5rem;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            text-align: center;
            display: none; /* Initially hidden */
        }
        #quiz-results.results-pass { background-color: #d1e7dd; border-color: #a3cfbb; }
        #quiz-results.results-fail { background-color: #f8d7da; border-color: #f1aeae; }

        #quiz-results h3 {
            font-family: var(--font-title);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        #quiz-results h3.pass { color: var(--success-color); }
        #quiz-results h3.fail { color: var(--error-color); }

        #score-display { font-size: 1.2rem; margin-bottom: 1rem; color: var(--text-dark); }
        #score-display strong { font-size: 1.4rem; }
        #result-message { font-size: 1rem; color: var(--text-muted); }
        #result-message.pass { color: var(--success-color); font-weight: 500;}
        #result-message.fail { color: var(--error-color); font-weight: 500;}

        .result-actions { margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem; }
        .result-actions .retry-button {
            background-color: var(--accent-color); color: #333; border:none; padding: 0.6rem 1.5rem; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; font-weight: 500;
        }
         .result-actions .retry-button:hover { background-color: #e0a800; }
         .result-actions .dashboard-button {
            background-color: var(--secondary-color); color: white; border:none; padding: 0.6rem 1.5rem; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; font-weight: 500; text-decoration: none;
         }
         .result-actions .dashboard-button:hover { background-color: #5a6268; }


        /* Footer */
        footer { text-align: center; padding: 1.5rem; margin-top: 3rem; background-color: var(--background-card); border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }

        /* Responsive */
        @media (max-width: 768px) {
            .quiz-header h1 { font-size: 1.5rem; }
            .quiz-container { padding: 1rem; }
            .question-block h4 { font-size: 1.05rem; }
            .option label { font-size: 0.9rem; }
            pre { font-size: 0.85rem; padding: 0.8rem; }
            .result-actions { flex-direction: column; }
        }
         @media (max-width: 576px) {
            .quiz-header { flex-direction: column; gap: 1rem; padding-bottom: 1.5rem; }
            .quiz-header h1 { text-align: center; }
             .header-controls { width: 100%; justify-content: space-between; }
            #submit-quiz { width: 100%; padding: 0.7rem 1rem; }
            .result-actions button, .result-actions a { width: 80%; margin: 0 auto; }
         }

    </style>
</head>
<body>

    <header class="quiz-header">
        <h1 data-translate="quiz_page_title">Knowledge Check: Module 16</h1>
        <div class="header-controls">
             <a href="ctp-dashboard.html" class="back-button">
                 <i class="fas fa-arrow-left"></i> <span data-translate="back_button">Back to Dashboard</span>
             </a>
             <div class="language-switcher">
                 <select id="languageSelect" data-translate-aria-label="lang_select_aria" aria-label="Select Language">
                    <option value="en" data-translate="lang_en">🇬🇧 English</option>
                    <option value="pt" data-translate="lang_pt">🇧🇷 Português</option>
                    <option value="zh" data-translate="lang_zh">🇨🇳 中文</option>
                 </select>
             </div>
        </div>
    </header>

    <main class="quiz-container">
        <p class="quiz-instructions" data-translate="quiz_instructions">
            Answer the following <strong>10 questions</strong> about Module 16: Defining Simple Functions.
            You need to score at least <strong class="pass-score">6 out of 10</strong> to pass this check.
            You can <strong class="retake-info">retake this check as many times</strong> as you need. Good luck!
        </p>

        <form id="quiz-form">
            <!-- Question 1 -->
            <div class="question-block">
                <h4 data-translate="q1_question"><span class="question-number">1</span> Which keyword is used to start the definition of a function in Python?</h4>
                <div class="options">
                    <div class="option"><input type="radio" id="q1_a" name="q1" value="a"><label for="q1_a" data-translate="q1_a"><code>function</code></label></div>
                    <div class="option"><input type="radio" id="q1_b" name="q1" value="b"><label for="q1_b" data-translate="q1_b"><code>define</code></label></div>
                    <div class="option"><input type="radio" id="q1_c" name="q1" value="c"><label for="q1_c" data-translate="q1_c"><code>def</code></label></div>
                    <div class="option"><input type="radio" id="q1_d" name="q1" value="d"><label for="q1_d" data-translate="q1_d"><code>fun</code></label></div>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="question-block">
                <h4 data-translate="q2_question"><span class="question-number">2</span> What follows the function name in a function definition line?</h4>
                <div class="options">
                    <div class="option"><input type="radio" id="q2_a" name="q2" value="a"><label for="q2_a" data-translate="q2_a">A colon <code>:</code></label></div>
                    <div class="option"><input type="radio" id="q2_b" name="q2" value="b"><label for="q2_b" data-translate="q2_b">Parentheses <code>()</code></label></div>
                    <div class="option"><input type="radio" id="q2_c" name="q2" value="c"><label for="q2_c" data-translate="q2_c">Curly braces <code>{}</code></label></div>
                    <div class="option"><input type="radio" id="q2_d" name="q2" value="d"><label for="q2_d" data-translate="q2_d">Square brackets <code>[]</code></label></div>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-block">
                <h4 data-translate="q3_question"><span class="question-number">3</span> What character must end the first line of a function definition (the <code>def</code> line)?</h4>
                <div class="options">
                    <div class="option"><input type="radio" id="q3_a" name="q3" value="a"><label for="q3_a" data-translate="q3_a">Semicolon <code>;</code></label></div>
                    <div class="option"><input type="radio" id="q3_b" name="q3" value="b"><label for="q3_b" data-translate="q3_b">Period <code>.</code></label></div>
                    <div class="option"><input type="radio" id="q3_c" name="q3" value="c"><label for="q3_c" data-translate="q3_c">Comma <code>,</code></label></div>
                    <div class="option"><input type="radio" id="q3_d" name="q3" value="d"><label for="q3_d" data-translate="q3_d">Colon <code>:</code></label></div>
                </div>
            </div>

             <!-- Question 4 -->
             <div class="question-block">
                <h4 data-translate="q4_question"><span class="question-number">4</span> How does Python know which lines of code belong inside a function?</h4>
                <div class="options">
                    <div class="option"><input type="radio" id="q4_a" name="q4" value="a"><label for="q4_a" data-translate="q4_a">By using curly braces <code>{}</code></label></div>
                    <div class="option"><input type="radio" id="q4_b" name="q4" value="b"><label for="q4_b" data-translate="q4_b">By using indentation (spaces or tabs)</label></div>
                    <div class="option"><input type="radio" id="q4_c" name="q4" value="c"><label for="q4_c" data-translate="q4_c">By using keywords <code>begin</code> and <code>end</code></label></div>
                    <div class="option"><input type="radio" id="q4_d" name="q4" value="d"><label for="q4_d" data-translate="q4_d">By numbering the lines</label></div>
                </div>
            </div>

             <!-- Question 5 -->
             <div class="question-block">
                 <h4 data-translate="q5_question"><span class="question-number">5</span> What does it mean to "call" a function?</h4>
                 <div class="options">
                    <div class="option"><input type="radio" id="q5_a" name="q5" value="a"><label for="q5_a" data-translate="q5_a">To define the function using <code>def</code></label></div>
                    <div class="option"><input type="radio" id="q5_b" name="q5" value="b"><label for="q5_b" data-translate="q5_b">To delete the function from memory</label></div>
                    <div class="option"><input type="radio" id="q5_c" name="q5" value="c"><label for="q5_c" data-translate="q5_c">To execute the code inside the function</label></div>
                    <div class="option"><input type="radio" id="q5_d" name="q5" value="d"><label for="q5_d" data-translate="q5_d">To rename the function</label></div>
                 </div>
            </div>

             <!-- Question 6 -->
             <div class="question-block">
                 <h4 data-translate="q6_question"><span class="question-number">6</span> Consider this code:
<pre><code>def greet():
    print("Hello there!")

greet()</code></pre>
                 What is the output?</h4>
                 <div class="options">
                    <div class="option"><input type="radio" id="q6_a" name="q6" value="a"><label for="q6_a" data-translate="q6_a"><code>greet()</code></label></div>
                    <div class="option"><input type="radio" id="q6_b" name="q6" value="b"><label for="q6_b" data-translate="q6_b"><code>Hello there!</code></label></div>
                    <div class="option"><input type="radio" id="q6_c" name="q6" value="c"><label for="q6_c" data-translate="q6_c"><code>print("Hello there!")</code></label></div>
                    <div class="option"><input type="radio" id="q6_d" name="q6" value="d"><label for="q6_d" data-translate="q6_d">There is no output.</label></div>
                 </div>
            </div>

             <!-- Question 7 -->
             <div class="question-block">
                 <h4 data-translate="q7_question"><span class="question-number">7</span> Which of the following is a primary benefit of using functions in programming?</h4>
                 <div class="options">
                    <div class="option"><input type="radio" id="q7_a" name="q7" value="a"><label for="q7_a" data-translate="q7_a">Making the code run slower.</label></div>
                    <div class="option"><input type="radio" id="q7_b" name="q7" value="b"><label for="q7_b" data-translate="q7_b">Increasing the file size of the program.</label></div>
                    <div class="option"><input type="radio" id="q7_c" name="q7" value="c"><label for="q7_c" data-translate="q7_c">Making the code harder to understand.</label></div>
                    <div class="option"><input type="radio" id="q7_d" name="q7" value="d"><label for="q7_d" data-translate="q7_d">Allowing code reuse and improving organization.</label></div>
                 </div>
            </div>

            <!-- Question 8 -->
            <div class="question-block">
                 <h4 data-translate="q8_question"><span class="question-number">8</span> What happens if you define a function but never call it in your script?</h4>
                 <div class="options">
                    <div class="option"><input type="radio" id="q8_a" name="q8" value="a"><label for="q8_a" data-translate="q8_a">Python automatically calls it once at the end.</label></div>
                    <div class="option"><input type="radio" id="q8_b" name="q8" value="b"><label for="q8_b" data-translate="q8_b">The code inside the function definition will not be executed.</label></div>
                    <div class="option"><input type="radio" id="q8_c" name="q8" value="c"><label for="q8_c" data-translate="q8_c">It causes a syntax error.</label></div>
                    <div class="option"><input type="radio" id="q8_d" name="q8" value="d"><label for="q8_d" data-translate="q8_d">Python deletes the function definition automatically.</label></div>
                 </div>
            </div>

            <!-- Question 9 -->
            <div class="question-block">
                 <h4 data-translate="q9_question"><span class="question-number">9</span> Which of the following shows the correct way to CALL a function named <code>calculate_area</code>?</h4>
                 <div class="options">
                    <div class="option"><input type="radio" id="q9_a" name="q9" value="a"><label for="q9_a" data-translate="q9_a"><code>def calculate_area():</code></label></div>
                    <div class="option"><input type="radio" id="q9_b" name="q9" value="b"><label for="q9_b" data-translate="q9_b"><code>calculate_area:</code></label></div>
                    <div class="option"><input type="radio" id="q9_c" name="q9" value="c"><label for="q9_c" data-translate="q9_c"><code>call calculate_area()</code></label></div>
                    <div class="option"><input type="radio" id="q9_d" name="q9" value="d"><label for="q9_d" data-translate="q9_d"><code>calculate_area()</code></label></div>
                 </div>
            </div>

            <!-- Question 10 -->
            <div class="question-block">
                 <h4 data-translate="q10_question"><span class="question-number">10</span> Can a function definition include a call to another already defined function?</h4>
                 <div class="options">
                    <div class="option"><input type="radio" id="q10_a" name="q10" value="a"><label for="q10_a" data-translate="q10_a">Yes, functions can call other functions.</label></div>
                    <div class="option"><input type="radio" id="q10_b" name="q10" value="b"><label for="q10_b" data-translate="q10_b">No, functions must be completely self-contained.</label></div>
                    <div class="option"><input type="radio" id="q10_c" name="q10" value="c"><label for="q10_c" data-translate="q10_c">Only if the other function is defined *after* the calling function.</label></div>
                    <div class="option"><input type="radio" id="q10_d" name="q10" value="d"><label for="q10_d" data-translate="q10_d">Only built-in Python functions can be called from within other functions.</label></div>
                 </div>
            </div>


            <div class="submit-button-container">
                <button type="submit" id="submit-quiz" data-translate="submit_button">Check Answers</button>
            </div>
        </form>

        <div id="quiz-results">
            <h3 id="result-title"></h3>
            <p id="score-display" data-translate="score_display_text">Your score: <strong id="score">0/10</strong></p>
            <p id="result-message"></p>
            <div class="result-actions">
                <button class="retry-button" id="retry-quiz-button" data-translate="retry_button" style="display: none;">Try Again</button>
                <a href="ctp-dashboard.html" class="dashboard-button" data-translate="back_button_results" style="display: none;">Back to Dashboard</a>
            </div>
        </div>

    </main>

    <footer>
        <p data-translate="footer_text">Part of the Road to Free Open AGI Project</p>
    </footer>

    <script>
        const MODULE_ID = 16; // <<< Set the Module ID for this specific check
        const PASSING_SCORE = 6;
        const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
        const LANGUAGE_STORAGE_KEY = 'userLanguage';

        // --- Quiz Data ---
        const quizData = [
            { id: 'q1', correctAnswer: 'c' }, { id: 'q2', correctAnswer: 'b' },
            { id: 'q3', correctAnswer: 'd' }, { id: 'q4', correctAnswer: 'b' },
            { id: 'q5', correctAnswer: 'c' }, { id: 'q6', correctAnswer: 'b' },
            { id: 'q7', correctAnswer: 'd' }, { id: 'q8', correctAnswer: 'b' },
            { id: 'q9', correctAnswer: 'd' }, { id: 'q10', correctAnswer: 'a' }
        ];

        // --- Translations Object ---
        const translations = {
             en: {
                 "page_title": `Knowledge Check: Module ${MODULE_ID} - Defining Simple Functions`,
                 "quiz_page_title": `Knowledge Check: Module ${MODULE_ID}`,
                 "back_button": "Back to Dashboard",
                 "lang_select_aria": "Select Language",
                 "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
                 "quiz_instructions": `Answer the following <strong>10 questions</strong> about Module ${MODULE_ID}: Defining Simple Functions. You need to score at least <strong class="pass-score">6 out of 10</strong> to pass this check. You can <strong class="retake-info">retake this check as many times</strong> as you need. Good luck!`,
                 "q1_question": "Which keyword is used to start the definition of a function in Python?", "q1_a": "<code>function</code>", "q1_b": "<code>define</code>", "q1_c": "<code>def</code>", "q1_d": "<code>fun</code>",
                 "q2_question": "What follows the function name in a function definition line?", "q2_a": "A colon <code>:</code>", "q2_b": "Parentheses <code>()</code>", "q2_c": "Curly braces <code>{}</code>", "q2_d": "Square brackets <code>[]</code>",
                 "q3_question": "What character must end the first line of a function definition (the <code>def</code> line)?", "q3_a": "Semicolon <code>;</code>", "q3_b": "Period <code>.</code>", "q3_c": "Comma <code>,</code>", "q3_d": "Colon <code>:</code>",
                 "q4_question": "How does Python know which lines of code belong inside a function?", "q4_a": "By using curly braces <code>{}</code>", "q4_b": "By using indentation (spaces or tabs)", "q4_c": "By using keywords <code>begin</code> and <code>end</code>", "q4_d": "By numbering the lines",
                 "q5_question": "What does it mean to \"call\" a function?", "q5_a": "To define the function using <code>def</code>", "q5_b": "To delete the function from memory", "q5_c": "To execute the code inside the function", "q5_d": "To rename the function",
                 "q6_question": "Consider this code:\n<pre><code>def greet():\n    print(\"Hello there!\")\n\ngreet()</code></pre>\nWhat is the output?", "q6_a": "<code>greet()</code>", "q6_b": "<code>Hello there!</code>", "q6_c": "<code>print(\"Hello there!\")</code>", "q6_d": "There is no output.",
                 "q7_question": "Which of the following is a primary benefit of using functions in programming?", "q7_a": "Making the code run slower.", "q7_b": "Increasing the file size of the program.", "q7_c": "Making the code harder to understand.", "q7_d": "Allowing code reuse and improving organization.",
                 "q8_question": "What happens if you define a function but never call it in your script?", "q8_a": "Python automatically calls it once at the end.", "q8_b": "The code inside the function definition will not be executed.", "q8_c": "It causes a syntax error.", "q8_d": "Python deletes the function definition automatically.",
                 "q9_question": "Which of the following shows the correct way to CALL a function named <code>calculate_area</code>?", "q9_a": "<code>def calculate_area():</code>", "q9_b": "<code>calculate_area:</code>", "q9_c": "<code>call calculate_area()</code>", "q9_d": "<code>calculate_area()</code>",
                 "q10_question": "Can a function definition include a call to another already defined function?", "q10_a": "Yes, functions can call other functions.", "q10_b": "No, functions must be completely self-contained.", "q10_c": "Only if the other function is defined *after* the calling function.", "q10_d": "Only built-in Python functions can be called from within other functions.",
                 "submit_button": "Check Answers",
                 "score_display_text": "Your score: <strong id='score'>{score}/10</strong>",
                 "result_title_pass": "Passed!", "result_title_fail": "Try Again",
                 "result_message_pass": "Congratulations! You passed the knowledge check for Module {moduleId}.",
                 "result_message_fail": "You need {passingScore} correct answers to pass. Keep trying, you'll get it!",
                 "retry_button": "Try Again",
                 "back_button_results": "Back to Dashboard",
                 "footer_text": "Part of the Road to Free Open AGI Project"
             },
             pt: {
                 "page_title": `Verificação de Conhecimento: Módulo ${MODULE_ID} - Definindo Funções Simples`,
                 "quiz_page_title": `Verificação: Módulo ${MODULE_ID}`,
                 "back_button": "Voltar ao Painel",
                 "lang_select_aria": "Selecionar Idioma",
                 "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
                 "quiz_instructions": `Responda às <strong>10 perguntas</strong> a seguir sobre o Módulo ${MODULE_ID}: Definindo Funções Simples. Você precisa acertar pelo menos <strong class="pass-score">6 de 10</strong> para passar. Você pode <strong class="retake-info">refazer esta verificação quantas vezes</strong> precisar. Boa sorte!`,
                 "q1_question": "Qual palavra-chave é usada para iniciar a definição de uma função em Python?", "q1_a": "<code>function</code>", "q1_b": "<code>define</code>", "q1_c": "<code>def</code>", "q1_d": "<code>fun</code>",
                 "q2_question": "O que segue o nome da função na linha de definição da função?", "q2_a": "Dois pontos <code>:</code>", "q2_b": "Parênteses <code>()</code>", "q2_c": "Chaves <code>{}</code>", "q2_d": "Colchetes <code>[]</code>",
                 "q3_question": "Qual caractere deve terminar a primeira linha de uma definição de função (a linha <code>def</code>)?", "q3_a": "Ponto e vírgula <code>;</code>", "q3_b": "Ponto <code>.</code>", "q3_c": "Vírgula <code>,</code>", "q3_d": "Dois pontos <code>:</code>",
                 "q4_question": "Como o Python sabe quais linhas de código pertencem a uma função?", "q4_a": "Usando chaves <code>{}</code>", "q4_b": "Usando indentação (espaços ou tabs)", "q4_c": "Usando as palavras-chave <code>begin</code> e <code>end</code>", "q4_d": "Numerando as linhas",
                 "q5_question": "O que significa \"chamar\" uma função?", "q5_a": "Definir a função usando <code>def</code>", "q5_b": "Excluir a função da memória", "q5_c": "Executar o código dentro da função", "q5_d": "Renomear a função",
                 "q6_question": "Considere este código:\n<pre><code>def greet():\n    print(\"Olá!\")\n\ngreet()</code></pre>\nQual é a saída?", "q6_a": "<code>greet()</code>", "q6_b": "<code>Olá!</code>", "q6_c": "<code>print(\"Olá!\")</code>", "q6_d": "Não há saída.",
                 "q7_question": "Qual dos seguintes é um benefício principal de usar funções na programação?", "q7_a": "Tornar o código mais lento.", "q7_b": "Aumentar o tamanho do arquivo do programa.", "q7_c": "Tornar o código mais difícil de entender.", "q7_d": "Permitir o reuso de código e melhorar a organização.",
                 "q8_question": "O que acontece se você definir uma função, mas nunca a chamar em seu script?", "q8_a": "O Python a chama automaticamente uma vez no final.", "q8_b": "O código dentro da definição da função não será executado.", "q8_c": "Causa um erro de sintaxe.", "q8_d": "O Python exclui a definição da função automaticamente.",
                 "q9_question": "Qual das seguintes opções mostra a maneira correta de CHAMAR uma função chamada <code>calculate_area</code>?", "q9_a": "<code>def calculate_area():</code>", "q9_b": "<code>calculate_area:</code>", "q9_c": "<code>call calculate_area()</code>", "q9_d": "<code>calculate_area()</code>",
                 "q10_question": "Uma definição de função pode incluir uma chamada para outra função já definida?", "q10_a": "Sim, funções podem chamar outras funções.", "q10_b": "Não, funções devem ser completamente autônomas.", "q10_c": "Apenas se a outra função for definida *depois* da função chamadora.", "q10_d": "Apenas funções embutidas do Python podem ser chamadas de dentro de outras funções.",
                 "submit_button": "Verificar Respostas",
                 "score_display_text": "Sua pontuação: <strong id='score'>{score}/10</strong>",
                 "result_title_pass": "Aprovado!", "result_title_fail": "Tente Novamente",
                 "result_message_pass": "Parabéns! Você passou na verificação de conhecimento do Módulo {moduleId}.",
                 "result_message_fail": "Você precisa de {passingScore} respostas corretas para passar. Continue tentando, você consegue!",
                 "retry_button": "Tentar Novamente",
                 "back_button_results": "Voltar ao Painel",
                 "footer_text": "Parte do Projeto Road to Free Open AGI"
             },
             zh: {
                 "page_title": `知识测验: 模块 ${MODULE_ID} - 定义简单函数`,
                 "quiz_page_title": `知识测验: 模块 ${MODULE_ID}`,
                 "back_button": "返回仪表板",
                 "lang_select_aria": "选择语言",
                 "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
                 "quiz_instructions": `回答以下关于模块 ${MODULE_ID}: 定义简单函数的 <strong>10 个问题</strong>。您需要至少答对 <strong class="pass-score">10 题中的 6 题</strong> 才能通过此测验。您可以根据需要 <strong class="retake-info">多次重试</strong>。祝您好运！`,
                 "q1_question": "在 Python 中，使用哪个关键字来开始定义一个函数？", "q1_a": "<code>function</code>", "q1_b": "<code>define</code>", "q1_c": "<code>def</code>", "q1_d": "<code>fun</code>",
                 "q2_question": "在函数定义行中，函数名后面跟着什么？", "q2_a": "冒号 <code>:</code>", "q2_b": "圆括号 <code>()</code>", "q2_c": "花括号 <code>{}</code>", "q2_d": "方括号 <code>[]</code>",
                 "q3_question": "函数定义的第一行（<code>def</code> 行）必须以哪个字符结尾？", "q3_a": "分号 <code>;</code>", "q3_b": "句点 <code>.</code>", "q3_c": "逗号 <code>,</code>", "q3_d": "冒号 <code>:</code>",
                 "q4_question": "Python 如何知道哪些代码行属于函数内部？", "q4_a": "通过使用花括号 <code>{}</code>", "q4_b": "通过使用缩进（空格或制表符）", "q4_c": "通过使用关键字 <code>begin</code> 和 <code>end</code>", "q4_d": "通过给行编号",
                 "q5_question": "“调用”函数是什么意思？", "q5_a": "使用 <code>def</code> 定义函数", "q5_b": "从内存中删除函数", "q5_c": "执行函数内部的代码", "q5_d": "重命名函数",
                 "q6_question": "考虑这段代码:\n<pre><code>def greet():\n    print(\"你好！\")\n\ngreet()</code></pre>\n输出是什么？", "q6_a": "<code>greet()</code>", "q6_b": "<code>你好！</code>", "q6_c": "<code>print(\"你好！\")</code>", "q6_d": "没有输出。",
                 "q7_question": "以下哪项是在编程中使用函数的主要好处？", "q7_a": "使代码运行更慢。", "q7_b": "增加程序的文件大小。", "q7_c": "使代码更难理解。", "q7_d": "允许代码重用并改进组织结构。",
                 "q8_question": "如果您定义了一个函数但在脚本中从未调用它，会发生什么？", "q8_a": "Python 会在最后自动调用它一次。", "q8_b": "函数定义内部的代码将不会被执行。", "q8_c": "会导致语法错误。", "q8_d": "Python 会自动删除函数定义。",
                 "q9_question": "以下哪个选项显示了调用名为 <code>calculate_area</code> 的函数的正确方法？", "q9_a": "<code>def calculate_area():</code>", "q9_b": "<code>calculate_area:</code>", "q9_c": "<code>call calculate_area()</code>", "q9_d": "<code>calculate_area()</code>",
                 "q10_question": "函数定义中可以包含对另一个已定义函数的调用吗？", "q10_a": "是的，函数可以调用其他函数。", "q10_b": "不，函数必须是完全自包含的。", "q10_c": "仅当另一个函数在调用函数*之后*定义时。", "q10_d": "只有 Python 内置函数可以从其他函数内部调用。",
                 "submit_button": "检查答案",
                 "score_display_text": "您的得分: <strong id='score'>{score}/10</strong>",
                 "result_title_pass": "通过！", "result_title_fail": "再试一次",
                 "result_message_pass": "恭喜！您通过了模块 {moduleId} 的知识测验。",
                 "result_message_fail": "您需要答对 {passingScore} 题才能通过。继续努力，您能行的！",
                 "retry_button": "再试一次",
                 "back_button_results": "返回仪表板",
                 "footer_text": "通往自由开放AGI之路项目的一部分"
             }
         };


        // --- Translation & Language Functions (Adapted from dashboard) ---
        function getStoredLanguage() { const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY); return storedLang && translations[storedLang] ? storedLang : 'en'; }

        function setLanguage(lang) {
            if (!translations[lang]) lang = 'en'; // Fallback
            localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
            document.documentElement.lang = lang;
            if (document.getElementById('languageSelect')) document.getElementById('languageSelect').value = lang;
            translatePage(lang); // Retranslate the page
            // Update results text if already shown
            const resultsDiv = document.getElementById('quiz-results');
            if (resultsDiv.style.display !== 'none') {
                const score = parseInt(document.getElementById('score').textContent.split('/')[0]); // Re-get score
                updateResultsUI(score, lang); // Update text based on new language
            }
        }

         function getTranslation(key, lang, replacements = {}) { let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`; for (const placeholder in replacements) { const regex = new RegExp(`\\{${placeholder}\\}`, 'g'); text = text.replace(regex, replacements[placeholder]); } return text; }

        function translatePage(lang) {
            if (!translations[lang]) lang = 'en';
            document.querySelectorAll('[data-translate]').forEach(el => { const key = el.getAttribute('data-translate'); const replacements = {}; // Add replacements here if needed later
                 // Special handling for score display to keep the score number
                if (key === 'score_display_text' && document.getElementById('score')) {
                     const scoreEl = document.getElementById('score');
                     const currentScoreText = scoreEl.textContent; // e.g., "6/10"
                     const template = getTranslation(key, lang, {}); // Gets "Your score: <strong id='score'>{score}/10</strong>"
                     el.innerHTML = template.replace('{score}', currentScoreText);
                 } else {
                    const translation = getTranslation(key, lang, replacements);
                    if (el.tagName === 'TITLE') { document.title = translation; }
                     else if (translation.includes('<') && translation.includes('>')) { el.innerHTML = translation; }
                     else { el.textContent = translation; }
                }
             });
             document.querySelectorAll('[data-translate-placeholder]').forEach(el => { const key = el.getAttribute('data-translate-placeholder'); el.setAttribute('placeholder', getTranslation(key, lang)); });
             document.querySelectorAll('[data-translate-aria-label]').forEach(el => { const key = el.getAttribute('data-translate-aria-label'); el.setAttribute('aria-label', getTranslation(key, lang)); });
        }


        // --- LocalStorage Functions ---
        function loadKnowledgeCheckStatus() { try { const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY); const parsed = storedStatus ? JSON.parse(storedStatus) : {}; return typeof parsed === 'object' && parsed !== null ? parsed : {}; } catch (e) { console.error("Error reading KC status from localStorage:", e); return {}; } }
        function saveKnowledgeCheckStatus(statusObject) { try { localStorage.setItem(KNOWLEDGE_CHECK_STORAGE_KEY, JSON.stringify(statusObject)); } catch (e) { console.error("Error saving KC status to localStorage:", e); } }

        // --- Quiz Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const quizForm = document.getElementById('quiz-form');
            const resultsDiv = document.getElementById('quiz-results');
            const scoreEl = document.getElementById('score');
            const resultTitleEl = document.getElementById('result-title');
            const resultMessageEl = document.getElementById('result-message');
            const submitButton = document.getElementById('submit-quiz');
            const retryButton = document.getElementById('retry-quiz-button');
            const dashboardButton = document.querySelector('#quiz-results .dashboard-button');
            const languageSelectElement = document.getElementById('languageSelect');


            // Initial Language Setup
             const initialLang = getStoredLanguage();
             if (languageSelectElement) languageSelectElement.value = initialLang;
             translatePage(initialLang);

             // Language Change Handler
            if (languageSelectElement) {
                languageSelectElement.addEventListener('change', (e) => {
                    setLanguage(e.target.value);
                });
            }

            function calculateScore() {
                let score = 0;
                const formData = new FormData(quizForm);
                quizData.forEach(q => {
                    const selectedAnswer = formData.get(q.id);
                    if (selectedAnswer === q.correctAnswer) {
                        score++;
                    }
                });
                return score;
            }

             function updateResultsUI(score, lang) {
                 scoreEl.textContent = `${score}/10`;
                 const passed = score >= PASSING_SCORE;

                 resultsDiv.classList.toggle('results-pass', passed);
                 resultsDiv.classList.toggle('results-fail', !passed);
                 resultTitleEl.classList.toggle('pass', passed);
                 resultTitleEl.classList.toggle('fail', !passed);
                 resultMessageEl.classList.toggle('pass', passed);
                 resultMessageEl.classList.toggle('fail', !passed);

                 resultTitleEl.textContent = getTranslation(passed ? 'result_title_pass' : 'result_title_fail', lang);
                 resultMessageEl.textContent = getTranslation(
                    passed ? 'result_message_pass' : 'result_message_fail',
                     lang,
                     { moduleId: MODULE_ID, passingScore: PASSING_SCORE }
                 );
                 // Update score display text (needed after language change)
                 const scoreDisplayParent = document.getElementById('score-display');
                 const scoreTemplate = getTranslation('score_display_text', lang, {});
                 scoreDisplayParent.innerHTML = scoreTemplate.replace('{score}', `${score}/10`);


                 resultsDiv.style.display = 'block';
                 submitButton.style.display = 'none'; // Hide submit after first attempt
                 retryButton.style.display = 'inline-block';
                 dashboardButton.style.display = 'inline-block';

                 // Scroll to results smoothly
                 resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
             }

            quizForm.addEventListener('submit', (event) => {
                event.preventDefault(); // Prevent actual form submission
                const score = calculateScore();
                const currentLang = getStoredLanguage(); // Get current language for messages

                updateResultsUI(score, currentLang);

                 // Update localStorage if passed
                 if (score >= PASSING_SCORE) {
                     const currentStatus = loadKnowledgeCheckStatus();
                     currentStatus[MODULE_ID] = true; // Mark this module as complete
                     saveKnowledgeCheckStatus(currentStatus);
                     console.log(`Module ${MODULE_ID} status updated to complete.`);
                 }
            });

             retryButton.addEventListener('click', () => {
                 quizForm.reset(); // Clear selections
                 resultsDiv.style.display = 'none'; // Hide results
                 submitButton.style.display = 'block'; // Show submit button again
                 retryButton.style.display = 'none';
                 dashboardButton.style.display = 'none';
                 // Scroll back to the top smoothly
                 window.scrollTo({ top: 0, behavior: 'smooth' });
             });

        }); // End DOMContentLoaded

    </script>

</body>
</html>