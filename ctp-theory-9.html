<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Module 9: Combining Conditions</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Reset & Base Styles --- */
        :root {
            --primary-color: #0d6efd; /* Slightly different blue */
            --secondary-color: #6c757d;
            --background-light: #f8f9fa;
            --background-dark: #212529; /* Darker background for code */
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --accent-color: #ffca2c; /* Adjusted yellow */
            --success-color: #198754; /* Bootstrap 5 green */
            --error-color: #dc3545; /* Bootstrap 5 red */
            --info-color: #0dcaf0;   /* Bootstrap 5 cyan */
            --border-radius: 8px;
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
             /* Nav Colors from other page */
            --nav-primary: #6f42c1; /* Bootstrap 5 purple */
            --nav-success: #20c997; /* Bootstrap 5 teal */
            --nav-dark: #1a1a2e; /* Kept original */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.7;
            background-color: var(--background-light); color: var(--text-dark);
            overflow-x: hidden; display: flex; flex-direction: column; min-height: 100vh;
        }
        main { flex-grow: 1; } /* This makes main content push footer down naturally */

        /* --- Utility Classes --- */
        .container { max-width: 960px; margin: 0 auto; padding: 0 15px; }
        .text-center { text-align: center; }
        .highlight { color: var(--primary-color); font-weight: bold; }
        .fade-in { opacity: 0; transform: translateY(20px); animation: fadeInAnimation 0.8s ease-out forwards; }
        .fade-in.delay-1 { animation-delay: 0.2s; } .fade-in.delay-2 { animation-delay: 0.4s; }
        .fade-in.delay-3 { animation-delay: 0.6s; } .fade-in.delay-4 { animation-delay: 0.8s; }
        .fade-in.delay-5 { animation-delay: 1.0s; }
        .button-group { margin-top: 2rem; display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; }
        .action-button {
             display: inline-flex; align-items: center; justify-content: center; gap: 0.5em;
             padding: 0.8rem 1.5rem; font-size: 1rem; font-weight: bold;
             color: var(--text-light); background-color: var(--primary-color); border: none;
             border-radius: var(--border-radius); cursor: pointer;
             transition: background-color var(--transition-speed), transform var(--transition-speed), filter var(--transition-speed), box-shadow var(--transition-speed);
             margin-top: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             text-decoration: none; line-height: 1.2;
        }
        .action-button i.fas { /* Icons aligned by flex */ }
        .action-button:hover:not(:disabled) { background-color: #0b5ed7; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .action-button:disabled { background-color: var(--secondary-color); cursor: not-allowed; transform: none; box-shadow: none; opacity: 0.7; }
        .action-button.success { background-color: var(--success-color); }
        .action-button.success:hover:not(:disabled) { background-color: #157347; }
        .action-button.secondary { background-color: var(--secondary-color); }
        .action-button.secondary:hover:not(:disabled) { background-color: #5a6268; }
        .action-button:active:not(:disabled) { transform: translateY(1px) scale(0.98); filter: brightness(0.95); }
        .pc-tag {
            display: inline-block; background-color: var(--info-color); color: var(--background-dark);
            padding: 0.2em 0.6em; border-radius: 4px; font-size: 0.8rem;
            font-weight: bold; margin-left: 8px; vertical-align: middle;
            font-family: var(--font-body);
        }

        /* --- Animations --- */
        @keyframes fadeInAnimation { to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 5px rgba(13, 110, 253, 0.3); }
            50% { transform: scale(1.03); box-shadow: 0 0 15px rgba(13, 110, 253, 0.6); }
            100% { transform: scale(1); box-shadow: 0 0 5px rgba(13, 110, 253, 0.3); }
        }
        @keyframes code-line-anim { from { width: 0; opacity: 0; } to { width: 100%; opacity: 1; } }
        @keyframes tada {
          from { transform: scale3d(1, 1, 1); } 10%, 20% { transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg); }
          30%, 50%, 70%, 90% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg); } 40%, 60%, 80% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg); }
          to { transform: scale3d(1, 1, 1); }
        }
        .tada-anim { animation: tada 1s ease; }
        @keyframes shake {
          10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); }
          30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        @keyframes iconAppearCorrect {
            0% { transform: scale(0.5) rotate(-15deg); opacity: 0; }
            60% { transform: scale(1.2) rotate(5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        @keyframes flipBoolean { /* Simple flip for 'not' */
            from { transform: rotateY(0deg); } to { transform: rotateY(180deg); }
        }

        /* --- Minimal Retractable Nav (Identical to Module 0) --- */
        .minimal-nav-button {
            position: fixed; top: 15px; right: 15px; z-index: 1001;
            background-color: rgba(52, 58, 64, 0.75); color: var(--text-light);
            border: none; border-radius: var(--border-radius); padding: 8px 12px;
            cursor: pointer; transition: background-color var(--transition-speed), opacity var(--transition-speed), transform var(--transition-speed);
            font-size: 1.1rem; opacity: 0.6; box-shadow: 0 2px 5px rgba(0,0,0,0.2); line-height: 1;
        }
        .minimal-nav-button:hover { background-color: rgba(52, 58, 64, 0.95); opacity: 1; transform: scale(1.05); }
        .minimal-nav {
            position: fixed; top: 60px; right: 15px; z-index: 1000;
            background-color: var(--background-dark); border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); padding: 0.8rem;
            opacity: 0; transform: translateY(-15px) scale(0.95); transform-origin: top right;
            pointer-events: none; transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease; min-width: 200px;
        }
        body.nav-active .minimal-nav { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        .minimal-nav ul { list-style: none; margin: 0; padding: 0; }
        .minimal-nav ul li { margin-bottom: 5px; } .minimal-nav ul li:last-child { margin-bottom: 0; }
        .minimal-nav ul li a {
            display: flex; align-items: center; color: var(--text-light);
            text-decoration: none; padding: 0.6rem 1rem; border-radius: 4px;
            transition: background-color var(--transition-speed), color var(--transition-speed);
            white-space: nowrap; font-weight: 400; font-size: 0.95rem;
        }
        .minimal-nav ul li a i.fas { margin-right: 10px; width: 1.2em; text-align: center; opacity: 0.8; transition: opacity var(--transition-speed); }
        .minimal-nav ul li a:hover { background-color: var(--nav-primary); color: var(--text-light); } /* Use nav color */
        .minimal-nav ul li a:hover i.fas { opacity: 1; }
        /* Language Switcher Styles (Identical) */
        .minimal-nav .language-switcher-item { padding: 0.5rem 1rem; border-top: 1px solid var(--secondary-color); margin-top: 8px; padding-top: 13px; }
        #languageSelect {
            width: 100%; background: rgba(255,255,255,0.1); color: white;
            border: 1px solid var(--nav-success); border-radius: 5px;
            padding: 6px 30px 6px 12px; cursor: pointer; font-size: 0.9rem;
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--nav-success').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat; background-position: right 10px center; background-size: 10px auto;
            transition: background-color 0.3s ease;
        }
        #languageSelect:hover { background-color: rgba(255,255,255,0.15); }
        #languageSelect option { background: var(--nav-dark); color: var(--text-light); }
        /* --- End Minimal Retractable Nav --- */

        /* --- Header --- */
        .main-header {
            background: linear-gradient(135deg, var(--primary-color), #0747a6); /* Adjusted gradient */
            color: var(--text-light); padding: 4rem 0 6rem; text-align: center;
            position: relative; overflow: hidden;
        }
        .main-header h1 {
            font-family: var(--font-title); font-size: 2.8rem; margin-bottom: 0.5rem; /* Slightly smaller */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); animation: fadeInAnimation 1s ease-out;
        }
        .main-header p {
            font-size: 1.2rem; font-weight: 300; opacity: 0.9;
            animation: fadeInAnimation 1s ease-out 0.3s forwards; opacity: 0;
        }
        /* Decorative shapes */
        .header-shape { position: absolute; border-radius: 50%; background-color: rgba(255, 255, 255, 0.1); animation: pulse 5s infinite ease-in-out alternate; }
        .shape1 { width: 150px; height: 150px; bottom: -50px; left: 10%; animation-duration: 6s; }
        .shape2 { width: 80px; height: 80px; top: 50px; right: 15%; animation-duration: 4s; }
        .shape3 { width: 50px; height: 50px; bottom: 20px; right: 30%; animation-duration: 7s; }

        /* --- Section Styling --- */
        section { padding: 4rem 0; border-bottom: 1px solid #eee; }
        /* Remove border from last section */
        main section:last-of-type { border-bottom: none; }
        section h2 {
            font-family: var(--font-title); font-size: 2.2rem; color: var(--primary-color);
            margin-bottom: 2rem; text-align: center; position: relative; padding-bottom: 10px;
        }
        section h2::after {
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 60px; height: 4px; background-color: var(--accent-color); border-radius: 2px;
        }

        /* --- Intro Section --- */
        #intro p { font-size: 1.1rem; max-width: 750px; margin: 0 auto 1rem; text-align: center; }

        /* --- Logical Operator Sections --- */
        .logic-explanation { display: flex; gap: 2rem; align-items: flex-start; margin-top: 2rem; flex-wrap: wrap; }
        .logic-text { flex-basis: 45%; flex-grow: 1; font-size: 1.05rem; }
        .logic-text p { margin-bottom: 1.5rem; }
        .logic-demo {
            flex-basis: 50%; flex-grow: 1; background-color: var(--background-dark); color: var(--text-light);
            padding: 1.5rem 2rem; border-radius: var(--border-radius); font-family: 'Courier New', Courier, monospace;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); min-height: 180px; /* Slightly more height */
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .logic-demo pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; }
        .code-output {
            margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed var(--secondary-color);
            font-weight: bold; font-size: 1.1rem; opacity: 0;
            transform: translateY(10px); transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .code-output.visible { opacity: 1; transform: translateY(0); }
        .output-true { color: var(--success-color); }
        .output-false { color: var(--error-color); }

        /* Syntax Highlighting */
        .code-keyword { color: #569cd6; } /* Blue for keywords like and, or, not, if, else */
        .code-variable { color: #9cdcfe; } /* Light blue for variables */
        .code-boolean { color: #4ec9b0; } /* Teal for True/False */
        .code-string { color: #ce9178; } /* Orange for strings */
        .code-comment { color: #6a9955; font-style: italic; } /* Green for comments */
        .code-operator { color: #d4d4d4; } /* White/light grey for operators =, ==, > */
        .code-function { color: #dcdcaa; } /* Yellow for print() */
        .code-number { color: #b5cea8; } /* Light green for numbers */

        /* Interactive Logic Visualizer (Simple Example) */
        .logic-visualizer {
            display: flex; align-items: center; justify-content: center; gap: 1rem;
            margin-top: 1.5rem; padding: 1rem; background-color: rgba(255,255,255, 0.05);
            border-radius: var(--border-radius);
        }
        .condition-box {
            padding: 0.5rem 1rem; border-radius: 4px; font-weight: bold;
            cursor: pointer; transition: background-color var(--transition-speed), transform var(--transition-speed);
            user-select: none; /* Prevent text selection */
            min-width: 80px; text-align: center; border: 1px solid transparent;
        }
        .condition-box.true { background-color: var(--success-color); color: var(--text-light); border-color: #146c43;}
        .condition-box.false { background-color: var(--error-color); color: var(--text-light); border-color: #b02a37;}
        .condition-box:hover { transform: scale(1.05); }
        .logic-operator-symbol { font-size: 1.5rem; font-weight: bold; color: var(--accent-color); }
        .logic-result-icon { font-size: 2rem; width: 30px; text-align: center; }
        /* Specific style for NOT visualizer */
        #not-visualizer .condition-box { animation-duration: 0.5s; animation-timing-function: ease-in-out; }
        #not-visualizer .condition-box.flip { animation-name: flipBoolean; }


        /* --- Knowledge Check Section (Identical Styling to Module 0) --- */
        #knowledge-check { background-color: #e9ecef; }
        .quiz-container {
            background-color: #fff; padding: 2rem; border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); max-width: 700px; margin: 2rem auto 0;
        }
        .quiz-question { font-size: 1.2rem; font-weight: bold; margin-bottom: 1.5rem; color: var(--text-dark); }
        .quiz-options button {
            display: block; width: 100%; padding: 1rem; margin-bottom: 1rem; text-align: left;
            font-size: 1rem; background-color: #f8f9fa; border: 1px solid #ced4da;
            border-radius: var(--border-radius); cursor: pointer;
            transition: background-color var(--transition-speed), border-color var(--transition-speed), transform var(--transition-speed);
        }
        .quiz-options button:not(:disabled):hover { background-color: #e2e6ea; border-color: #adb5bd; transform: translateX(5px); }
        .quiz-options button:disabled { cursor: default; opacity: 0.7; }
        .quiz-options button.correct { background-color: #d1e7dd; border-color: var(--success-color); color: #0f5132; font-weight: bold; } /* Adjusted correct color */
        .quiz-options button.incorrect { background-color: #f8d7da; border-color: var(--error-color); color: #842029; font-weight: bold; } /* Adjusted incorrect color */
        .quiz-options button.incorrect.shake { animation: shake 0.5s ease; }
        .quiz-feedback {
            margin-top: 1.5rem; padding: 1rem; border-radius: var(--border-radius);
            font-weight: bold; text-align: center; opacity: 0; transition: opacity 0.5s ease;
            height: 0; overflow: hidden;
        }
        .quiz-feedback.visible { opacity: 1; height: auto; margin-bottom: 1rem; }
        .quiz-feedback.correct { background-color: #d1e7dd; color: #0f5132; }
        .quiz-feedback.incorrect { background-color: #f8d7da; color: #842029; }
        #next-question-btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 0.5em;
            margin: 1.5rem auto 0; padding: 0.8rem 1.5rem; font-size: 1rem;
            font-weight: bold; color: var(--text-light); background-color: var(--primary-color);
            border: none; border-radius: var(--border-radius); cursor: pointer;
            transition: background-color var(--transition-speed), transform var(--transition-speed), opacity 0.3s, visibility 0.3s;
            opacity: 0; visibility: hidden;
        }
        #next-question-btn:hover { background-color: #0b5ed7; transform: scale(1.05); }
        #next-question-btn.visible { opacity: 1; visibility: visible; }
        .quiz-options code { background-color: rgba(0,0,0,0.05); padding: 0.1em 0.3em; border-radius: 3px; font-family: 'Courier New', Courier, monospace; }


        /* --- Completion Section Styling (Identical to Module 0 structure) --- */
        .completion-section {
            padding: 4rem 0; text-align: center; background-color: var(--background-light);
        }
        .completion-section .icon {
            font-size: 4rem; color: var(--success-color); margin-bottom: 1rem;
            display: inline-block; opacity: 0; animation: iconAppearCorrect 1s ease-out 0.5s forwards;
        }
         .completion-section .icon .fas + .fas { margin-left: 0.75rem; }
        .completion-section h2 {
            font-family: var(--font-title); font-size: 2.2rem; color: var(--primary-color); margin-bottom: 1rem;
        }
         .completion-section h2::after { display: none; }
        .completion-section p {
            font-size: 1.1rem; margin-top: 1rem; color: var(--secondary-color);
            max-width: 700px; margin-left: auto; margin-right: auto; line-height: 1.8;
        }
        .completion-section .button-group { margin-top: 2.5rem; }

        /* --- Responsive Design (Mostly identical, adjustments for content) --- */
        @media (max-width: 768px) {
            html { font-size: 15px; }
            .main-header h1 { font-size: 2.5rem; } .main-header p { font-size: 1.1rem; }
            section h2 { font-size: 1.8rem; }
            .logic-explanation { flex-direction: column; }
            .logic-text, .logic-demo { flex-basis: 100%; }
            .logic-visualizer { flex-wrap: wrap; }
            /* Nav Adjustments */
            .minimal-nav { min-width: 180px; } .minimal-nav ul li a { padding: 0.6rem 0.8rem; }
            #languageSelect { font-size: 0.85rem; padding: 5px 25px 5px 10px;}
            /* Completion Section Adjustments */
            .completion-section h2 { font-size: 2rem; }
            .completion-section .button-group { flex-direction: column; align-items: center; gap: 0.8rem; }
            .completion-section .action-button { width: 80%; max-width: 350px; margin-top: 0; }
        }
        @media (max-width: 480px) {
            html { font-size: 14px; }
            .main-header h1 { font-size: 2rem; } .main-header p { font-size: 1rem; }
            section h2 { font-size: 1.6rem; }
            .quiz-options button { padding: 0.8rem; font-size: 0.95rem; }
            /* Nav Adjustments */
            .minimal-nav-button { top: 10px; right: 10px; padding: 6px 10px; font-size: 1rem; }
            .minimal-nav { top: 48px; right: 10px; min-width: 160px; }
            .minimal-nav ul li a { padding: 0.5rem 0.7rem; font-size: 0.9rem;}
            .minimal-nav ul li a i.fas { margin-right: 8px; }
            #languageSelect { font-size: 0.8rem; padding: 4px 20px 4px 8px;}
            /* Completion Section Adjustments */
            .completion-section .icon { font-size: 3.5rem; }
            .completion-section h2 { font-size: 1.8rem; } .completion-section p { font-size: 1rem; }
            .completion-section .action-button { width: 90%; max-width: 300px; }
            /* Logic Visualizer */
            .condition-box { padding: 0.4rem 0.8rem; min-width: 70px; }
            .logic-operator-symbol { font-size: 1.3rem; }
            .logic-result-icon { font-size: 1.8rem; }
        }

    </style>
</head>
<body>

    <!-- ========= Minimal Nav Handle ========= -->
    <button id="minimal-nav-toggle" class="minimal-nav-button" aria-label="Toggle Navigation Menu">
        <i class="fas fa-bars"></i>
    </button>

    <!-- ========= Minimal Nav Panel (with Language Switcher) ========= -->
    <nav id="minimal-nav-panel" class="minimal-nav">
        <ul>
            <!-- Links to OTHER main pages (Module 9) -->
            <li><a href="ctp-practice-9.html"><i class="fas fa-pencil-alt fa-fw"></i> <span data-translate="nav_practice">Start Practice</span></a></li>
            <li><a href="ctp-advanced-9.html"><i class="fas fa-flask fa-fw"></i> <span data-translate="nav_advanced">Advanced Practice</span></a></li>
            <li><a href="ctp-dashboard.html"><i class="fas fa-list fa-fw"></i> <span data-translate="nav_menu">Course Menu</span></a></li>
             <hr style="border: none; border-top: 1px solid var(--secondary-color); margin: 8px 0;">
             <!-- Links to sections on THIS page -->
             <li><a href="#intro"><i class="fas fa-info-circle fa-fw"></i> <span data-translate="nav_intro">Introduction</span></a></li>
             <li><a href="#logical-and"><i class="fas fa-equals fa-fw"></i> <span data-translate="nav_and">Operator AND</span></a></li>
             <li><a href="#logical-or"><i class="fas fa-stream fa-fw"></i> <span data-translate="nav_or">Operator OR</span></a></li>
             <li><a href="#logical-not"><i class="fas fa-exclamation fa-fw"></i> <span data-translate="nav_not">Operator NOT</span></a></li>
             <li><a href="#combining-logic"><i class="fas fa-project-diagram fa-fw"></i> <span data-translate="nav_combining">Combining Logic</span></a></li>
             <li><a href="#knowledge-check"><i class="fas fa-check-double fa-fw"></i> <span data-translate="nav_quiz">Knowledge Check</span></a></li>
            <!-- Language Switcher Item -->
            <li class="language-switcher-item">
                 <select id="languageSelect" aria-label="Select Language">
                     <option value="en" data-translate="lang_en">🇬🇧 English</option>
                     <option value="pt" data-translate="lang_pt">🇧🇷 Português</option>
                     <option value="zh" data-translate="lang_zh">🇨🇳 中文</option>
                 </select>
            </li>
        </ul>
    </nav>

    <header class="main-header">
        <!-- Decorative shapes -->
        <div class="header-shape shape1"></div>
        <div class="header-shape shape2"></div>
        <div class="header-shape shape3"></div>

        <div class="container">
            <h1 data-translate="header_title">Module 9: Combining Conditions</h1>
            <p data-translate="header_subtitle">Mastering logical operators `and`, `or`, `not` for powerful decision-making in AI.</p>
        </div>
    </header>

    <main>
        <!-- ========= Introduction Section ========= -->
        <section id="intro">
            <div class="container">
                <h2 class="fade-in" data-translate="intro_title">🚦 Making Smarter Decisions</h2>
                <p class="fade-in delay-1" data-translate="intro_p1">
                    Sometimes, a single check isn't enough. AI often needs to evaluate <span class="highlight">multiple conditions</span> at once to make the right choice. Should a self-driving car brake? Is an email spam? Access granted?
                </p>
                <p class="fade-in delay-2" data-translate="intro_p2">
                    This module introduces Python's <span class="highlight">logical operators</span>: `and`, `or`, and `not`. These tools allow us to combine simple True/False checks into complex decision rules, a core part of <span class="highlight">Logic</span> <span class="pc-tag">Logic</span> and breaking down problems <span class="pc-tag">Decomposition</span>.
                </p>
            </div>
        </section>

        <!-- ========= Logical AND Section ========= -->
        <section id="logical-and">
            <div class="container">
                <h2 class="fade-in" data-translate="and_title">🤝 The `and` Operator: Both Must Be True</h2>
                <p class="text-center fade-in delay-1" data-translate="and_subtitle">Use `and` when you need ALL conditions to be `True` for the overall result to be `True`.</p>

                <div class="logic-explanation fade-in delay-2">
                    <div class="logic-text">
                        <p data-translate="and_p1">Think of needing a <span class="highlight">username AND password</span> to log in. If either one is wrong, access is denied.</p>
                        <p data-translate="and_p2">In Python, `condition1 and condition2` results in `True` only if BOTH `condition1` and `condition2` are individually `True`.</p>
                        <p data-translate="and_p3">It's like requiring two keys to open a lock. Missing one? It stays locked.</p>
                    </div>
                    <div class="logic-demo">
                        <pre><code class="code-variable">has_ticket</span> <span class="code-operator">=</span> <span class="code-boolean">True</span>
<code class="code-variable">is_adult</span> <span class="code-operator">=</span> <span class="code-boolean">True</span>
<code class="code-variable">can_enter_movie</span> <span class="code-operator">=</span> <code class="code-variable">has_ticket</code> <span class="code-keyword">and</span> <code class="code-variable">is_adult</code>

<code class="code-function">print</span>(<span class="code-string">f"Can enter? {</span><code class="code-variable">can_enter_movie</code><span class="code-string">}"</span>) <code class="code-comment" data-translate="and_code_comment"># Requires both</code></pre>
                        <div class="code-output" data-output-key="and_output">
                            <!-- Output will appear here -->
                        </div>
                    </div>
                </div>

                <!-- Interactive AND Visualizer -->
                <div class="logic-visualizer fade-in delay-3" id="and-visualizer">
                    <span data-translate="viz_condition1">Condition 1:</span>
                    <div class="condition-box true" data-condition="1" data-value="true" tabindex="0" role="button" aria-pressed="true">True</div>
                    <span class="logic-operator-symbol">AND</span>
                    <span data-translate="viz_condition2">Condition 2:</span>
                    <div class="condition-box true" data-condition="2" data-value="true" tabindex="0" role="button" aria-pressed="true">True</div>
                    <span class="logic-operator-symbol">=</span>
                    <span class="logic-result-icon"><i class="fas fa-check-circle" style="color: var(--success-color);"></i></span>
                </div>
                 <p class="text-center fade-in delay-4" style="margin-top: 1rem; font-size: 0.9rem;" data-translate="viz_cta">Click 'True'/'False' above to see how `and` works!</p>
            </div>
        </section>

        <!-- ========= Logical OR Section ========= -->
        <section id="logical-or" style="background-color: #fdfdfe;"> <!-- Slight background change -->
            <div class="container">
                <h2 class="fade-in" data-translate="or_title">🤷 The `or` Operator: At Least One Must Be True</h2>
                <p class="text-center fade-in delay-1" data-translate="or_subtitle">Use `or` when you need only ONE of the conditions to be `True` for the overall result to be `True`.</p>

                <div class="logic-explanation fade-in delay-2">
                    <div class="logic-text">
                        <p data-translate="or_p1">Imagine getting a discount if you're a <span class="highlight">senior citizen OR a club member</span>. You don't need to be both!</p>
                        <p data-translate="or_p2">In Python, `condition1 or condition2` results in `True` if `condition1` is `True`, or if `condition2` is `True`, or if both are `True`. It's only `False` if BOTH are `False`.</p>
                        <p data-translate="or_p3">It's like having two different keys that can open the same door.</p>
                    </div>
                    <div class="logic-demo">
                        <pre><code class="code-variable">is_weekend</span> <span class="code-operator">=</span> <span class="code-boolean">True</span>
<code class="code-variable">is_holiday</span> <span class="code-operator">=</span> <span class="code-boolean">False</span>
<code class="code-variable">day_off</span> <span class="code-operator">=</span> <code class="code-variable">is_weekend</code> <span class="code-keyword">or</span> <code class="code-variable">is_holiday</code>

<code class="code-function">print</span>(<span class="code-string">f"Is it a day off? {</span><code class="code-variable">day_off</code><span class="code-string">}"</span>) <code class="code-comment" data-translate="or_code_comment"># Only one needs to be True</code></pre>
                        <div class="code-output" data-output-key="or_output">
                            <!-- Output will appear here -->
                        </div>
                    </div>
                </div>

                <!-- Interactive OR Visualizer -->
                <div class="logic-visualizer fade-in delay-3" id="or-visualizer">
                    <span data-translate="viz_condition1">Condition 1:</span>
                    <div class="condition-box false" data-condition="1" data-value="false" tabindex="0" role="button" aria-pressed="false">False</div>
                    <span class="logic-operator-symbol">OR</span>
                     <span data-translate="viz_condition2">Condition 2:</span>
                    <div class="condition-box false" data-condition="2" data-value="false" tabindex="0" role="button" aria-pressed="false">False</div>
                    <span class="logic-operator-symbol">=</span>
                    <span class="logic-result-icon"><i class="fas fa-times-circle" style="color: var(--error-color);"></i></span>
                </div>
                 <p class="text-center fade-in delay-4" style="margin-top: 1rem; font-size: 0.9rem;" data-translate="viz_cta">Click 'True'/'False' above to see how `or` works!</p>
            </div>
        </section>

        <!-- ========= Logical NOT Section ========= -->
        <section id="logical-not">
            <div class="container">
                <h2 class="fade-in" data-translate="not_title">🔄 The `not` Operator: Flip the Truth</h2>
                <p class="text-center fade-in delay-1" data-translate="not_subtitle">Use `not` to reverse the boolean value of a condition. `True` becomes `False`, and `False` becomes `True`.</p>

                <div class="logic-explanation fade-in delay-2">
                    <div class="logic-text">
                        <p data-translate="not_p1">This is useful when you want to check if something is <span class="highlight">NOT</span> the case. For example, proceed only if the user is <span class="highlight">`not` an admin</span>.</p>
                        <p data-translate="not_p2">In Python, `not condition` evaluates to the opposite boolean value of `condition`.</p>
                        <p data-translate="not_p3">Think of it as a switch that flips the light: if it was ON (`True`), `not` makes it OFF (`False`), and vice-versa.</p>
                     </div>
                     <div class="logic-demo">
                        <pre><code class="code-variable">is_logged_in</span> <span class="code-operator">=</span> <span class="code-boolean">False</span>
<code class="code-variable">show_login_prompt</span> <span class="code-operator">=</span> <span class="code-keyword">not</span> <code class="code-variable">is_logged_in</code>

<code class="code-function">print</span>(<span class="code-string">f"Show login prompt? {</span><code class="code-variable">show_login_prompt</code><span class="code-string">}"</span>) <code class="code-comment" data-translate="not_code_comment"># Flips the value</code></pre>
                         <div class="code-output" data-output-key="not_output">
                             <!-- Output will appear here -->
                         </div>
                     </div>
                </div>

                 <!-- Interactive NOT Visualizer -->
                <div class="logic-visualizer fade-in delay-3" id="not-visualizer">
                    <span class="logic-operator-symbol">NOT</span>
                    <span data-translate="viz_condition_single">Condition:</span>
                    <div class="condition-box true" data-condition="1" data-value="true" tabindex="0" role="button" aria-pressed="true">True</div>
                    <span class="logic-operator-symbol">=</span>
                    <span class="logic-result-icon"><i class="fas fa-times-circle" style="color: var(--error-color);"></i></span>
                </div>
                <p class="text-center fade-in delay-4" style="margin-top: 1rem; font-size: 0.9rem;" data-translate="viz_cta_not">Click 'True'/'False' above to see how `not` flips the result!</p>

            </div>
        </section>

         <!-- ========= Combining Logic / Decomposition Section ========= -->
        <section id="combining-logic" style="background-color: #f0f4f8;"> <!-- Slightly different background -->
            <div class="container">
                <h2 class="fade-in" data-translate="combining_title">🧩 Combining Operators: Complex Logic</h2>
                 <p class="text-center fade-in delay-1" data-translate="combining_subtitle">
                    You can chain `and`, `or`, and `not` together using parentheses `()` to control the order, just like in math. This is where <span class="highlight">Decomposition</span> <span class="pc-tag">Decomposition</span> helps break down complex rules.
                 </p>

                 <div class="logic-explanation fade-in delay-2">
                      <div class="logic-text">
                          <p data-translate="combining_p1">Consider granting access to a special feature if a user is (<span class="highlight">an admin OR a VIP</span>) <span class="highlight">AND</span> is <span class="highlight">NOT banned</span>.</p>
                          <p data-translate="combining_p2">We decompose this:
                                <ol style="margin-left: 20px; margin-top: 0.5rem; margin-bottom: 1rem;">
                                    <li data-translate="combining_step1">Check if `is_admin` OR `is_vip`.</li>
                                    <li data-translate="combining_step2">Check if `is_banned` is NOT True.</li>
                                    <li data-translate="combining_step3">Require BOTH results (from step 1 AND step 2) to be True.</li>
                                </ol>
                           </p>
                           <p data-translate="combining_p3">Parentheses `()` ensure the `or` is evaluated first before the `and`.</p>
                      </div>
                     <div class="logic-demo">
                         <pre><code class="code-variable">is_admin</span> <span class="code-operator">=</span> <span class="code-boolean">False</span>
<code class="code-variable">is_vip</span> <span class="code-operator">=</span> <span class="code-boolean">True</span>
<code class="code-variable">is_banned</span> <span class="code-operator">=</span> <span class="code-boolean">False</span>

<code class="code-comment" data-translate="combining_comment1"># Evaluate (is_admin or is_vip) first -> True</code>
<code class="code-comment" data-translate="combining_comment2"># Evaluate (not is_banned) second -> True</code>
<code class="code-comment" data-translate="combining_comment3"># Evaluate (True and True) last -> True</code>
<code class="code-variable">has_special_access</span> <span class="code-operator">=</span> (<code class="code-variable">is_admin</code> <span class="code-keyword">or</span> <code class="code-variable">is_vip</code>) <span class="code-keyword">and</span> <span class="code-keyword">not</span> <code class="code-variable">is_banned</code>

<code class="code-function">print</span>(<span class="code-string">f"Special access granted? {</span><code class="code-variable">has_special_access</code><span class="code-string">}"</span>)</pre>
                         <div class="code-output" data-output-key="combining_output">
                              <!-- Output will appear here -->
                         </div>
                     </div>
                 </div>
            </div>
        </section>

        <!-- ========= Knowledge Check Section ========= -->
        <section id="knowledge-check">
            <div class="container">
                <h2 class="fade-in" data-translate="quiz_title">🧠 Quick Check!</h2>
                <div class="quiz-container fade-in delay-1">
                    <div id="quiz-area">
                        <!-- Quiz questions will be loaded here by JavaScript -->
                    </div>
                    <div id="quiz-feedback" class="quiz-feedback">
                        <!-- Feedback (Correct/Incorrect) shown here -->
                    </div>
                    <button id="next-question-btn" data-translate="quiz_next_button">Next Question</button>
                </div>
            </div>
        </section>

        <!-- ========= Completion Section ========= -->
        <section class="completion-section">
            <div class="container">
                 <div class="icon"> <!-- Animation applied via CSS -->
                    <i class="fas fa-check-double"></i>
                    <i class="fas fa-brain"></i>
                    <i class="fas fa-lightbulb"></i> <!-- Changed icon -->
                </div>
                <h2 class="fade-in delay-1" data-translate="completion_theory_title">Module 9 Theory Complete!</h2>
                <p class="fade-in delay-2" data-translate="completion_theory_desc">
                    Excellent! You've learned how to combine conditions using `and`, `or`, and `not`. This is crucial for creating programs that make logical decisions. <br>
                    Ready to practice building these conditions? Head to the <strong>Practice Zone</strong> or the <strong>Advanced Practice</strong>.
                </p>
                <div class="button-group">
                    <!-- Button Order: Menu (Left, Grey), Practice (Center, Green), Advanced (Right, Grey) -->
                    <a href="ctp-dashboard.html" class="action-button secondary fade-in delay-3"><i class="fas fa-list"></i> <span data-translate="nav_menu">Course Menu</span></a>
                    <!-- Links Updated for Module 9 -->
                    <a href="ctp-practice-9.html" class="action-button success fade-in delay-4"><i class="fas fa-pencil-alt"></i> <span data-translate="nav_practice">Start Practice</span></a>
                    <a href="ctp-advanced-9.html" class="action-button secondary fade-in delay-5"><i class="fas fa-flask"></i> <span data-translate="nav_advanced">Advanced Practice</span></a>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer section has been completely removed -->

    <script>
    // --- Translations Object ---
    const translations = {
        en: {
            "page_title": "Module 9: Combining Conditions",
            "nav_practice": "Start Practice", "nav_advanced": "Advanced Practice", "nav_menu": "Course Menu",
            "nav_intro": "Introduction", "nav_and": "Operator AND", "nav_or": "Operator OR", "nav_not": "Operator NOT", "nav_combining": "Combining Logic", "nav_quiz": "Knowledge Check",
            "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
            "header_title": "Module 9: Combining Conditions", "header_subtitle": "Mastering logical operators `and`, `or`, `not` for powerful decision-making in AI.",
            "intro_title": "🚦 Making Smarter Decisions",
            "intro_p1": "Sometimes, a single check isn't enough. AI often needs to evaluate multiple conditions at once to make the right choice. Should a self-driving car brake? Is an email spam? Access granted?",
            "intro_p2": "This module introduces Python's logical operators: `and`, `or`, and `not`. These tools allow us to combine simple True/False checks into complex decision rules, a core part of Logic <span class=\"pc-tag\">Logic</span> and breaking down problems <span class=\"pc-tag\">Decomposition</span>.",
            "and_title": "🤝 The `and` Operator: Both Must Be True", "and_subtitle": "Use `and` when you need ALL conditions to be `True` for the overall result to be `True`.",
            "and_p1": "Think of needing a username AND password to log in. If either one is wrong, access is denied.",
            "and_p2": "In Python, `condition1 and condition2` results in `True` only if BOTH `condition1` and `condition2` are individually `True`.",
            "and_p3": "It's like requiring two keys to open a lock. Missing one? It stays locked.",
            "and_code_comment": "# Requires both",
            "or_title": "🤷 The `or` Operator: At Least One Must Be True", "or_subtitle": "Use `or` when you need only ONE of the conditions to be `True` for the overall result to be `True`.",
            "or_p1": "Imagine getting a discount if you're a senior citizen OR a club member. You don't need to be both!",
            "or_p2": "In Python, `condition1 or condition2` results in `True` if `condition1` is `True`, or if `condition2` is `True`, or if both are `True`. It's only `False` if BOTH are `False`.",
            "or_p3": "It's like having two different keys that can open the same door.",
            "or_code_comment": "# Only one needs to be True",
            "not_title": "🔄 The `not` Operator: Flip the Truth", "not_subtitle": "Use `not` to reverse the boolean value of a condition. `True` becomes `False`, and `False` becomes `True`.",
            "not_p1": "This is useful when you want to check if something is NOT the case. For example, proceed only if the user is `not` an admin.",
            "not_p2": "In Python, `not condition` evaluates to the opposite boolean value of `condition`.",
            "not_p3": "Think of it as a switch that flips the light: if it was ON (`True`), `not` makes it OFF (`False`), and vice-versa.",
            "not_code_comment": "# Flips the value",
            "combining_title": "🧩 Combining Operators: Complex Logic", "combining_subtitle": "You can chain `and`, `or`, and `not` together using parentheses `()` to control the order, just like in math. This is where Decomposition <span class=\"pc-tag\">Decomposition</span> helps break down complex rules.",
            "combining_p1": "Consider granting access to a special feature if a user is (an admin OR a VIP) AND is NOT banned.",
            "combining_p2": "We decompose this:",
            "combining_step1": "Check if `is_admin` OR `is_vip`.",
            "combining_step2": "Check if `is_banned` is NOT True.",
            "combining_step3": "Require BOTH results (from step 1 AND step 2) to be True.",
            "combining_p3": "Parentheses `()` ensure the `or` is evaluated first before the `and`.",
            "combining_comment1": "# Evaluate (is_admin or is_vip) first -> True", "combining_comment2": "# Evaluate (not is_banned) second -> True", "combining_comment3": "# Evaluate (True and True) last -> True",
            "viz_condition1": "Condition 1:", "viz_condition2": "Condition 2:", "viz_condition_single": "Condition:",
            "viz_cta": "Click 'True'/'False' above to see how the operator works!", "viz_cta_not": "Click 'True'/'False' above to see how `not` flips the result!", // Combined CTA
            "quiz_title": "🧠 Quick Check!", "quiz_next_button": "Next Question",
            "quiz_q1": "Which operator requires BOTH conditions to be `True` for the result to be `True`?",
            "quiz_q1_opt1": "`or`", "quiz_q1_opt2": "`not`", "quiz_q1_opt3": "`and`", "quiz_q1_opt4": "`if`",
            "quiz_q2": "What is the result of `True or False`?",
            "quiz_q2_opt1": "`True`", "quiz_q2_opt2": "`False`", "quiz_q2_opt3": "Error", "quiz_q2_opt4": "`None`",
            "quiz_q3": "What does the `not` operator do?",
            "quiz_q3_opt1": "Combines two conditions", "quiz_q3_opt2": "Checks if two values are equal", "quiz_q3_opt3": "Reverses a boolean value", "quiz_q3_opt4": "Compares numbers",
            "quiz_q4": "Consider `access = (user == 'admin' or level > 5) and not is_locked`. If `user` is 'guest', `level` is 7, and `is_locked` is `False`, what is `access`?",
            "quiz_q4_opt1": "`True`", "quiz_q4_opt2": "`False`", "quiz_q4_opt3": "Error", "quiz_q4_opt4": "Maybe",
            "quiz_feedback_correct": "Correct! 🎉", "quiz_feedback_incorrect": "Not quite! The correct answer was: {correctAnswerText}",
            "quiz_final_score_title": "Module 9 Complete!", "quiz_final_score_summary": "You answered {score} out of {total} questions correctly.",
            "quiz_final_score_perfect": "Logic Master! You've nailed the operators.", "quiz_final_score_good": "Good job! Practice combining them to solidify.",
            "completion_theory_title": "Module 9 Theory Complete!",
            "completion_theory_desc": "Excellent! You've learned how to combine conditions using `and`, `or`, and `not`. This is crucial for creating programs that make logical decisions. <br> Ready to practice building these conditions? Head to the <strong>Practice Zone</strong> or the <strong>Advanced Practice</strong>.",
        },
        pt: {
            "page_title": "Módulo 9: Combinando Condições",
            "nav_practice": "Iniciar Prática", "nav_advanced": "Prática Avançada", "nav_menu": "Menu do Curso",
            "nav_intro": "Introdução", "nav_and": "Operador AND", "nav_or": "Operador OR", "nav_not": "Operador NOT", "nav_combining": "Combinando Lógica", "nav_quiz": "Teste Rápido",
            "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
            "header_title": "Módulo 9: Combinando Condições", "header_subtitle": "Dominando operadores lógicos `and`, `or`, `not` para tomada de decisão poderosa em IA.",
            "intro_title": "🚦 Tomando Decisões Mais Inteligentes",
            "intro_p1": "Às vezes, uma única verificação não é suficiente. A IA frequentemente precisa avaliar múltiplas condições de uma vez para fazer a escolha certa. Um carro autônomo deve frear? Um e-mail é spam? Acesso concedido?",
            "intro_p2": "Este módulo apresenta os operadores lógicos do Python: `and`, `or` e `not`. Essas ferramentas nos permitem combinar verificações simples Verdadeiro/Falso em regras de decisão complexas, uma parte central da Lógica <span class=\"pc-tag\">Lógica</span> e da decomposição de problemas <span class=\"pc-tag\">Decomposição</span>.",
            "and_title": "🤝 O Operador `and`: Ambos Devem Ser Verdadeiros", "and_subtitle": "Use `and` quando precisar que TODAS as condições sejam `True` para que o resultado geral seja `True`.",
            "and_p1": "Pense em precisar de um nome de usuário E senha para fazer login. Se um deles estiver errado, o acesso é negado.",
            "and_p2": "Em Python, `condicao1 and condicao2` resulta em `True` apenas se AMBAS `condicao1` e `condicao2` forem individualmente `True`.",
            "and_p3": "É como precisar de duas chaves para abrir uma fechadura. Faltou uma? Fica trancada.",
            "and_code_comment": "# Requer ambos",
            "or_title": "🤷 O Operador `or`: Pelo Menos Um Deve Ser Verdadeiro", "or_subtitle": "Use `or` quando precisar que apenas UMA das condições seja `True` para que o resultado geral seja `True`.",
            "or_p1": "Imagine ganhar um desconto se você for um idoso OU um membro do clube. Você não precisa ser ambos!",
            "or_p2": "Em Python, `condicao1 or condicao2` resulta em `True` se `condicao1` for `True`, ou se `condicao2` for `True`, ou se ambos forem `True`. Só é `False` se AMBOS forem `False`.",
            "or_p3": "É como ter duas chaves diferentes que podem abrir a mesma porta.",
            "or_code_comment": "# Apenas um precisa ser True",
            "not_title": "🔄 O Operador `not`: Inverta a Verdade", "not_subtitle": "Use `not` para reverter o valor booleano de uma condição. `True` vira `False`, e `False` vira `True`.",
            "not_p1": "Isso é útil quando você quer verificar se algo NÃO é o caso. Por exemplo, prossiga apenas se o usuário `não` for um administrador.",
            "not_p2": "Em Python, `not condicao` avalia para o valor booleano oposto de `condicao`.",
            "not_p3": "Pense nisso como um interruptor que inverte a luz: se estava LIGADA (`True`), `not` a DESLIGA (`False`), e vice-versa.",
            "not_code_comment": "# Inverte o valor",
            "combining_title": "🧩 Combinando Operadores: Lógica Complexa", "combining_subtitle": "Você pode encadear `and`, `or` e `not` usando parênteses `()` para controlar a ordem, assim como na matemática. É aqui que a Decomposição <span class=\"pc-tag\">Decomposição</span> ajuda a quebrar regras complexas.",
            "combining_p1": "Considere conceder acesso a um recurso especial se um usuário for (um admin OU um VIP) E NÃO estiver banido.",
            "combining_p2": "Nós decompomos isso:",
            "combining_step1": "Verifique se `is_admin` OU `is_vip`.",
            "combining_step2": "Verifique se `is_banned` NÃO é True.",
            "combining_step3": "Exija que AMBOS os resultados (do passo 1 E passo 2) sejam True.",
            "combining_p3": "Os parênteses `()` garantem que o `or` seja avaliado primeiro antes do `and`.",
            "combining_comment1": "# Avalia (is_admin or is_vip) primeiro -> True", "combining_comment2": "# Avalia (not is_banned) segundo -> True", "combining_comment3": "# Avalia (True and True) por último -> True",
             "viz_condition1": "Condição 1:", "viz_condition2": "Condição 2:", "viz_condition_single": "Condição:",
             "viz_cta": "Clique em 'True'/'False' acima para ver como o operador funciona!", "viz_cta_not": "Clique em 'True'/'False' acima para ver como `not` inverte o resultado!",
            "quiz_title": "🧠 Teste Rápido!", "quiz_next_button": "Próxima Pergunta",
            "quiz_q1": "Qual operador exige que AMBAS as condições sejam `True` para o resultado ser `True`?",
            "quiz_q1_opt1": "`or`", "quiz_q1_opt2": "`not`", "quiz_q1_opt3": "`and`", "quiz_q1_opt4": "`if`",
            "quiz_q2": "Qual é o resultado de `True or False`?",
            "quiz_q2_opt1": "`True`", "quiz_q2_opt2": "`False`", "quiz_q2_opt3": "Erro", "quiz_q2_opt4": "`None`",
            "quiz_q3": "O que o operador `not` faz?",
            "quiz_q3_opt1": "Combina duas condições", "quiz_q3_opt2": "Verifica se dois valores são iguais", "quiz_q3_opt3": "Inverte um valor booleano", "quiz_q3_opt4": "Compara números",
            "quiz_q4": "Considere `acesso = (usuario == 'admin' or nivel > 5) and not bloqueado`. Se `usuario` é 'guest', `nivel` é 7, e `bloqueado` é `False`, qual é o valor de `acesso`?",
            "quiz_q4_opt1": "`True`", "quiz_q4_opt2": "`False`", "quiz_q4_opt3": "Erro", "quiz_q4_opt4": "Talvez",
            "quiz_feedback_correct": "Correto! 🎉", "quiz_feedback_incorrect": "Quase lá! A resposta correta era: {correctAnswerText}",
            "quiz_final_score_title": "Módulo 9 Completo!", "quiz_final_score_summary": "Você respondeu {score} de {total} perguntas corretamente.",
            "quiz_final_score_perfect": "Mestre da Lógica! Você dominou os operadores.", "quiz_final_score_good": "Bom trabalho! Pratique combiná-los para solidificar.",
            "completion_theory_title": "Teoria do Módulo 9 Completa!",
            "completion_theory_desc": "Excelente! Você aprendeu a combinar condições usando `and`, `or` e `not`. Isso é crucial para criar programas que tomam decisões lógicas. <br> Pronto para praticar a construção dessas condições? Vá para a <strong>Zona de Prática</strong> ou a <strong>Prática Avançada</strong>.",
        },
        zh: {
            "page_title": "模块 9：组合条件",
            "nav_practice": "开始练习", "nav_advanced": "高级练习", "nav_menu": "课程菜单",
            "nav_intro": "介绍", "nav_and": "AND 运算符", "nav_or": "OR 运算符", "nav_not": "NOT 运算符", "nav_combining": "组合逻辑", "nav_quiz": "知识测验",
            "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
            "header_title": "模块 9：组合条件", "header_subtitle": "掌握逻辑运算符 `and`、`or`、`not`，实现强大的人工智能决策能力。",
            "intro_title": "🚦 做出更智能的决策",
            "intro_p1": "有时，单一的检查是不够的。人工智能通常需要同时评估多个条件才能做出正确的选择。自动驾驶汽车应该刹车吗？这封邮件是垃圾邮件吗？访问是否被授予？",
            "intro_p2": "本模块介绍 Python 的逻辑运算符：`and`、`or` 和 `not`。这些工具允许我们将简单的真/假检查组合成复杂的决策规则，这是逻辑思维 <span class=\"pc-tag\">逻辑</span> 和问题分解 <span class=\"pc-tag\">分解</span> 的核心部分。",
            "and_title": "🤝 `and` 运算符：两者都必须为真", "and_subtitle": "当您需要所有条件都为 `True`，整体结果才为 `True` 时，请使用 `and`。",
            "and_p1": "想象一下需要用户名和密码才能登录。如果其中任何一个错误，访问就会被拒绝。",
            "and_p2": "在 Python 中，`condition1 and condition2` 只有在 `condition1` 和 `condition2` 都各自为 `True` 时，结果才为 `True`。",
            "and_p3": "这就像需要两把钥匙才能打开一把锁。少了一把？锁就打不开。",
            "and_code_comment": "# 两者都需要",
            "or_title": "🤷 `or` 运算符：至少一个必须为真", "or_subtitle": "当您只需要其中一个条件为 `True`，整体结果就为 `True` 时，请使用 `or`。",
            "or_p1": "想象一下，如果您是老年人或俱乐部会员，就可以获得折扣。您不需要两者都是！",
            "or_p2": "在 Python 中，如果 `condition1` 为 `True`，或者 `condition2` 为 `True`，或者两者都为 `True`，则 `condition1 or condition2` 的结果为 `True`。只有当两者都为 `False` 时，结果才为 `False`。",
            "or_p3": "这就像有两把不同的钥匙可以打开同一扇门。",
            "or_code_comment": "# 只需要一个为 True",
            "not_title": "🔄 `not` 运算符：翻转真值", "not_subtitle": "使用 `not` 来反转条件的布尔值。`True` 变成 `False`，`False` 变成 `True`。",
            "not_p1": "当您想检查某事是否`不是`某种情况时，这很有用。例如，仅当用户`不是`管理员时才继续。",
            "not_p2": "在 Python 中，`not condition` 的计算结果是 `condition` 的相反布尔值。",
            "not_p3": "把它想象成一个翻转灯的开关：如果原来是开 (`True`)，`not` 使其关闭 (`False`)，反之亦然。",
            "not_code_comment": "# 翻转值",
            "combining_title": "🧩 组合运算符：复杂逻辑", "combining_subtitle": "您可以像数学运算一样，使用括号 `()` 将 `and`、`or` 和 `not` 链接在一起以控制顺序。这就是分解 <span class=\"pc-tag\">分解</span> 帮助我们拆解复杂规则的地方。",
            "combining_p1": "考虑一下，如果用户是（管理员或 VIP）并且未被禁止，则授予特殊功能访问权限。",
            "combining_p2": "我们将其分解为：",
            "combining_step1": "检查 `is_admin` 或 `is_vip` 是否为真。",
            "combining_step2": "检查 `is_banned` 是否不为真（即 `not is_banned` 为真）。",
            "combining_step3": "要求两个结果（来自步骤 1 和步骤 2）都为真。",
            "combining_p3": "括号 `()` 确保 `or` 在 `and` 之前被评估。",
            "combining_comment1": "# 首先评估 (is_admin or is_vip) -> True", "combining_comment2": "# 其次评估 (not is_banned) -> True", "combining_comment3": "# 最后评估 (True and True) -> True",
            "viz_condition1": "条件 1:", "viz_condition2": "条件 2:", "viz_condition_single": "条件:",
            "viz_cta": "点击上方的 'True'/'False' 查看运算符如何工作！", "viz_cta_not": "点击上方的 'True'/'False' 查看 `not` 如何翻转结果！",
            "quiz_title": "🧠 快速测验！", "quiz_next_button": "下一题",
            "quiz_q1": "哪个运算符要求两个条件都为 `True` 结果才为 `True`？",
            "quiz_q1_opt1": "`or`", "quiz_q1_opt2": "`not`", "quiz_q1_opt3": "`and`", "quiz_q1_opt4": "`if`",
            "quiz_q2": "`True or False` 的结果是什么？",
            "quiz_q2_opt1": "`True`", "quiz_q2_opt2": "`False`", "quiz_q2_opt3": "错误", "quiz_q2_opt4": "`None`",
            "quiz_q3": "`not` 运算符的作用是什么？",
            "quiz_q3_opt1": "组合两个条件", "quiz_q3_opt2": "检查两个值是否相等", "quiz_q3_opt3": "反转布尔值", "quiz_q3_opt4": "比较数字",
            "quiz_q4": "考虑 `access = (user == 'admin' or level > 5) and not is_locked`。如果 `user` 是 'guest'，`level` 是 7，`is_locked` 是 `False`，那么 `access` 是什么？",
            "quiz_q4_opt1": "`True`", "quiz_q4_opt2": "`False`", "quiz_q4_opt3": "错误", "quiz_q4_opt4": "可能",
            "quiz_feedback_correct": "正确！🎉", "quiz_feedback_incorrect": "不太对哦！正确答案是：{correctAnswerText}",
            "quiz_final_score_title": "模块 9 完成！", "quiz_final_score_summary": "你答对了 {score} / {total} 题。",
            "quiz_final_score_perfect": "逻辑大师！你已经掌握了这些运算符。", "quiz_final_score_good": "做得不错！多练习组合它们以巩固知识。",
            "completion_theory_title": "模块 9 理论完成！",
            "completion_theory_desc": "太棒了！您已经学会了如何使用 `and`、`or` 和 `not` 组合条件。这对于创建能够做出逻辑决策的程序至关重要。<br> 准备好练习构建这些条件了吗？前往<strong>练习区</strong>或<strong>高级练习</strong>。",
        }
    };


    document.addEventListener('DOMContentLoaded', () => {

        // --- Language Management Functions (Identical to Module 0) ---
        function getStoredLanguage() {
            const storedLang = localStorage.getItem('userLanguage');
            if (storedLang && translations[storedLang]) return storedLang;
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('pt')) return 'pt';
            if (browserLang.startsWith('zh')) return 'zh';
            return 'en'; // Default to English
        }

        function setLanguage(lang) {
            if (!translations[lang]) lang = 'en'; // Fallback
            localStorage.setItem('userLanguage', lang);
            document.documentElement.lang = lang;
            translatePage(lang);
            const langSelect = document.getElementById('languageSelect');
            if (langSelect) langSelect.value = lang;
             if(quizArea && currentQuestionIndex < quizData.length && !quizArea.querySelector('[data-translate="quiz_final_score_title"]')) {
                loadQuestion(); // Reload current quiz question with new language
            }
             updateVisualizerText(lang); // Update visualizer text like "Condition 1"
             updateCodeOutputs(); // Re-render code outputs with potentially translated comments/f-strings
        }

        function getTranslation(key, lang, replacements = {}) {
            let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`;
            for (const placeholder in replacements) {
                const regex = new RegExp(`\\{${placeholder}\\}`, 'g');
                text = text.replace(regex, replacements[placeholder]);
            }
            return text;
        }

        function translatePage(lang) {
             if (!translations[lang]) lang = 'en';
             document.querySelectorAll('[data-translate]').forEach(el => {
                 const key = el.getAttribute('data-translate');
                 let translation = getTranslation(key, lang);
                 // Allow HTML in specific keys (like intro_p2 for pc-tags)
                 const allowHTMLKeys = ['intro_p2', 'combining_subtitle', 'quiz_feedback_incorrect', 'completion_theory_desc'];
                 if (el.tagName === 'TITLE') { document.title = translation; }
                 else if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT') { /* Skip */ }
                  else if (el.tagName === 'OPTION') { el.textContent = translation; }
                  else if (allowHTMLKeys.includes(key) || (translation.includes('<') && translation.includes('>'))) {
                     el.innerHTML = translation;
                 } else {
                     el.textContent = translation;
                 }
             });
             document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                const key = el.getAttribute('data-translate-placeholder');
                el.setAttribute('placeholder', getTranslation(key, lang));
            });
             // Translate code comments specifically
             document.querySelectorAll('.code-comment[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                const translatedText = getTranslation(key, lang);
                const commentContent = translatedText.startsWith('#') ? translatedText.substring(1).trim() : translatedText;
                el.textContent = '# ' + commentContent;
             });
         }

        // --- Initialize Language ---
        const initialLang = getStoredLanguage();


        // --- Minimal Nav Logic (Identical to Module 0) ---
        const navToggleButton = document.getElementById('minimal-nav-toggle');
        const navPanel = document.getElementById('minimal-nav-panel');
        const body = document.body;
        if (navToggleButton && navPanel) {
             navToggleButton.addEventListener('click', (event) => { event.stopPropagation(); body.classList.toggle('nav-active'); navToggleButton.setAttribute('aria-expanded', body.classList.contains('nav-active')); });
             document.addEventListener('click', (event) => { if (body.classList.contains('nav-active') && !navPanel.contains(event.target) && event.target !== navToggleButton && !navToggleButton.contains(event.target)) { body.classList.remove('nav-active'); navToggleButton.setAttribute('aria-expanded', 'false'); } });
             navPanel.querySelectorAll('a').forEach(link => { link.addEventListener('click', () => { body.classList.remove('nav-active'); navToggleButton.setAttribute('aria-expanded', 'false'); }); });
             document.addEventListener('keydown', (event) => { if (event.key === 'Escape' && body.classList.contains('nav-active')) { body.classList.remove('nav-active'); navToggleButton.setAttribute('aria-expanded', 'false'); } });
             navToggleButton.setAttribute('aria-expanded', 'false');
        }
        // --- Language Switcher Setup (Identical) ---
        const langSelect = document.getElementById('languageSelect');
        if (langSelect) { langSelect.addEventListener('change', (e) => { setLanguage(e.target.value); }); }


        // --- Intersection Observer for Animations (Identical) ---
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
        const observerCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Special handling for code outputs within observed sections
                    const output = entry.target.querySelector('.code-output');
                    if (output && !output.classList.contains('visible')) {
                       setTimeout(() => output.classList.add('visible'), 300); // Slight delay after section fades in
                    }
                    // If the element itself is a code output (e.g. if observer is attached directly)
                     else if (entry.target.classList.contains('code-output') && !entry.target.classList.contains('visible')) {
                         setTimeout(() => entry.target.classList.add('visible'), 300);
                     }
                     // Observe only once if it's a simple fade-in
                     if (entry.target.classList.contains('fade-in')) {
                         // observer.unobserve(entry.target); // Keep observing if we want re-animation
                     }
                }
                 // Optional: Remove 'visible' if element scrolls out of view for re-animation
                 // else if (!entry.isIntersecting && entry.target.classList.contains('visible')) {
                 //    if (entry.target.classList.contains('fade-in')) { // Only reset fade-ins
                 //       entry.target.classList.remove('visible');
                 //   }
                 //}
            });
        };
        const observer = new IntersectionObserver(observerCallback, observerOptions);
        document.querySelectorAll('.fade-in, .logic-explanation, .logic-demo, .logic-visualizer').forEach(el => {
             observer.observe(el);
        });

        // --- Simulate Code Outputs ---
        function updateCodeOutputs() {
            const currentLang = getStoredLanguage();
            // AND example
            const andOutput = document.querySelector('[data-output-key="and_output"]');
            if(andOutput) {
                const has_ticket = true; const is_adult = true;
                const can_enter_movie = has_ticket && is_adult;
                 const outputText = getTranslation('and_code_comment', currentLang).includes('ambos') ? // crude check for PT
                     `Pode entrar? ${can_enter_movie}` : getTranslation('and_code_comment', currentLang).includes('两者') ? // crude check for ZH
                     `可以进入吗？ ${can_enter_movie}` :
                     `Can enter? ${can_enter_movie}`;
                 andOutput.innerHTML = `> ${outputText} <span class="${can_enter_movie ? 'output-true' : 'output-false'}">(${can_enter_movie})</span>`;
             }
             // OR example
             const orOutput = document.querySelector('[data-output-key="or_output"]');
             if(orOutput) {
                const is_weekend = true; const is_holiday = false;
                const day_off = is_weekend || is_holiday;
                const outputText = getTranslation('or_code_comment', currentLang).includes('precisa') ?
                    `É dia de folga? ${day_off}` : getTranslation('or_code_comment', currentLang).includes('只需要') ?
                    `是休息日吗？ ${day_off}` :
                    `Is it a day off? ${day_off}`;
                orOutput.innerHTML = `> ${outputText} <span class="${day_off ? 'output-true' : 'output-false'}">(${day_off})</span>`;
            }
            // NOT example
            const notOutput = document.querySelector('[data-output-key="not_output"]');
             if(notOutput) {
                const is_logged_in = false;
                const show_login_prompt = !is_logged_in;
                 const outputText = getTranslation('not_code_comment', currentLang).includes('Inverte') ?
                     `Mostrar prompt de login? ${show_login_prompt}` : getTranslation('not_code_comment', currentLang).includes('翻转') ?
                     `显示登录提示？ ${show_login_prompt}` :
                     `Show login prompt? ${show_login_prompt}`;
                 notOutput.innerHTML = `> ${outputText} <span class="${show_login_prompt ? 'output-true' : 'output-false'}">(${show_login_prompt})</span>`;
             }
             // Combining example
             const combiningOutput = document.querySelector('[data-output-key="combining_output"]');
             if (combiningOutput) {
                const is_admin = false; const is_vip = true; const is_banned = false;
                const has_special_access = (is_admin || is_vip) && !is_banned;
                 const outputText = getTranslation('combining_title', currentLang).includes('Combinando') ?
                     `Acesso especial concedido? ${has_special_access}` : getTranslation('combining_title', currentLang).includes('组合') ?
                     `授予特殊访问权限？ ${has_special_access}`:
                     `Special access granted? ${has_special_access}`;
                combiningOutput.innerHTML = `> ${outputText} <span class="${has_special_access ? 'output-true' : 'output-false'}">(${has_special_access})</span>`;
            }

            // Trigger visibility if elements are already in view
            document.querySelectorAll('.code-output').forEach(output => {
                const rect = output.getBoundingClientRect();
                 if (rect.top < window.innerHeight && rect.bottom >= 0 && !output.classList.contains('visible')) {
                     setTimeout(() => output.classList.add('visible'), 300);
                 }
            });
        }


        // --- Interactive Logic Visualizers ---
        function updateVisualizerResult(visualizerId) {
            const visualizer = document.getElementById(visualizerId);
            if (!visualizer) return;

            const conditionBoxes = visualizer.querySelectorAll('.condition-box');
            const resultIcon = visualizer.querySelector('.logic-result-icon i');
            let finalResult = false;

            const val1 = conditionBoxes[0]?.getAttribute('data-value') === 'true';
            const val2 = conditionBoxes[1]?.getAttribute('data-value') === 'true'; // Might not exist for NOT

            if (visualizerId === 'and-visualizer') {
                finalResult = val1 && val2;
            } else if (visualizerId === 'or-visualizer') {
                finalResult = val1 || val2;
            } else if (visualizerId === 'not-visualizer') {
                 finalResult = !val1;
                 // Add flip animation class
                 conditionBoxes[0].classList.add('flip');
                 conditionBoxes[0].addEventListener('animationend', () => {
                    conditionBoxes[0].classList.remove('flip');
                 }, { once: true });
            }

            if (finalResult) {
                resultIcon.className = 'fas fa-check-circle';
                resultIcon.style.color = 'var(--success-color)';
            } else {
                resultIcon.className = 'fas fa-times-circle';
                resultIcon.style.color = 'var(--error-color)';
            }
        }

        function toggleCondition(event) {
            const box = event.target.closest('.condition-box');
            if (!box) return;

            const currentValue = box.getAttribute('data-value') === 'true';
            const newValue = !currentValue;

            box.setAttribute('data-value', newValue ? 'true' : 'false');
            box.textContent = newValue ? 'True' : 'False'; // Keep text simple
            box.classList.toggle('true', newValue);
            box.classList.toggle('false', !newValue);
            box.setAttribute('aria-pressed', newValue ? 'true' : 'false');

            const visualizer = box.closest('.logic-visualizer');
            if (visualizer) {
                updateVisualizerResult(visualizer.id);
            }
        }

         // Update text like "Condition 1:", "Condition 2:" on language change
         function updateVisualizerText(lang) {
             document.querySelectorAll('.logic-visualizer').forEach(viz => {
                 const cond1Label = viz.querySelector('[data-translate="viz_condition1"]');
                 const cond2Label = viz.querySelector('[data-translate="viz_condition2"]');
                 const singleCondLabel = viz.querySelector('[data-translate="viz_condition_single"]');
                 const cta = viz.nextElementSibling; // Assumes <p> is directly after

                 if(cond1Label) cond1Label.textContent = getTranslation("viz_condition1", lang);
                 if(cond2Label) cond2Label.textContent = getTranslation("viz_condition2", lang);
                 if(singleCondLabel) singleCondLabel.textContent = getTranslation("viz_condition_single", lang);

                 // Update CTA text based on operator type
                  const ctaKey = viz.id === 'not-visualizer' ? "viz_cta_not" : "viz_cta";
                  if (cta && cta.hasAttribute('data-translate')) { // Check if the next element is the CTA paragraph
                      cta.innerHTML = getTranslation(ctaKey, lang);
                  }
             });
         }

        document.querySelectorAll('.logic-visualizer').forEach(visualizer => {
            visualizer.addEventListener('click', toggleCondition);
            // Add keyboard accessibility
            visualizer.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' || event.key === ' ') {
                    const box = event.target.closest('.condition-box');
                    if(box) {
                        event.preventDefault(); // Prevent page scroll on space
                        toggleCondition(event);
                    }
                }
            });
        });


        // --- Knowledge Check / Quiz ---
         const quizData = [
             // Q1: Identify AND
             { questionKey: "quiz_q1", optionKeys: ["quiz_q1_opt1", "quiz_q1_opt2", "quiz_q1_opt3", "quiz_q1_opt4"], correctAnswer: 2 }, // 'and' is 3rd option (index 2)
             // Q2: True or False -> True
             { questionKey: "quiz_q2", optionKeys: ["quiz_q2_opt1", "quiz_q2_opt2", "quiz_q2_opt3", "quiz_q2_opt4"], correctAnswer: 0 }, // True is 1st option (index 0)
             // Q3: Identify NOT purpose
             { questionKey: "quiz_q3", optionKeys: ["quiz_q3_opt1", "quiz_q3_opt2", "quiz_q3_opt3", "quiz_q3_opt4"], correctAnswer: 2 }, // Reverses boolean is 3rd option (index 2)
             // Q4: Combined logic: (user == 'admin' or level > 5) and not is_locked -> ('guest'=='admin' or 7 > 5) and not False -> (False or True) and True -> True and True -> True
             { questionKey: "quiz_q4", optionKeys: ["quiz_q4_opt1", "quiz_q4_opt2", "quiz_q4_opt3", "quiz_q4_opt4"], correctAnswer: 0 } // True is 1st option (index 0)
         ];

        let currentQuestionIndex = 0;
        let score = 0;
        const quizArea = document.getElementById('quiz-area');
        const feedbackArea = document.getElementById('quiz-feedback');
        const nextButton = document.getElementById('next-question-btn');

        function loadQuestion() {
             const currentLang = getStoredLanguage();
             if (!quizArea || currentQuestionIndex >= quizData.length) {
                  if (quizArea && !quizArea.querySelector('[data-translate="quiz_final_score_title"]')) {
                     showFinalScore();
                  }
                  return;
              }

             const currentQuiz = quizData[currentQuestionIndex];
             const questionText = getTranslation(currentQuiz.questionKey, currentLang);
             // Replace backticks with <code> tags in question text
             const formattedQuestion = questionText.replace(/`([^`]+)`/g, '<code>$1</code>');

             quizArea.innerHTML = `
                 <div class="quiz-question">${currentQuestionIndex + 1}. ${formattedQuestion}</div>
                 <div class="quiz-options">
                     ${currentQuiz.optionKeys.map((optionKey, index) => {
                         const optionText = getTranslation(optionKey, currentLang);
                         // Replace backticks with <code> tags in options too
                         const formattedOption = optionText.replace(/`([^`]+)`/g, '<code>$1</code>');
                         return `<button class="quiz-option-btn" data-index="${index}">${formattedOption}</button>`;
                     }).join('')}
                 </div>
             `;

             feedbackArea.classList.remove('visible', 'correct', 'incorrect');
             feedbackArea.textContent = '';
             nextButton.classList.remove('visible');
             nextButton.disabled = true; // Disable until an answer is selected

             document.querySelectorAll('.quiz-option-btn').forEach(button => {
                 button.addEventListener('click', handleAnswer);
             });
         }

        function handleAnswer(event) {
             const currentLang = getStoredLanguage();
             const selectedButton = event.target.closest('.quiz-option-btn'); // Ensure we get the button
              if (!selectedButton) return; // Exit if click wasn't on a button

             const selectedIndex = parseInt(selectedButton.dataset.index);
             const correctIndex = quizData[currentQuestionIndex].correctAnswer;
             const correctOptionKey = quizData[currentQuestionIndex].optionKeys[correctIndex];
             // Format the correct answer text with <code> tags if needed
             const rawCorrectAnswerText = getTranslation(correctOptionKey, currentLang);
             const correctAnswerText = rawCorrectAnswerText.replace(/`([^`]+)`/g, '<code>$1</code>');

             // Disable all buttons after selection
             document.querySelectorAll('.quiz-option-btn').forEach(btn => {
                btn.disabled = true;
                 btn.classList.remove('shake'); // Reset shake animation class
             });

             feedbackArea.classList.add('visible');

             if (selectedIndex === correctIndex) {
                 selectedButton.classList.add('correct');
                 feedbackArea.innerHTML = getTranslation('quiz_feedback_correct', currentLang);
                 feedbackArea.classList.add('correct');
                 feedbackArea.classList.remove('incorrect');
                 score++;
                 selectedButton.classList.add('tada-anim'); // Correct answer animation
             } else {
                 selectedButton.classList.add('incorrect');
                 // Use innerHTML for feedback to allow the formatted correctAnswerText
                 feedbackArea.innerHTML = getTranslation('quiz_feedback_incorrect', currentLang, { correctAnswerText: `<strong>${correctAnswerText}</strong>` });
                 feedbackArea.classList.add('incorrect');
                 feedbackArea.classList.remove('correct');
                 // Highlight the actual correct answer
                 const correctButton = document.querySelector(`.quiz-option-btn[data-index="${correctIndex}"]`);
                 if(correctButton) correctButton.classList.add('correct'); // Show correct one
                 selectedButton.classList.add('shake'); // Incorrect answer animation
             }

             // Remove animation classes after they finish
              selectedButton.addEventListener('animationend', () => {
                    selectedButton.classList.remove('tada-anim', 'shake');
              }, { once: true });

             // Show and enable the next button
             nextButton.classList.add('visible');
             nextButton.disabled = false;
         }

        function showFinalScore() {
             const currentLang = getStoredLanguage();
             const totalQuestions = quizData.length;
             let resultMessageKey = score === totalQuestions ? 'quiz_final_score_perfect' : 'quiz_final_score_good';

             quizArea.innerHTML = `
                 <div class="quiz-question text-center" data-translate="quiz_final_score_title" style="font-size: 1.5rem;">${getTranslation('quiz_final_score_title', currentLang)}</div>
                 <p class="text-center" style="font-size: 1.2rem; margin-bottom: 1rem;">${getTranslation('quiz_final_score_summary', currentLang, { score: score, total: totalQuestions })}</p>
                 <p class="text-center" style="color: ${score === totalQuestions ? 'var(--success-color)' : 'var(--primary-color)'}; font-weight: bold;">${getTranslation(resultMessageKey, currentLang)}</p>
             `;
             feedbackArea.classList.remove('visible'); // Hide feedback area
             nextButton.style.display = 'none'; // Hide next button
             quizArea.scrollIntoView({ behavior: 'smooth', block: 'center' }); // Scroll to score
         }

        // Event listener for the next button
        nextButton.addEventListener('click', () => {
             currentQuestionIndex++;
             loadQuestion();
         });

        // --- Initial Setup Calls ---
        setLanguage(initialLang); // Apply language FIRST
        updateCodeOutputs(); // Run initially to populate code outputs
        updateVisualizerText(initialLang); // Set initial visualizer text
        // Initialize visualizers to their default state display
        updateVisualizerResult('and-visualizer');
        updateVisualizerResult('or-visualizer');
        updateVisualizerResult('not-visualizer');

        if (quizArea) { loadQuestion(); } // Initial quiz load if quiz area exists

        // Trigger fade-in animations for elements initially in view
         document.querySelectorAll('.fade-in').forEach(el => {
             const rect = el.getBoundingClientRect();
             if(rect.top < window.innerHeight && rect.bottom >= 0) {
                 // Element is initially visible, CSS animation runs automatically
             }
         });


    }); // End DOMContentLoaded
    </script>

</body>
</html>