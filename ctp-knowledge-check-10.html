<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="kc10_page_title">Knowledge Check: Module 10 - Intro to Lists</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Copied from Dashboard) --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --success-color: #198754;
            --error-color: #dc3545;
            --check-color: #6f42c1; /* Used for KC focus/accent */
            --progress-bg: #e9ecef;
            --progress-fill: var(--check-color);
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
             /* Colors for lang switcher */
             --lang-select-border: var(--check-color);
             --lang-select-bg-hover: rgba(111, 66, 193, 0.05); /* Light purple hover */
             --lang-option-bg: var(--background-card);
             --lang-option-text: var(--text-dark);
             --lang-arrow-color: var(--check-color);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            padding-bottom: 4rem; /* Space for footer/results */
        }

        /* --- KC Page Header --- */
        .kc-header {
            background: linear-gradient(135deg, #5a2ab8, var(--check-color)); /* Purple gradient */
            color: var(--text-light);
            padding: 1.5rem 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }
        .header-content {
            flex-grow: 1;
            text-align: center; /* Center title */
        }
        .kc-header h1 {
            font-family: var(--font-title);
            font-size: 1.8rem; /* Slightly smaller than dashboard */
            margin: 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        .return-button {
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 5px;
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
            display: inline-flex; /* Align icon and text */
            align-items: center;
        }
        .return-button i { margin-right: 6px; }
        .return-button:hover { background-color: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.8); }

        /* Language Switcher Styles (Adapted) */
        .language-switcher-container {
           position: absolute;
           top: 10px;
           right: 15px;
           z-index: 10;
        }
         #languageSelect {
            background: rgba(255, 255, 255, 0.1); /* Semi-transparent on header */
            color: var(--text-light);
            border: 1px solid var(--lang-select-border);
            border-radius: 5px;
            padding: 6px 30px 6px 12px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23${encodeURIComponent(getComputedStyle(document.documentElement).getPropertyValue('--text-light').trim().substring(1))}%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 8px auto;
            transition: border-color 0.3s ease, background-color 0.3s ease;
         }
         #languageSelect:hover { background-color: rgba(255, 255, 255, 0.15); }
         #languageSelect:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); }
         #languageSelect option {
              background: var(--lang-option-bg);
              color: var(--lang-option-text);
              padding: 5px;
         }

        /* --- Quiz Container & Elements --- */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background-color: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }

        .quiz-info {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed var(--border-color);
            font-size: 0.95rem;
            color: var(--text-muted);
        }
        .quiz-info strong { color: var(--text-dark); font-weight: 500; }
        .quiz-info .highlight { color: var(--check-color); font-weight: 700; }

        .quiz-form fieldset {
            border: none;
            padding: 0;
            margin: 0;
        }

        .question-block {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: #fdfdff; /* Slightly off-white */
            border: 1px solid #eef;
            border-radius: var(--border-radius);
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: var(--text-dark);
        }
        .question-text .q-number {
            display: inline-block;
            background-color: var(--check-color);
            color: var(--text-light);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-right: 8px;
            min-width: 25px; /* Ensure consistent width */
            text-align: center;
        }

        .options-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .option-item {
            position: relative;
        }

        .option-item input[type="radio"] {
            position: absolute;
            opacity: 0; /* Hide radio button visually */
            width: 0;
            height: 0;
        }

        .option-item label {
            display: block;
            padding: 0.8rem 1rem 0.8rem 2.5rem; /* Space for custom radio */
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
            position: relative; /* For custom radio */
            font-size: 1rem;
        }
        .option-item label:hover { background-color: #f8f9fa; }

        /* Custom Radio Button Style */
        .option-item label::before {
            content: '';
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            border: 2px solid var(--secondary-color);
            border-radius: 50%;
            background-color: #fff;
            transition: border-color 0.2s;
        }
        .option-item label::after { /* The dot inside */
            content: '';
            position: absolute;
            left: calc(1rem + 4px);
            top: 50%;
            transform: translateY(-50%) scale(0); /* Hidden by default */
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--check-color);
            transition: transform 0.2s ease-out;
        }

        /* Checked State */
        .option-item input[type="radio"]:checked + label {
            border-color: var(--check-color);
            background-color: #f4f0fc; /* Light purple bg */
        }
        .option-item input[type="radio"]:checked + label::before {
            border-color: var(--check-color);
        }
        .option-item input[type="radio"]:checked + label::after {
            transform: translateY(-50%) scale(1); /* Show dot */
        }
        /* Focus State */
        .option-item input[type="radio"]:focus + label {
             box-shadow: 0 0 0 2px rgba(111, 66, 193, 0.3); /* Purple focus ring */
             border-color: var(--check-color);
        }

        /* Submit Button */
        .submit-button {
            display: block;
            width: 100%;
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-light);
            background-color: var(--check-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color var(--transition-speed), transform 0.1s ease;
            margin-top: 2rem;
            font-family: var(--font-body);
        }
        .submit-button:hover { background-color: #5a2ab8; }
        .submit-button:active { transform: scale(0.98); }
        .submit-button:disabled { background-color: var(--secondary-color); cursor: not-allowed; }

        /* Results Area */
        .results-area {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            display: none; /* Hidden initially */
            animation: fadeInResult 0.5s ease-out;
        }
        @keyframes fadeInResult { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .results-area.passed { background-color: #e8f5e9; border: 1px solid var(--success-color); }
        .results-area.failed { background-color: #fce8e6; border: 1px solid var(--error-color); }

        .results-area h3 {
            font-family: var(--font-title);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }
        .results-area.passed h3 { color: var(--success-color); }
        .results-area.failed h3 { color: var(--error-color); }

        .results-score {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }
        .results-score span { font-size: 1.5rem; }
        .results-message { font-size: 1rem; margin-bottom: 1.5rem; }

        .retry-button {
            display: inline-block;
            padding: 0.6rem 1.2rem;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-light);
            background-color: var(--secondary-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color var(--transition-speed);
            font-family: var(--font-body);
        }
        .retry-button:hover { background-color: #5a6268; }
        .results-area.passed .retry-button { display: none; } /* Hide retry if passed */

        /* Footer */
        footer { text-align: center; padding: 1.5rem; margin-top: 3rem; background-color: var(--background-card); border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }

         /* Responsive */
         @media (max-width: 768px) {
             html { font-size: 15px; }
             .kc-header h1 { font-size: 1.5rem; }
             .return-button { padding: 0.4rem 0.8rem; font-size: 0.85rem; }
             .quiz-container { padding: 1.5rem; }
             .question-block { padding: 1rem; }
             .language-switcher-container { top: 5px; right: 10px; }
             #languageSelect { padding: 4px 25px 4px 8px; font-size: 0.8rem; }
         }
         @media (max-width: 576px) {
             html { font-size: 14px; }
             .kc-header { flex-direction: column-reverse; padding: 1rem; } /* Stack return button below */
             .kc-header h1 { margin-bottom: 0.8rem; font-size: 1.3rem; }
             .return-button { margin-top: 0.5rem; }
             .quiz-container { padding: 1rem; }
             .question-text { font-size: 1rem; }
             .option-item label { font-size: 0.95rem; padding: 0.7rem 0.8rem 0.7rem 2.2rem; }
             .option-item label::before { left: 0.8rem; width: 16px; height: 16px; }
             .option-item label::after { left: calc(0.8rem + 3px); width: 10px; height: 10px; }
             .language-switcher-container { position: static; margin-top: 10px; text-align: center; width: 100%; }
         }

    </style>
</head>
<body>

    <header class="kc-header">
         <!-- Language Switcher -->
         <div class="language-switcher-container">
            <select id="languageSelect" data-translate-aria-label="lang_select_aria" aria-label="Select Language">
                <option value="en" data-translate="lang_en">🇬🇧 English</option>
                <option value="pt" data-translate="lang_pt">🇧🇷 Português</option>
                <option value="zh" data-translate="lang_zh">🇨🇳 中文</option>
            </select>
        </div>
        <a href="ctp-dashboard.html" class="return-button">
            <i class="fas fa-arrow-left"></i> <span data-translate="kc_return_button">Return to Dashboard</span>
        </a>
        <div class="header-content">
            <h1 data-translate="kc10_header_title">Knowledge Check: Module 10</h1>
        </div>
    </header>

    <main>
        <div class="quiz-container">
            <div class="quiz-info">
                 <p data-translate="kc_instructions">Select the best answer for each question. You need <span class="highlight">6</span> out of 10 correct answers to pass. You can attempt this check as many times as needed.</p>
            </div>

            <form id="quiz-form" class="quiz-form">
                <fieldset>
                    <legend class="sr-only" data-translate="kc10_quiz_legend">Module 10 Quiz Questions</legend>
                    <!-- Questions will be injected here by JavaScript -->
                </fieldset>

                <button type="submit" class="submit-button" id="submit-button" data-translate="kc_submit_button">Check Answers</button>
            </form>

            <div id="results-area" class="results-area" aria-live="polite">
                <!-- Results will be injected here -->
            </div>
        </div>
    </main>

    <footer>
        <p data-translate="footer_text">Part of the Road to Free Open AGI Project</p>
    </footer>

    <script>
        // --- Translations Object ---
        const translations = {
             en: {
                "kc10_page_title": "Knowledge Check: Module 10 - Intro to Lists",
                "kc10_header_title": "Knowledge Check: Module 10",
                "kc_return_button": "Return to Dashboard",
                "kc_instructions": "Select the best answer for each question. You need <span class=\"highlight\">6</span> out of 10 correct answers to pass. You can attempt this check as many times as needed.",
                "kc10_quiz_legend": "Module 10 Quiz Questions",
                "kc_question_label": "Question {num}",
                "kc_submit_button": "Check Answers",
                "kc_result_header_passed": "Passed!",
                "kc_result_header_failed": "Try Again!",
                "kc_result_score": "Your score: <span class=\"score-value\">{score}</span> / 10",
                "kc_result_message_passed": "Great job! You've successfully completed the knowledge check for Module 10. Your progress has been saved.",
                "kc_result_message_failed": "Don't worry! Review the module materials and try again. You can do it!",
                "kc_retry_button": "Retry Quiz",
                "lang_select_aria": "Select Language", "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
                "footer_text": "Part of the Road to Free Open AGI Project",
                // Module 10 Questions & Options (English)
                "kc10_q1_text": "Which syntax correctly creates an empty list in Python?",
                "kc10_q1_opt1": "<code>my_list = []</code>",
                "kc10_q1_opt2": "<code>my_list = ()</code>",
                "kc10_q1_opt3": "<code>my_list = {}</code>",
                "kc10_q1_opt4": "<code>my_list = list()</code>", // Technically also correct, but [] is more common
                "kc10_q2_text": "What is the index of the *first* element in a Python list?",
                "kc10_q2_opt1": "1",
                "kc10_q2_opt2": "0",
                "kc10_q2_opt3": "-1",
                "kc10_q2_opt4": "It depends on the list size.",
                "kc10_q3_text": "Given <code>colors = ['red', 'green', 'blue']</code>, how do you access the element 'green'?",
                "kc10_q3_opt1": "<code>colors[0]</code>",
                "kc10_q3_opt2": "<code>colors(1)</code>",
                "kc10_q3_opt3": "<code>colors[1]</code>",
                "kc10_q3_opt4": "<code>colors['green']</code>",
                "kc10_q4_text": "What does the <code>len()</code> function return when used with a list like <code>numbers = [10, 20, 30]</code>?",
                "kc10_q4_opt1": "The largest number in the list (30).",
                "kc10_q4_opt2": "The sum of the numbers (60).",
                "kc10_q4_opt3": "The number of elements in the list (3).",
                "kc10_q4_opt4": "The memory address of the list.",
                "kc10_q5_text": "What happens if you try to access an index that is outside the valid range of a list (e.g., <code>my_list[10]</code> for a list with 3 elements)?",
                "kc10_q5_opt1": "It returns <code>None</code>.",
                "kc10_q5_opt2": "It returns the last element.",
                "kc10_q5_opt3": "It raises an <code>IndexError</code>.",
                "kc10_q5_opt4": "It wraps around to the beginning of the list.",
                "kc10_q6_text": "Which of the following correctly creates a list named <code>items</code> containing the numbers 1, 2, and 3?",
                "kc10_q6_opt1": "<code>items = {1, 2, 3}</code>",
                "kc10_q6_opt2": "<code>items = (1, 2, 3)</code>",
                "kc10_q6_opt3": "<code>items = [1, 2, 3]</code>",
                "kc10_q6_opt4": "<code>items = '1, 2, 3'</code>",
                "kc10_q7_text": "Can a single Python list contain elements of different data types (e.g., integers, strings, booleans)?",
                "kc10_q7_opt1": "Yes, lists are heterogeneous.",
                "kc10_q7_opt2": "No, all elements must be of the same type.",
                "kc10_q7_opt3": "Only if explicitly declared.",
                "kc10_q7_opt4": "Only strings and numbers can be mixed.",
                "kc10_q8_text": "Consider the list <code>data = [True, 100, 'hello']</code>. What is the value of <code>data[2]</code>?",
                "kc10_q8_opt1": "<code>True</code>",
                "kc10_q8_opt2": "<code>100</code>",
                "kc10_q8_opt3": "<code>'hello'</code>",
                "kc10_q8_opt4": "An error occurs.",
                "kc10_q9_text": "Which statement best describes Python lists?",
                "kc10_q9_opt1": "They are immutable sequences.",
                "kc10_q9_opt2": "They store key-value pairs.",
                "kc10_q9_opt3": "They are ordered, mutable sequences of items.",
                "kc10_q9_opt4": "They are unordered collections of unique items.",
                "kc10_q10_text": "If <code>my_list = [5, 10, 15, 20]</code>, what is <code>len(my_list)</code>?",
                "kc10_q10_opt1": "<code>20</code>",
                "kc10_q10_opt2": "<code>3</code>",
                "kc10_q10_opt3": "<code>4</code>",
                "kc10_q10_opt4": "<code>5</code>"
            },
             pt: {
                "kc10_page_title": "Verificação: Módulo 10 - Intro a Listas",
                "kc10_header_title": "Verificação de Conhecimento: Módulo 10",
                "kc_return_button": "Voltar ao Painel",
                "kc_instructions": "Selecione a melhor resposta para cada pergunta. Você precisa de <span class=\"highlight\">6</span> de 10 respostas corretas para passar. Você pode tentar esta verificação quantas vezes precisar.",
                "kc10_quiz_legend": "Questões do Quiz do Módulo 10",
                "kc_question_label": "Questão {num}",
                "kc_submit_button": "Verificar Respostas",
                "kc_result_header_passed": "Aprovado!",
                "kc_result_header_failed": "Tente Novamente!",
                "kc_result_score": "Sua pontuação: <span class=\"score-value\">{score}</span> / 10",
                "kc_result_message_passed": "Ótimo trabalho! Você completou com sucesso a verificação de conhecimento para o Módulo 10. Seu progresso foi salvo.",
                "kc_result_message_failed": "Não se preocupe! Revise os materiais do módulo e tente novamente. Você consegue!",
                "kc_retry_button": "Tentar Novamente",
                "lang_select_aria": "Selecionar Idioma", "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
                "footer_text": "Parte do Projeto Road to Free Open AGI",
                // Module 10 Questions & Options (Portuguese)
                "kc10_q1_text": "Qual sintaxe cria corretamente uma lista vazia em Python?",
                "kc10_q1_opt1": "<code>minha_lista = []</code>",
                "kc10_q1_opt2": "<code>minha_lista = ()</code>",
                "kc10_q1_opt3": "<code>minha_lista = {}</code>",
                "kc10_q1_opt4": "<code>minha_lista = list()</code>", // Tecnicamente correto, mas [] é mais comum
                "kc10_q2_text": "Qual é o índice do *primeiro* elemento em uma lista Python?",
                "kc10_q2_opt1": "1",
                "kc10_q2_opt2": "0",
                "kc10_q2_opt3": "-1",
                "kc10_q2_opt4": "Depende do tamanho da lista.",
                "kc10_q3_text": "Dado <code>cores = ['vermelho', 'verde', 'azul']</code>, como você acessa o elemento 'verde'?",
                "kc10_q3_opt1": "<code>cores[0]</code>",
                "kc10_q3_opt2": "<code>cores(1)</code>",
                "kc10_q3_opt3": "<code>cores[1]</code>",
                "kc10_q3_opt4": "<code>cores['verde']</code>",
                "kc10_q4_text": "O que a função <code>len()</code> retorna quando usada com uma lista como <code>numeros = [10, 20, 30]</code>?",
                "kc10_q4_opt1": "O maior número na lista (30).",
                "kc10_q4_opt2": "A soma dos números (60).",
                "kc10_q4_opt3": "O número de elementos na lista (3).",
                "kc10_q4_opt4": "O endereço de memória da lista.",
                "kc10_q5_text": "O que acontece se você tentar acessar um índice que está fora do intervalo válido de uma lista (ex: <code>minha_lista[10]</code> para uma lista com 3 elementos)?",
                "kc10_q5_opt1": "Retorna <code>None</code>.",
                "kc10_q5_opt2": "Retorna o último elemento.",
                "kc10_q5_opt3": "Levanta um <code>IndexError</code>.",
                "kc10_q5_opt4": "Dá a volta para o início da lista.",
                "kc10_q6_text": "Qual das seguintes opções cria corretamente uma lista chamada <code>itens</code> contendo os números 1, 2 e 3?",
                "kc10_q6_opt1": "<code>itens = {1, 2, 3}</code>",
                "kc10_q6_opt2": "<code>itens = (1, 2, 3)</code>",
                "kc10_q6_opt3": "<code>itens = [1, 2, 3]</code>",
                "kc10_q6_opt4": "<code>itens = '1, 2, 3'</code>",
                "kc10_q7_text": "Uma única lista Python pode conter elementos de diferentes tipos de dados (ex: inteiros, strings, booleanos)?",
                "kc10_q7_opt1": "Sim, listas são heterogêneas.",
                "kc10_q7_opt2": "Não, todos os elementos devem ser do mesmo tipo.",
                "kc10_q7_opt3": "Apenas se declarado explicitamente.",
                "kc10_q7_opt4": "Apenas strings e números podem ser misturados.",
                "kc10_q8_text": "Considere a lista <code>dados = [True, 100, 'ola']</code>. Qual é o valor de <code>dados[2]</code>?",
                "kc10_q8_opt1": "<code>True</code>",
                "kc10_q8_opt2": "<code>100</code>",
                "kc10_q8_opt3": "<code>'ola'</code>",
                "kc10_q8_opt4": "Ocorre um erro.",
                "kc10_q9_text": "Qual afirmação descreve melhor as listas Python?",
                "kc10_q9_opt1": "São sequências imutáveis.",
                "kc10_q9_opt2": "Armazenam pares chave-valor.",
                "kc10_q9_opt3": "São sequências ordenadas e mutáveis de itens.",
                "kc10_q9_opt4": "São coleções não ordenadas de itens únicos.",
                "kc10_q10_text": "Se <code>minha_lista = [5, 10, 15, 20]</code>, qual é o valor de <code>len(minha_lista)</code>?",
                "kc10_q10_opt1": "<code>20</code>",
                "kc10_q10_opt2": "<code>3</code>",
                "kc10_q10_opt3": "<code>4</code>",
                "kc10_q10_opt4": "<code>5</code>"
             },
             zh: {
                 "kc10_page_title": "知识测验：模块 10 - 列表简介",
                "kc10_header_title": "知识测验：模块 10",
                "kc_return_button": "返回仪表板",
                "kc_instructions": "为每个问题选择最佳答案。您需要答对 10 个问题中的 <span class=\"highlight\">6</span> 个才能通过。您可以根据需要尝试多次此测验。",
                "kc10_quiz_legend": "模块 10 测验问题",
                "kc_question_label": "问题 {num}",
                "kc_submit_button": "检查答案",
                "kc_result_header_passed": "通过！",
                "kc_result_header_failed": "再试一次！",
                "kc_result_score": "你的分数：<span class=\"score-value\">{score}</span> / 10",
                "kc_result_message_passed": "干得漂亮！您已成功完成模块 10 的知识测验。您的进度已保存。",
                "kc_result_message_failed": "别担心！复习模块材料，然后重试。你能行的！",
                "kc_retry_button": "重试测验",
                "lang_select_aria": "选择语言", "lang_en": "🇬🇧 English", "lang_pt": "🇧🇷 Português", "lang_zh": "🇨🇳 中文",
                "footer_text": "通往自由开放AGI之路项目的一部分",
                // Module 10 Questions & Options (Chinese)
                "kc10_q1_text": "哪种语法在 Python 中正确创建了一个空列表？",
                "kc10_q1_opt1": "<code>my_list = []</code>",
                "kc10_q1_opt2": "<code>my_list = ()</code>",
                "kc10_q1_opt3": "<code>my_list = {}</code>",
                "kc10_q1_opt4": "<code>my_list = list()</code>", // 技术上也正确，但 [] 更常见
                "kc10_q2_text": "Python 列表中*第一个*元素的索引是什么？",
                "kc10_q2_opt1": "1",
                "kc10_q2_opt2": "0",
                "kc10_q2_opt3": "-1",
                "kc10_q2_opt4": "取决于列表的大小。",
                "kc10_q3_text": "给定 <code>colors = ['red', 'green', 'blue']</code>，如何访问元素 'green'？",
                "kc10_q3_opt1": "<code>colors[0]</code>",
                "kc10_q3_opt2": "<code>colors(1)</code>",
                "kc10_q3_opt3": "<code>colors[1]</code>",
                "kc10_q3_opt4": "<code>colors['green']</code>",
                "kc10_q4_text": "当 <code>len()</code> 函数用于像 <code>numbers = [10, 20, 30]</code> 这样的列表时，它返回什么？",
                "kc10_q4_opt1": "列表中的最大数字 (30)。",
                "kc10_q4_opt2": "数字的总和 (60)。",
                "kc10_q4_opt3": "列表中的元素数量 (3)。",
                "kc10_q4_opt4": "列表的内存地址。",
                "kc10_q5_text": "如果您尝试访问列表有效范围之外的索引（例如，对于一个有 3 个元素的列表使用 <code>my_list[10]</code>），会发生什么？",
                "kc10_q5_opt1": "返回 <code>None</code>。",
                "kc10_q5_opt2": "返回最后一个元素。",
                "kc10_q5_opt3": "引发 <code>IndexError</code>。",
                "kc10_q5_opt4": "它会环绕到列表的开头。",
                "kc10_q6_text": "以下哪个选项正确创建了一个名为 <code>items</code> 且包含数字 1, 2, 3 的列表？",
                "kc10_q6_opt1": "<code>items = {1, 2, 3}</code>",
                "kc10_q6_opt2": "<code>items = (1, 2, 3)</code>",
                "kc10_q6_opt3": "<code>items = [1, 2, 3]</code>",
                "kc10_q6_opt4": "<code>items = '1, 2, 3'</code>",
                "kc10_q7_text": "一个 Python 列表可以包含不同数据类型的元素（例如整数、字符串、布尔值）吗？",
                "kc10_q7_opt1": "是的，列表是异构的。",
                "kc10_q7_opt2": "不，所有元素必须是相同类型。",
                "kc10_q7_opt3": "只有在明确声明的情况下。",
                "kc10_q7_opt4": "只有字符串和数字可以混合。",
                "kc10_q8_text": "考虑列表 <code>data = [True, 100, 'hello']</code>。<code>data[2]</code> 的值是什么？",
                "kc10_q8_opt1": "<code>True</code>",
                "kc10_q8_opt2": "<code>100</code>",
                "kc10_q8_opt3": "<code>'hello'</code>",
                "kc10_q8_opt4": "发生错误。",
                "kc10_q9_text": "哪个陈述最能描述 Python 列表？",
                "kc10_q9_opt1": "它们是不可变的序列。",
                "kc10_q9_opt2": "它们存储键值对。",
                "kc10_q9_opt3": "它们是有序的、可变的项目序列。",
                "kc10_q9_opt4": "它们是无序的唯一项目集合。",
                "kc10_q10_text": "如果 <code>my_list = [5, 10, 15, 20]</code>，<code>len(my_list)</code> 的值是多少？",
                "kc10_q10_opt1": "<code>20</code>",
                "kc10_q10_opt2": "<code>3</code>",
                "kc10_q10_opt3": "<code>4</code>",
                "kc10_q10_opt4": "<code>5</code>"
             }
         };

        // --- Quiz Data ---
        const quizData = {
            moduleId: 10,
            passingScore: 6,
            questions: [
                { question_key: "kc10_q1_text", options_keys: ["kc10_q1_opt1", "kc10_q1_opt2", "kc10_q1_opt3", "kc10_q1_opt4"], correct_index: 0 }, // [] is most idiomatic
                { question_key: "kc10_q2_text", options_keys: ["kc10_q2_opt1", "kc10_q2_opt2", "kc10_q2_opt3", "kc10_q2_opt4"], correct_index: 1 },
                { question_key: "kc10_q3_text", options_keys: ["kc10_q3_opt1", "kc10_q3_opt2", "kc10_q3_opt3", "kc10_q3_opt4"], correct_index: 2 },
                { question_key: "kc10_q4_text", options_keys: ["kc10_q4_opt1", "kc10_q4_opt2", "kc10_q4_opt3", "kc10_q4_opt4"], correct_index: 2 },
                { question_key: "kc10_q5_text", options_keys: ["kc10_q5_opt1", "kc10_q5_opt2", "kc10_q5_opt3", "kc10_q5_opt4"], correct_index: 2 },
                { question_key: "kc10_q6_text", options_keys: ["kc10_q6_opt1", "kc10_q6_opt2", "kc10_q6_opt3", "kc10_q6_opt4"], correct_index: 2 },
                { question_key: "kc10_q7_text", options_keys: ["kc10_q7_opt1", "kc10_q7_opt2", "kc10_q7_opt3", "kc10_q7_opt4"], correct_index: 0 },
                { question_key: "kc10_q8_text", options_keys: ["kc10_q8_opt1", "kc10_q8_opt2", "kc10_q8_opt3", "kc10_q8_opt4"], correct_index: 2 },
                { question_key: "kc10_q9_text", options_keys: ["kc10_q9_opt1", "kc10_q9_opt2", "kc10_q9_opt3", "kc10_q9_opt4"], correct_index: 2 },
                { question_key: "kc10_q10_text", options_keys: ["kc10_q10_opt1", "kc10_q10_opt2", "kc10_q10_opt3", "kc10_q10_opt4"], correct_index: 2 }
            ]
        };

        // --- Core Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
            const LANGUAGE_STORAGE_KEY = 'userLanguage';
            const quizForm = document.getElementById('quiz-form');
            const resultsArea = document.getElementById('results-area');
            const submitButton = document.getElementById('submit-button');
            const languageSelectElement = document.getElementById('languageSelect');

            // --- Translation Functions ---
            function getStoredLanguage() {
                const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY);
                if (storedLang && translations[storedLang]) return storedLang;
                const browserLang = navigator.language || navigator.userLanguage;
                if (browserLang.startsWith('pt')) return 'pt';
                if (browserLang.startsWith('zh')) return 'zh';
                return 'en';
            }

            function setLanguage(lang) {
                if (!translations[lang]) lang = 'en'; // Fallback
                localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
                document.documentElement.lang = lang;
                if (languageSelectElement) languageSelectElement.value = lang;
                translatePage(lang);
                renderQuiz(lang); // Re-render quiz with new language
                 // Retranslate results if visible
                const currentScore = resultsArea.dataset.score;
                if(resultsArea.style.display !== 'none' && currentScore !== undefined) {
                    displayResults(parseInt(currentScore, 10), lang);
                }
            }

            function getTranslation(key, lang, replacements = {}) {
                let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`;
                for (const placeholder in replacements) {
                    const regex = new RegExp(`\\{${placeholder}\\}`, 'g');
                    text = text.replace(regex, replacements[placeholder]);
                }
                return text;
            }

            function translatePage(lang) {
                document.querySelectorAll('[data-translate]').forEach(el => {
                    const key = el.getAttribute('data-translate');
                    const translation = getTranslation(key, lang);
                    if (el.tagName === 'TITLE') { document.title = translation; }
                    else if (translation.includes('<') && translation.includes('>')) { el.innerHTML = translation; } // Allow basic HTML in translations
                    else { el.textContent = translation; }
                });
                document.querySelectorAll('[data-translate-aria-label]').forEach(el => {
                    const key = el.getAttribute('data-translate-aria-label');
                    el.setAttribute('aria-label', getTranslation(key, lang));
                });
                document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-translate-placeholder');
                    el.setAttribute('placeholder', getTranslation(key, lang));
                });
            }

            // --- LocalStorage ---
            function loadKnowledgeCheckStatus() {
                try {
                    const storedStatus = localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY);
                    const parsed = storedStatus ? JSON.parse(storedStatus) : {};
                    return typeof parsed === 'object' && parsed !== null ? parsed : {};
                } catch (e) {
                    console.error("Error reading KC status from localStorage:", e);
                    return {};
                }
            }

            function saveKnowledgeCheckStatus(statusObject) {
                try {
                    localStorage.setItem(KNOWLEDGE_CHECK_STORAGE_KEY, JSON.stringify(statusObject));
                } catch (e) {
                    console.error("Error saving KC status to localStorage:", e);
                }
            }

            function updateProgress(moduleId) {
                const currentStatus = loadKnowledgeCheckStatus();
                if (currentStatus[moduleId] !== true) {
                    currentStatus[moduleId] = true;
                    saveKnowledgeCheckStatus(currentStatus);
                    console.log(`Progress for module ${moduleId} saved.`);
                } else {
                    console.log(`Progress for module ${moduleId} already saved.`);
                }
            }

             // --- Quiz Rendering ---
             function renderQuiz(lang) {
                const fieldset = quizForm.querySelector('fieldset');
                fieldset.innerHTML = ''; // Clear previous questions

                quizData.questions.forEach((q, index) => {
                    const questionBlock = document.createElement('div');
                    questionBlock.className = 'question-block';

                    const questionText = document.createElement('p');
                    questionText.className = 'question-text';
                    const qNumberSpan = `<span class="q-number">${index + 1}</span>`;
                    questionText.innerHTML = `${qNumberSpan} ${getTranslation(q.question_key, lang)}`; // Use innerHTML for <code>
                    questionBlock.appendChild(questionText);

                    const optionsList = document.createElement('ul');
                    optionsList.className = 'options-list';
                    optionsList.setAttribute('role', 'radiogroup'); // Accessibility
                    optionsList.setAttribute('aria-labelledby', `q${index}_label`); // Link to question text (need to add id to questionText)
                    questionText.id = `q${index}_label`; // Add id for aria-labelledby

                    q.options_keys.forEach((opt_key, opt_index) => {
                        const listItem = document.createElement('li');
                        listItem.className = 'option-item';

                        const radioInput = document.createElement('input');
                        radioInput.type = 'radio';
                        radioInput.name = `q${index}`;
                        radioInput.value = opt_index;
                        radioInput.id = `q${index}_opt${opt_index}`;
                        radioInput.required = true; // Make sure an answer is selected

                        const label = document.createElement('label');
                        label.htmlFor = `q${index}_opt${opt_index}`;
                        label.innerHTML = getTranslation(opt_key, lang); // Use innerHTML for <code> tags

                        listItem.appendChild(radioInput);
                        listItem.appendChild(label);
                        optionsList.appendChild(listItem);
                    });

                    questionBlock.appendChild(optionsList);
                    fieldset.appendChild(questionBlock);
                });

                 // Reset results area and button
                resultsArea.style.display = 'none';
                resultsArea.className = 'results-area'; // Reset pass/fail class
                submitButton.disabled = false;
            }

             // --- Quiz Submission and Results ---
            function displayResults(score, lang) {
                 const passed = score >= quizData.passingScore;
                 resultsArea.innerHTML = ''; // Clear previous results

                 const header = document.createElement('h3');
                 header.textContent = getTranslation(passed ? 'kc_result_header_passed' : 'kc_result_header_failed', lang);

                 const scoreText = document.createElement('p');
                 scoreText.className = 'results-score';
                 scoreText.innerHTML = getTranslation('kc_result_score', lang, { score: score }); // Use innerHTML for span

                 const messageText = document.createElement('p');
                 messageText.className = 'results-message';
                 messageText.textContent = getTranslation(passed ? 'kc_result_message_passed' : 'kc_result_message_failed', lang);

                 resultsArea.appendChild(header);
                 resultsArea.appendChild(scoreText);
                 resultsArea.appendChild(messageText);
                 resultsArea.className = `results-area ${passed ? 'passed' : 'failed'}`; // Add class for styling
                 resultsArea.dataset.score = score; // Store score for retranslation


                 if (!passed) {
                     const retryButton = document.createElement('button');
                     retryButton.className = 'retry-button';
                     retryButton.textContent = getTranslation('kc_retry_button', lang);
                     retryButton.type = 'button'; // Important: prevent form submission
                     retryButton.addEventListener('click', () => {
                         renderQuiz(getStoredLanguage()); // Re-render/reset the quiz
                     });
                     resultsArea.appendChild(retryButton);
                 } else {
                    // Maybe disable submit button permanently if passed? Or just leave it.
                    submitButton.disabled = true; // Disable submit after passing
                 }

                 resultsArea.style.display = 'block';
                 resultsArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            quizForm.addEventListener('submit', (event) => {
                event.preventDefault();
                let score = 0;
                const currentLang = getStoredLanguage();

                quizData.questions.forEach((q, index) => {
                    const selectedOption = quizForm.querySelector(`input[name="q${index}"]:checked`);
                    if (selectedOption && parseInt(selectedOption.value, 10) === q.correct_index) {
                        score++;
                    }
                });

                displayResults(score, currentLang);

                if (score >= quizData.passingScore) {
                    updateProgress(quizData.moduleId);
                    submitButton.disabled = true; // Disable button after passing
                } else {
                    submitButton.disabled = false; // Ensure button is enabled if failed (for retry)
                }
            });

            // --- Language Switcher Setup ---
             if (languageSelectElement) {
                languageSelectElement.value = getStoredLanguage(); // Set initial value
                languageSelectElement.addEventListener('change', (e) => {
                    setLanguage(e.target.value);
                });
            }

            // --- Initial Load ---
            const initialLang = getStoredLanguage();
            translatePage(initialLang);
            renderQuiz(initialLang);

        }); // End DOMContentLoaded
    </script>

</body>
</html>