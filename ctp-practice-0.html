<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 0: Python Practice Zone! (v5 - Final)</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-light: #f8f9fa;
            --background-medium: #e9ecef;
            --background-dark: #343a40;
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --accent-color: #ffc107; /* Yellow */
            --success-color: #28a745; /* Green */
            --error-color: #dc3545;   /* Red */
            --info-color: #17a2b8;    /* Teal */
            --border-radius: 8px;
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
            --selection-highlight-bg: rgba(0, 123, 255, 0.1);
            --selection-highlight-border: rgba(0, 123, 255, 0.4);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.7;
            background-color: var(--background-light); color: var(--text-dark);
            overflow-x: hidden;
        }

        /* --- Utility Classes --- */
        .container { max-width: 960px; margin: 0 auto; padding: 0 15px; }
        .text-center { text-align: center; }
        .highlight { color: var(--primary-color); font-weight: bold; }
        .code-font { font-family: 'Courier New', Courier, monospace; }
        .hidden { display: none !important; }
        .button-group { /* For navigation buttons */
            margin-top: 2rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
        }


        /* --- Advanced Animations --- */
        .fade-in { opacity: 0; transform: translateY(20px); animation: fadeInAnimation 0.8s ease-out forwards; }
        .fade-in.delay-1 { animation-delay: 0.2s; }
        .fade-in.delay-2 { animation-delay: 0.4s; }
        .fade-in.delay-3 { animation-delay: 0.6s; }
        .fade-in.delay-4 { animation-delay: 0.8s; } /* Added for nav buttons */
        @keyframes fadeInAnimation { to { opacity: 1; transform: translateY(0); } }

        /* Header Icon Pulse */
        @keyframes pulseHeaderIcon {
            0% { transform: scale(1); opacity: 0.1; filter: brightness(1); }
            50% { transform: scale(1.05); opacity: 0.25; filter: brightness(1.2); }
            100% { transform: scale(1); opacity: 0.1; filter: brightness(1); }
        }

        /* Success Glow for interactive areas */
        @keyframes successGlow {
             0% { box-shadow: 0 0 3px rgba(40, 167, 69, 0.3); transform: scale(1); }
             50% { box-shadow: 0 0 12px 5px rgba(40, 167, 69, 0.5); transform: scale(1.01); }
             100% { box-shadow: 0 0 3px rgba(40, 167, 69, 0.3); transform: scale(1); }
        }
        .success-glow-anim { animation: successGlow 0.9s ease-out; }

        /* Error Shake */
        @keyframes shake {
          10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(3px, 0, 0); }
          30%, 50%, 70% { transform: translate3d(-5px, 0, 0); } 40%, 60% { transform: translate3d(5px, 0, 0); }
        }
        .shake-anim { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }

        /* Icon Animations */
        @keyframes iconAppearCorrect {
            0% { transform: scale(0.5) rotate(-15deg); opacity: 0; }
            60% { transform: scale(1.2) rotate(5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        @keyframes iconAppearIncorrect {
             0% { transform: scale(0.5) rotate(-15deg); opacity: 0; }
             50% { transform: scale(1.2) rotate(10deg); opacity: 1; }
             70% { transform: scale(0.9) rotate(-5deg); }
             100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        @keyframes iconAppearMissed {
             0% { transform: scale(0.8) rotateY(90deg); opacity: 0; }
             100% { transform: scale(1) rotateY(0deg); opacity: 0.8; }
        }

        /* Button Press Effect */
        .action-button:active:not(:disabled) { /* Only apply active state if not disabled */
            transform: translateY(1px) scale(0.98);
            filter: brightness(0.95);
        }

        /* --- Practice Header --- */
        .practice-header { background: linear-gradient(135deg, var(--success-color), #1e7e34); color: var(--text-light); padding: 3rem 0 4rem; text-align: center; position: relative; overflow: hidden; border-bottom: 5px solid var(--accent-color); }
        .practice-header h1 { font-family: var(--font-title); font-size: 2.8rem; margin-bottom: 0.5rem; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); animation: fadeInAnimation 1s ease-out; }
        .practice-header p { font-size: 1.1rem; font-weight: 300; opacity: 0.9; animation: fadeInAnimation 1s ease-out 0.3s forwards; opacity: 0; }
        .header-icon { position: absolute; font-size: 4rem; color: var(--text-light); animation: pulseHeaderIcon 6s infinite ease-in-out alternate; }
        .icon1 { top: 20%; left: 15%; animation-duration: 7s; }
        .icon2 { bottom: 15%; right: 20%; animation-duration: 5s; }

        /* --- Practice Section Styling --- */
        .practice-section { padding: 3rem 0; background-color: var(--background-medium); border-bottom: 1px solid #d6d8db; }
        .practice-section:nth-child(odd) { background-color: var(--background-light); }
        .practice-section:last-of-type { border-bottom: none; }
        .practice-section h2 { font-family: var(--font-title); font-size: 1.8rem; color: var(--primary-color); margin-bottom: 1rem; text-align: center; }
        .practice-section .section-description { text-align: center; margin-bottom: 2.5rem; color: var(--secondary-color); font-size: 1.05rem; max-width: 700px; margin-left: auto; margin-right: auto; }

        /* --- General Interactive Elements --- */
        .interactive-area { background-color: #fff; padding: 2rem; border-radius: var(--border-radius); box-shadow: 0 5px 15px rgba(0,0,0,0.08); margin-top: 1.5rem; position: relative; transition: box-shadow 0.5s ease-out; }
        .feedback-message { padding: 0.8rem 1rem; margin-top: 1rem; border-radius: var(--border-radius); font-weight: bold; text-align: center; opacity: 0; max-height: 0; overflow: hidden; transition: opacity var(--transition-speed) ease, max-height var(--transition-speed) ease, margin-top var(--transition-speed) ease; }
        .feedback-message.visible { opacity: 1; max-height: 100px; margin-top: 1.5rem; }
        .feedback-message.correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .feedback-message.incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .feedback-message.info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .feedback-message .fas { margin: 0 3px; } /* Spacing for icons in feedback */

        .action-button {
             display: inline-block; padding: 0.8rem 1.5rem; font-size: 1rem; font-weight: bold;
             color: var(--text-light); background-color: var(--primary-color); border: none;
             border-radius: var(--border-radius); cursor: pointer;
             transition: background-color var(--transition-speed), transform var(--transition-speed), filter var(--transition-speed), box-shadow var(--transition-speed);
             margin-top: 1rem; vertical-align: middle; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             text-decoration: none; /* For <a> tags styled as buttons */
        }
        .action-button:hover:not(:disabled) { background-color: #0056b3; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .action-button:disabled { background-color: var(--secondary-color); cursor: not-allowed; transform: none; box-shadow: none; opacity: 0.7; }
        .action-button.success { background-color: var(--success-color); }
        .action-button.success:hover:not(:disabled) { background-color: #218838; }
        .action-button.secondary { background-color: var(--secondary-color); }
        .action-button.secondary:hover:not(:disabled) { background-color: #5a6268; }

        /* Code styling */
        .code-block { background-color: var(--background-dark); color: var(--text-light); padding: 1.5rem; border-radius: var(--border-radius); font-family: var(--code-font); font-size: 1rem; position: relative; overflow-x: auto; margin: 1rem 0; }
        .code-keyword { color: #569cd6; } .code-string { color: #ce9178; } .code-comment { color: #6a9955; } .code-function { color: #dcdcaa; } .code-paren { color: #ffd700; }

        /* --- Activity 1: Code Anatomy --- */
        #anatomy-code .code-part { cursor: pointer; border-bottom: 2px dashed rgba(255, 255, 255, 0.3); transition: background-color var(--transition-speed), border-bottom-color var(--transition-speed); padding: 0 2px; display: inline-block; }
        #anatomy-code .code-part:hover { background-color: rgba(255, 255, 255, 0.15); border-bottom-color: var(--accent-color); }
        #anatomy-code .code-part.identified { background-color: rgba(40, 167, 69, 0.3); border-bottom: 2px solid var(--success-color); cursor: default; }
        .part-explanation { font-size: 0.95rem; color: var(--info-color); border-left: 3px solid var(--info-color); padding: 5px 10px; margin-top: 0.5rem; background-color: rgba(23, 162, 184, 0.05); }
        #anatomy-status { margin-top: 1rem; font-style: italic; color: var(--secondary-color); }

        /* --- Activity 2: Build-a-Print --- */
        #build-a-print .draggable-pieces { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 1.5rem; padding: 1rem; background-color: var(--background-light); border: 1px dashed var(--secondary-color); border-radius: var(--border-radius); justify-content: center; user-select: none; -webkit-user-select: none; -ms-user-select: none; }
        .piece { display: inline-block; padding: 8px 12px; background-color: var(--primary-color); color: var(--text-light); border-radius: 4px; cursor: grab; font-family: var(--code-font); font-size: 1rem; transition: background-color var(--transition-speed), transform var(--transition-speed), opacity 0.1s ease, box-shadow var(--transition-speed); border: 1px solid #0056b3; touch-action: none; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .piece:active { cursor: grabbing; }
        .piece.dragging { opacity: 0.6 !important; transform: scale(1.05) rotate(3deg); position: fixed !important; pointer-events: none !important; z-index: 1000 !important; cursor: grabbing !important; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .piece.ghosting { opacity: 0.3; }
        .piece[data-type="string"] { background-color: #b17a62; border-color:#9d6c56; }
        .piece[data-type="comment"] { background-color: #5d8f4c; border-color:#4a723d; }
        #drop-zone { min-height: 60px; background-color: var(--background-dark); border: 3px dashed var(--secondary-color); border-radius: var(--border-radius); padding: 15px; display: flex; align-items: center; gap: 5px; flex-wrap: wrap; transition: border-color var(--transition-speed), background-color var(--transition-speed), box-shadow var(--transition-speed); }
        #drop-zone.over { border-color: var(--accent-color); background-color: #495057; box-shadow: inset 0 0 10px rgba(255,193,7,0.2); }
        #drop-zone .piece { cursor: default; margin: 0; touch-action: auto; box-shadow: none; }
        #drop-zone-placeholder { color: var(--secondary-color); font-style: italic; width: 100%; text-align: center;}

        /* --- Activity 3: Code Simulator --- */
        #code-simulator .sim-editor { width: 100%; min-height: 80px; background-color: var(--background-dark); color: var(--text-light); border: 1px solid var(--secondary-color); border-radius: var(--border-radius); padding: 1rem; font-family: var(--code-font); font-size: 1rem; line-height: 1.5; resize: vertical; }
        #code-simulator .sim-output-area { margin-top: 1rem; min-height: 50px; background-color: #1a1a1a; border: 1px solid #444; border-radius: var(--border-radius); padding: 1rem; color: var(--accent-color); font-family: var(--code-font); font-size: 1.05rem; white-space: pre-wrap; word-wrap: break-word; }
        #code-simulator .sim-output-area .placeholder { color: var(--secondary-color); font-style: italic; font-size: 0.9rem; }
        #code-simulator .sim-output-area .output-line { display: block; }

        /* --- Activity 4: Spot the Comment (Enhanced Feedback) --- */
         .code-line-container { display: flex; align-items: center; margin-bottom: 8px; position: relative; }
         .feedback-icon-placeholder { width: 30px; height: 24px; margin-right: 10px; display: inline-flex; align-items: center; justify-content: center; transition: opacity var(--transition-speed); opacity: 0; font-size: 1.2rem; }
         .feedback-icon-placeholder.visible { opacity: 1; }
         #spot-comment .code-line-check { flex-grow: 1; background-color: var(--background-dark); color: var(--text-light); padding: 10px 15px; border-radius: 5px; cursor: pointer; transition: background-color var(--transition-speed), transform var(--transition-speed), border-left-color var(--transition-speed); font-family: var(--code-font); border-left: 4px solid transparent; user-select: none; -webkit-user-select: none; }
         #spot-comment .code-line-check:hover { background-color: #495057; transform: translateX(3px); }
         #spot-comment .code-line-check.selected-visual { background-color: var(--selection-highlight-bg); border-left-color: var(--selection-highlight-border); color: var(--text-dark); }
         #spot-comment .code-line-check.checked-state { cursor: default; }
         .feedback-icon-placeholder .fa-check { color: var(--success-color); animation: iconAppearCorrect 0.5s ease-out forwards; }
         .feedback-icon-placeholder .fa-times { color: var(--error-color); animation: iconAppearIncorrect 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; }
         .feedback-icon-placeholder .fa-eye { color: var(--accent-color); animation: iconAppearMissed 0.4s ease-in forwards; opacity: 0; }
         #reset-comment-btn { margin-left: 10px; }

        /* --- Activity 5: Mini Missions --- */
        #mini-missions .mission { padding: 1.5rem; border: 1px solid #d6d8db; border-radius: var(--border-radius); margin-bottom: 1.5rem; background-color: var(--background-light); position: relative; }
        .mission-status { position: absolute; top: 10px; right: 10px; font-size: 1.5rem; transition: transform 0.3s ease; }
        .mission-status .fa-check-circle { color: var(--success-color); transform-origin: center; }
        .mission-status .fa-times-circle { color: var(--error-color); }
        .mission-status .fa-question-circle { color: var(--secondary-color); }
        .mission[data-completed="true"] .mission-status .fa-check-circle { animation: iconAppearCorrect 0.6s ease-out; }
        #mini-missions .mission-editor { width: 100%; min-height: 100px; background-color: var(--background-dark); color: var(--text-light); border: 1px solid var(--secondary-color); border-radius: var(--border-radius); padding: 1rem; font-family: var(--code-font); font-size: 1rem; line-height: 1.5; resize: vertical; margin-top: 1rem; }
        #mini-missions .mission-output { margin-top: 1rem; min-height: 30px; background-color: #1a1a1a; border: 1px solid #444; border-radius: var(--border-radius); padding: 0.8rem; color: var(--accent-color); font-family: var(--code-font); font-size: 1rem; white-space: pre-wrap; word-wrap: break-word; }

        /* --- Final Section --- */
        .completion-section { padding: 4rem 0; text-align: center; }
        .completion-section .icon {
            font-size: 4rem; color: var(--success-color); margin-bottom: 1rem;
            display: inline-block;
            /* Apply entrance animation once, remove infinite loop */
            opacity: 0; /* Start hidden for animation */
            animation: iconAppearCorrect 1s ease-out 0.5s forwards; /* Use icon animation */
        }
        .completion-section h2 { font-family: var(--font-title); font-size: 2.2rem; color: var(--primary-color); }
        .completion-section p { font-size: 1.1rem; margin-top: 1rem; color: var(--secondary-color); }

        /* --- Responsive Design --- */
        @media (max-width: 768px) { html { font-size: 15px; } .practice-header h1 { font-size: 2.2rem; } .practice-section h2 { font-size: 1.6rem; } .interactive-area { padding: 1.5rem; } #build-a-print .draggable-pieces { padding: 0.8rem; } .piece { padding: 6px 10px; font-size: 0.95rem; } #drop-zone { min-height: 50px; padding: 10px; } .feedback-icon-placeholder { width: 25px; margin-right: 8px; font-size: 1.1rem;} .button-group { flex-direction: column; align-items: center; } }
        @media (max-width: 480px) { html { font-size: 14px; } .practice-header h1 { font-size: 1.8rem; } .practice-header p { font-size: 1rem; } .practice-section h2 { font-size: 1.4rem; } .interactive-area { padding: 1rem; } .action-button { font-size: 0.9rem; padding: 0.7rem 1.2rem; width: 90%; max-width: 300px;} #code-simulator .sim-editor, #code-simulator .sim-output-area { font-size: 0.9rem; } #spot-comment .code-line-check { padding: 8px 12px; font-size: 0.9rem;} #mini-missions .mission-editor { min-height: 90px; font-size: 0.95rem;} #mini-missions .mission-output { font-size: 0.95rem;} .feedback-icon-placeholder { width: 20px; margin-right: 5px; font-size: 1rem;} .button-group a.action-button { width: 90%; max-width: 300px; margin-bottom: 0.5rem; } } /* Stack buttons on small screens */

    </style>
</head>
<body>

    <header class="practice-header">
        <i class="fas fa-code header-icon icon1"></i>
        <i class="fas fa-brain header-icon icon2"></i>
        <div class="container">
            <h1>Module 0: Practice Zone</h1>
            <p>Time to get hands-on and make these concepts stick!</p>
        </div>
    </header>

    <main>
        <!-- ========= Activity 1: Anatomy of print() ========= -->
        <section id="anatomy-code" class="practice-section">
             <div class="container">
                 <h2 class="fade-in"><i class="fas fa-microscope"></i> Anatomy of a Print Statement</h2>
                 <p class="section-description fade-in delay-1">
                     Let's break down that first piece of code. Click on each highlighted part below to identify it.
                 </p>
                 <div class="interactive-area fade-in delay-2">
                     <div class="code-block">
                         <span class="code-part" data-part="function" title="Click to identify this part"><span class="code-function">print</span></span><!-- no space
                         --><span class="code-part" data-part="parentheses-open" title="Click to identify this part"><span class="code-paren">(</span></span><!-- no space
                         --><span class="code-part" data-part="string" title="Click to identify this part"><span class="code-string">"AI is cool!"</span></span><!-- no space
                         --><span class="code-part" data-part="parentheses-close" title="Click to identify this part"><span class="code-paren">)</span></span><!-- space ok here
                         --> <span class="code-part" data-part="comment" title="Click to identify this part"><span class="code-comment"># Display a message</span></span>
                     </div>
                     <div id="anatomy-explanations"></div>
                     <p id="anatomy-status">Identify all 5 parts!</p>
                     <div id="anatomy-feedback" class="feedback-message"></div>
                 </div>
             </div>
        </section>

        <!-- ========= Activity 2: Build-a-Print ========= -->
        <section id="build-a-print" class="practice-section">
             <div class="container">
                 <h2 class="fade-in"><i class="fas fa-puzzle-piece"></i> Build-a-Print Statement</h2>
                 <p class="section-description fade-in delay-1">
                     Drag the pieces (or tap-and-drag on touch devices) from the top box into the dark grey area below to construct a valid `print()` statement
                     that displays the text "Python rocks!".
                 </p>
                 <div class="interactive-area fade-in delay-2">
                     <div id="draggable-pieces" class="draggable-pieces">
                         <!-- Pieces populated by JS -->
                     </div>
                     <div id="drop-zone" class="code-font">
                         <span id="drop-zone-placeholder">Drop pieces here in the correct order...</span>
                     </div>
                     <div class="text-center">
                         <button id="check-build-btn" class="action-button">Check My Code</button>
                         <button id="reset-build-btn" class="action-button secondary">Reset</button>
                     </div>
                     <div id="build-feedback" class="feedback-message"></div>
                 </div>
             </div>
        </section>

         <!-- ========= Activity 3: Code Simulator ========= -->
        <section id="code-simulator" class="practice-section">
             <div class="container">
                 <h2 class="fade-in"><i class="fas fa-keyboard"></i> Your Turn to Code (Simulated)</h2>
                 <p class="section-description fade-in delay-1">
                     Now, type your own `print()` command in the editor below. Try to make it print your name!
                     Then click "Run Simulation".
                 </p>
                 <div class="interactive-area fade-in delay-2">
                     <label for="sim-editor-input" style="font-weight: bold; display:block; margin-bottom: 8px;">Code Editor:</label>
                     <textarea id="sim-editor-input" class="sim-editor" rows="3" placeholder='Type your print command here, e.g., print("Your Name")'></textarea>
                     <div class="text-center">
                          <button id="run-sim-btn" class="action-button">Run Simulation</button>
                     </div>
                     <label for="sim-output" style="font-weight: bold; display:block; margin-top: 1.5rem; margin-bottom: 8px;">Simulated Output:</label>
                     <div id="sim-output" class="sim-output-area">
                         <span class="placeholder">Output will appear here...</span>
                     </div>
                     <div id="sim-feedback" class="feedback-message"></div>
                 </div>
             </div>
        </section>

         <!-- ========= Activity 4: Spot the Comment ========= -->
        <section id="spot-comment" class="practice-section">
            <div class="container">
                <h2 class="fade-in"><i class="fas fa-search"></i> Spot the Comment</h2>
                <p class="section-description fade-in delay-1">
                    Remember, comments start with `#`. Click on the line(s) below that are comments. Click again to deselect.
                    Then click "Check Selection". Use the icons for feedback!
                </p>
                <div class="interactive-area fade-in delay-2">
                    <div id="comment-lines">
                        <!-- Lines will be generated by JS -->
                    </div>
                     <div class="text-center">
                         <button id="check-comment-btn" class="action-button">Check Selection</button>
                         <button id="reset-comment-btn" class="action-button secondary hidden">Try Again</button>
                     </div>
                     <div id="comment-feedback" class="feedback-message"></div>
                </div>
            </div>
        </section>

         <!-- ========= Activity 5: Mini Missions ========= -->
        <section id="mini-missions" class="practice-section">
             <div class="container">
                  <h2 class="fade-in"><i class="fas fa-rocket"></i> Mini Missions!</h2>
                 <p class="section-description fade-in delay-1">
                     Let's put it all together. Complete the following small coding tasks using the simulator. You can try again if you get it wrong!
                 </p>
                 <div class="interactive-area fade-in delay-2">
                     <!-- Mission 1 -->
                     <div class="mission" id="mission-1" data-completed="false">
                         <span class="mission-status"><i class="fas fa-question-circle"></i></span>
                         <h4>Mission 1: Favorite AI Topic</h4>
                         <p>Write a Python command to print your favorite AI topic (e.g., "Computer Vision", "NLP", "Robotics").</p>
                         <textarea class="sim-editor mission-editor" rows="4" placeholder='print("Your favorite topic")'></textarea>
                         <div class="text-center"> <button class="action-button mission-run-btn" data-mission-id="1">Test Mission 1</button> </div>
                         <div class="sim-output-area mission-output"></div>
                         <div class="feedback-message mission-feedback"></div>
                     </div>
                     <!-- Mission 2 -->
                     <div class="mission" id="mission-2" data-completed="false">
                          <span class="mission-status"><i class="fas fa-question-circle"></i></span>
                         <h4>Mission 2: Two Lines</h4>
                         <p>Write <strong>two separate</strong> `print()` commands. The first should print "Learning Python...", and the second should print "...is step one!".</p>
                         <textarea class="sim-editor mission-editor" rows="4" placeholder='print("Line 1")\nprint("Line 2")'></textarea>
                          <div class="text-center"> <button class="action-button mission-run-btn" data-mission-id="2">Test Mission 2</button> </div>
                         <div class="sim-output-area mission-output"></div>
                         <div class="feedback-message mission-feedback"></div>
                     </div>
                     <!-- Mission 3 -->
                     <div class="mission" id="mission-3" data-completed="false">
                          <span class="mission-status"><i class="fas fa-question-circle"></i></span>
                         <h4>Mission 3: Code with a Comment</h4>
                         <p>Write a `print()` command to display "AI for Good". On the <strong>next line</strong>, add a comment explaining what the code does (e.g., `# Prints a positive message`).</p>
                         <textarea class="sim-editor mission-editor" rows="4" placeholder='print("Something")\n# Your comment here'></textarea>
                          <div class="text-center"> <button class="action-button mission-run-btn" data-mission-id="3">Test Mission 3</button> </div>
                         <div class="sim-output-area mission-output"></div>
                         <div class="feedback-message mission-feedback"></div>
                     </div>
                     <div id="missions-summary-feedback" class="feedback-message" style="margin-top: 2rem;"></div>
                 </div>
             </div>
        </section>

         <!-- ========= Completion Section ========= -->
        <section class="completion-section">
            <div class="container">
                <!-- Changed animation, removed infinite loop -->
                <div class="icon fade-in" style="animation: iconAppearCorrect 1s ease-out 0.5s forwards;">
                    <i class="fas fa-star"></i> <i class="fas fa-graduation-cap"></i> <i class="fas fa-star"></i>
                </div>
                <h2 class="fade-in delay-1">Module 0 Practice Complete!</h2>
                <p class="fade-in delay-2">
                    Fantastic job working through these exercises! You've solidified the basics. <br>
                    Next up: tackle the <strong>Advanced Practice</strong> for Module 0 to truly master these concepts!
                </p>
                <!-- Added Navigation Buttons -->
                <div class="button-group">
                    <a href="ctp-theory-0.html" class="action-button secondary fade-in delay-3"><i class="fas fa-book-open"></i> View Theory Again</a>
                    <a href="ctp-advanced-0.html" class="action-button success fade-in delay-3"><i class="fas fa-arrow-right"></i> Start Advanced Practice</a>
                    <a href="ctp.html" class="action-button secondary fade-in delay-4"><i class="fas fa-list"></i> Back to Course Menu</a>
                </div>
            </div>
        </section>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Helper Function for Feedback ---
        function showFeedback(elementId, messageHTML, type = 'info') { // Accept HTML
            const feedbackEl = document.getElementById(elementId);
            if (!feedbackEl) { console.error(`Feedback element not found: ${elementId}`); return; }
            feedbackEl.innerHTML = messageHTML; // Use innerHTML to render icons etc.
            feedbackEl.className = 'feedback-message'; // Reset classes
            feedbackEl.classList.add('visible', type);
            const interactiveArea = feedbackEl.closest('.interactive-area');
            if (!interactiveArea) return;
            interactiveArea.classList.remove('success-glow-anim', 'shake-anim');
            void interactiveArea.offsetWidth;
            if (type === 'correct') { interactiveArea.classList.add('success-glow-anim'); }
            else if (type === 'incorrect') { interactiveArea.classList.add('shake-anim'); }
        }

        // --- Activity 1: Code Anatomy ---
        const anatomyCode = document.getElementById('anatomy-code');
        if (anatomyCode) { /* ... Existing correct logic ... */
            const parts = anatomyCode.querySelectorAll('.code-part'); const explanationsDiv = document.getElementById('anatomy-explanations'); const statusP = document.getElementById('anatomy-status'); const feedbackDiv = document.getElementById('anatomy-feedback'); let identifiedCount = 0; const totalParts = 5;
            const partExplanations = { 'function': "The `print` function: Python's command to show output.", 'parentheses-open': "Opening parenthesis `(`: Starts the list of things for the function to use.", 'string': 'A "string": Text data, always wrapped in quotes (`""` or `\'\')`.', 'parentheses-close': "Closing parenthesis `)`: Ends the list of things for the function.", 'comment': "A comment `#`: A note for humans; Python ignores this." };
            parts.forEach(p => p.classList.remove('identified')); explanationsDiv.innerHTML = ''; statusP.textContent = `Identify all ${totalParts} parts!`; feedbackDiv.classList.remove('visible'); identifiedCount = 0;
            parts.forEach(part => { part.addEventListener('click', () => { const partType = part.dataset.part; if (!part.classList.contains('identified') && partType && partExplanations[partType]) { part.classList.add('identified'); identifiedCount++; const p = document.createElement('p'); p.classList.add('part-explanation'); p.innerHTML = `<i class="fas fa-check-circle" style="color: var(--success-color);"></i> <strong>${part.textContent.trim()}:</strong> ${partExplanations[partType]}`; explanationsDiv.appendChild(p); statusP.textContent = `Identified ${identifiedCount} of ${totalParts} parts.`; if (identifiedCount === totalParts) { statusP.textContent = 'All parts identified!'; showFeedback('anatomy-feedback', 'Excellent! You dissected the print statement!', 'correct'); } } else if (!partExplanations[partType]) { console.error(`Explanation missing for part type: ${partType}`); } }); });
        }

        // --- Activity 2: Build-a-Print (Touch Support) ---
        const buildAPrintSection = document.getElementById('build-a-print');
        if (buildAPrintSection) { /* ... Existing correct logic ... */
            const piecesContainer = document.getElementById('draggable-pieces'); const dropZone = document.getElementById('drop-zone'); const checkBtn = document.getElementById('check-build-btn'); const resetBtn = document.getElementById('reset-build-btn'); const feedbackDiv = document.getElementById('build-feedback');
            const initialPieces = [ { value: 'print', type: 'function' }, { value: '(', type: 'paren-open' }, { value: ')', type: 'paren-close' }, { value: '"Python rocks!"', type: 'string' }, { value: '# Optional note', type: 'comment' }, { value: '"Hello AI"', type: 'string' } ];
            let draggedElement = null; let touchDragElement = null; let originalPiece = null; let startX, startY, offsetX, offsetY;
            function createPieceElement(pieceData) { const piece = document.createElement('span'); piece.classList.add('piece', 'code-font'); piece.draggable = true; piece.dataset.value = pieceData.value; piece.dataset.type = pieceData.type; piece.textContent = pieceData.value; if (pieceData.type === 'string') piece.style.backgroundColor = '#b17a62'; if (pieceData.type === 'comment') piece.style.backgroundColor = '#5d8f4c'; addDragListeners(piece); addTouchListeners(piece); return piece; }
            function populatePieces() { piecesContainer.innerHTML = ''; initialPieces.forEach(pData => { piecesContainer.appendChild(createPieceElement(pData)); }); }
            function setupBuildListeners() { populatePieces(); dropZone.innerHTML = ''; const placeholder = document.createElement('span'); placeholder.id = 'drop-zone-placeholder'; placeholder.textContent = 'Drop pieces here...'; dropZone.appendChild(placeholder); feedbackDiv.classList.remove('visible'); checkBtn.classList.remove('success'); checkBtn.disabled = false; }
            function addDragListeners(element) { element.addEventListener('dragstart', (e) => { draggedElement = element; element.classList.add('ghosting'); e.dataTransfer.effectAllowed = 'move'; try { e.dataTransfer.setData('text/plain', element.dataset.value); } catch (err) {} }); element.addEventListener('dragend', () => { element.classList.remove('ghosting'); draggedElement = null; }); }
            function addTouchListeners(element) { element.addEventListener('touchstart', (e) => { if (touchDragElement) return; originalPiece = element; const touch = e.targetTouches[0]; startX = touch.clientX; startY = touch.clientY; const rect = element.getBoundingClientRect(); offsetX = startX - rect.left; offsetY = startY - rect.top; touchDragElement = element.cloneNode(true); touchDragElement.classList.add('dragging'); touchDragElement.style.position = 'fixed'; touchDragElement.style.left = `${startX - offsetX}px`; touchDragElement.style.top = `${startY - offsetY}px`; touchDragElement.style.width = `${rect.width}px`; touchDragElement.style.height = `${rect.height}px`; document.body.appendChild(touchDragElement); originalPiece.classList.add('ghosting'); e.preventDefault(); }, { passive: false }); element.addEventListener('touchmove', (e) => { if (!touchDragElement) return; e.preventDefault(); const touch = e.targetTouches[0]; const currentX = touch.clientX; const currentY = touch.clientY; touchDragElement.style.left = `${currentX - offsetX}px`; touchDragElement.style.top = `${currentY - offsetY}px`; const elemBelow = document.elementFromPoint(currentX, currentY); const isOverDropZone = elemBelow === dropZone || dropZone.contains(elemBelow); if (isOverDropZone) { dropZone.classList.add('over'); } else { dropZone.classList.remove('over'); } }, { passive: false }); element.addEventListener('touchend', (e) => { if (!touchDragElement || !originalPiece) return; const touch = e.changedTouches[0]; const finalX = touch.clientX; const finalY = touch.clientY; const elemBelow = document.elementFromPoint(finalX, finalY); const droppedInZone = elemBelow === dropZone || dropZone.contains(elemBelow); if (droppedInZone) { dropZone.querySelector('#drop-zone-placeholder')?.remove(); const droppedPiece = originalPiece.cloneNode(true); droppedPiece.classList.remove('ghosting'); droppedPiece.draggable = false; droppedPiece.style.cursor = 'default'; addTouchListeners(droppedPiece); dropZone.appendChild(droppedPiece); originalPiece.remove(); } else { originalPiece.classList.remove('ghosting'); } if (touchDragElement.parentNode === document.body) document.body.removeChild(touchDragElement); dropZone.classList.remove('over'); touchDragElement = null; originalPiece = null; }); }
            dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('over'); }); dropZone.addEventListener('dragleave', () => { dropZone.classList.remove('over'); }); dropZone.addEventListener('drop', (e) => { e.preventDefault(); dropZone.classList.remove('over'); if (draggedElement) { dropZone.querySelector('#drop-zone-placeholder')?.remove(); const droppedPiece = draggedElement; droppedPiece.classList.remove('ghosting'); droppedPiece.draggable = false; droppedPiece.style.cursor = 'default'; addTouchListeners(droppedPiece); dropZone.appendChild(droppedPiece); draggedElement = null; } });
            checkBtn.addEventListener('click', () => { const droppedPieces = Array.from(dropZone.querySelectorAll('.piece')); const sequence = droppedPieces.map(p => p.dataset.type).join('-'); const correctSequence = 'function-paren-open-string-paren-close'; const correctStringValue = '"Python rocks!"'; const stringPiece = droppedPieces.find(p => p.dataset.type === 'string'); const isSequenceCorrect = sequence === correctSequence; const isStringCorrect = stringPiece && stringPiece.dataset.value === correctStringValue; if (isSequenceCorrect && isStringCorrect) { showFeedback('build-feedback', 'Perfect!', 'correct'); checkBtn.classList.add('success'); checkBtn.disabled = true; } else if (sequence.includes('function') && sequence.includes('string')) { showFeedback('build-feedback', 'Almost! Check order or string.', 'incorrect'); checkBtn.classList.remove('success'); } else { showFeedback('build-feedback', 'Not quite right. Check pieces/order.', 'incorrect'); checkBtn.classList.remove('success'); } });
            resetBtn.addEventListener('click', setupBuildListeners); setupBuildListeners();
        }

        // --- Activity 3: Code Simulator ---
        const simSection = document.getElementById('code-simulator');
        if(simSection) { /* ... Existing correct logic ... */
            const editor = document.getElementById('sim-editor-input'); const outputArea = document.getElementById('sim-output'); const runBtn = document.getElementById('run-sim-btn'); const feedbackDiv = document.getElementById('sim-feedback');
            runBtn.addEventListener('click', () => { const code = editor.value.trim(); let placeholder = outputArea.querySelector('.placeholder'); outputArea.innerHTML = ''; if (!placeholder) { placeholder = document.createElement('span'); placeholder.className = 'placeholder'; } placeholder.textContent = 'Output...'; feedbackDiv.classList.remove('visible'); const printRegex = /^print\s*\(\s*"(.*)"\s*\)\s*$/; const match = code.match(printRegex); if (code === '') { outputArea.appendChild(placeholder); showFeedback('sim-feedback', 'Editor is empty.', 'info'); } else if (match) { const outputText = match[1]; const outputLine = document.createElement('span'); outputLine.classList.add('output-line'); outputLine.textContent = `> ${outputText}`; outputArea.appendChild(outputLine); showFeedback('sim-feedback', 'Simulation successful!', 'correct'); } else { outputArea.appendChild(placeholder); placeholder.textContent = 'Error...'; if (!code.startsWith('print')) { showFeedback('sim-feedback', 'Start with `print`.', 'incorrect'); } else if (!code.includes('(') || !code.includes(')')) { showFeedback('sim-feedback', 'Need `()`.', 'incorrect'); } else if (!code.includes('"')) { showFeedback('sim-feedback', 'Need `""` for text.', 'incorrect'); } else { showFeedback('sim-feedback', 'Check syntax: `print("text")`.', 'incorrect'); } } });
        }

        // --- Activity 4: Spot the Comment (Refined Feedback & Reset) ---
        const spotCommentSection = document.getElementById('spot-comment');
        if (spotCommentSection) {
            const linesContainer = document.getElementById('comment-lines');
            const checkBtn = document.getElementById('check-comment-btn');
            const resetBtn = document.getElementById('reset-comment-btn');
            const feedbackDiv = document.getElementById('comment-feedback');
            const commentCodeLines = [
                { code: 'print("Analyzing data...")', isComment: false }, { code: '# This line explains the goal', isComment: true },
                { code: 'model.train()', isComment: false }, { code: '# TODO: Add more features later', isComment: true },
                { code: '# print("Old debug message") # Still a comment line', isComment: true }, { code: '# Just a comment', isComment: true }
            ];

            function createCommentLineElement(lineData) { /* ... same as before ... */
                const container = document.createElement('div'); container.classList.add('code-line-container');
                 const iconPlaceholder = document.createElement('span'); iconPlaceholder.classList.add('feedback-icon-placeholder');
                 const codeLine = document.createElement('div'); codeLine.classList.add('code-line-check'); codeLine.dataset.isComment = lineData.isComment.toString(); codeLine.textContent = lineData.code;
                 container.appendChild(iconPlaceholder); container.appendChild(codeLine); return container;
            }
            function setupCommentLines() { /* ... same as before ... */
                linesContainer.innerHTML = ''; commentCodeLines.forEach(lineData => { linesContainer.appendChild(createCommentLineElement(lineData)); }); feedbackDiv.classList.remove('visible'); resetBtn.classList.add('hidden'); checkBtn.disabled = false;
            }
            linesContainer.addEventListener('click', (event) => { /* ... same toggle logic ... */
                const lineCheck = event.target.closest('.code-line-check'); if (!lineCheck || lineCheck.classList.contains('checked-state')) { return; } lineCheck.classList.toggle('selected-visual');
            });
            checkBtn.addEventListener('click', () => { /* Check logic */
                let correctSelections = 0; let incorrectSelections = 0; let missedComments = 0;
                const lineContainers = linesContainer.querySelectorAll('.code-line-container');
                const totalComments = commentCodeLines.filter(l => l.isComment).length;
                let isCorrectOverall = false;

                lineContainers.forEach(container => { /* Add icons */
                    const lineCheck = container.querySelector('.code-line-check'); const iconPlaceholder = container.querySelector('.feedback-icon-placeholder'); const isComment = lineCheck.dataset.isComment === 'true'; const isSelected = lineCheck.classList.contains('selected-visual');
                    iconPlaceholder.innerHTML = ''; iconPlaceholder.classList.remove('visible'); lineCheck.classList.add('checked-state');
                    let iconClass = '';
                    if (isSelected && isComment) { iconClass = 'fas fa-check'; correctSelections++; iconPlaceholder.classList.add('visible'); }
                    else if (isSelected && !isComment) { iconClass = 'fas fa-times'; incorrectSelections++; iconPlaceholder.classList.add('visible'); }
                    else if (!isSelected && isComment) { iconClass = 'fas fa-eye'; missedComments++; iconPlaceholder.classList.add('visible'); }
                    if (iconClass) { const icon = document.createElement('i'); icon.className = iconClass; iconPlaceholder.appendChild(icon); }
                });

                // REFINED Feedback Messages
                let feedbackMsg = '';
                if (incorrectSelections === 0 && missedComments === 0 && correctSelections === totalComments) {
                    isCorrectOverall = true;
                    feedbackMsg = `Perfect! You identified all ${totalComments} comments. <i class="fas fa-thumbs-up"></i>`;
                    showFeedback('comment-feedback', feedbackMsg, 'correct');
                } else {
                    let hints = [];
                    if (incorrectSelections > 0) hints.push(`${incorrectSelections} incorrect selection(s) marked with <i class="fas fa-times"></i>`);
                    if (missedComments > 0) hints.push(`${missedComments} missed comment(s) marked with <i class="fas fa-eye"></i>`);
                    feedbackMsg = `Not quite right. ${hints.join(', and ')}. Remember comments start with '#'.`;
                    showFeedback('comment-feedback', feedbackMsg, 'incorrect');
                }

                // Show/Hide Reset Button
                if (isCorrectOverall) { resetBtn.classList.add('hidden'); checkBtn.disabled = true; lineContainers.forEach(c => c.querySelector('.code-line-check').classList.remove('selected-visual')); }
                else { resetBtn.classList.remove('hidden'); checkBtn.disabled = false; }
            });
            resetBtn.addEventListener('click', () => { /* Reset logic */
                 const lineContainers = linesContainer.querySelectorAll('.code-line-container');
                 lineContainers.forEach(container => { const lineCheck = container.querySelector('.code-line-check'); const iconPlaceholder = container.querySelector('.feedback-icon-placeholder'); lineCheck.classList.remove('selected-visual', 'checked-state'); iconPlaceholder.innerHTML = ''; iconPlaceholder.classList.remove('visible'); });
                 feedbackDiv.classList.remove('visible'); resetBtn.classList.add('hidden'); checkBtn.disabled = false;
            });
            setupCommentLines(); // Initial setup
        }


         // --- Activity 5: Mini Missions (Corrected Tracking) ---
         const missionsSection = document.getElementById('mini-missions');
         if (missionsSection) { /* ... Existing correct logic ... */
             const missionRunButtons = missionsSection.querySelectorAll('.mission-run-btn'); const summaryFeedback = document.getElementById('missions-summary-feedback'); const totalMissions = missionsSection.querySelectorAll('.mission').length; let completedMissionsCount = 0;
             function updateMissionSummary() { completedMissionsCount = missionsSection.querySelectorAll('.mission[data-completed="true"]').length; if (completedMissionsCount === totalMissions) { showFeedback('missions-summary-feedback', `All ${totalMissions} missions complete! Great work!`, 'correct'); } else if (completedMissionsCount > 0) { showFeedback('missions-summary-feedback', `Completed ${completedMissionsCount} of ${totalMissions} missions. Keep going!`, 'info'); } else { summaryFeedback.classList.remove('visible'); } }
             missionRunButtons.forEach(button => { button.addEventListener('click', () => { const missionId = button.dataset.missionId; const missionDiv = document.getElementById(`mission-${missionId}`); const editor = missionDiv.querySelector('.mission-editor'); const outputArea = missionDiv.querySelector('.mission-output'); const feedbackDiv = missionDiv.querySelector('.mission-feedback'); const statusIcon = missionDiv.querySelector('.mission-status i'); const code = editor.value.trim(); outputArea.innerHTML = ''; let success = false; let feedbackMessage = ''; let feedbackType = 'incorrect'; /* Validation */ if (missionId === '1') { const m = code.match(/^print\s*\(\s*"(.*)"\s*\)\s*$/); if (m && m[1].trim().length > 2) { success = true; outputArea.textContent = `> ${m[1]}`; } else { feedbackMessage = 'Use `print("Your Topic")`.'; } } else if (missionId === '2') { const l = code.split('\n').map(x => x.trim()).filter(x => x); const m1 = l[0]?.match(/^print\s*\(\s*"(.*)"\s*\)\s*$/); const m2 = l[1]?.match(/^print\s*\(\s*"(.*)"\s*\)\s*$/); const t1 = "Learning Python..."; const t2 = "...is step one!"; if (l.length >= 2 && m1 && m2 && m1[1] === t1 && m2[1] === t2) { success = true; outputArea.innerHTML = `<span class="output-line">> ${m1[1]}</span><span class="output-line">> ${m2[1]}</span>`; } else if (l.length < 2) { feedbackMessage = 'Need two print lines.'; } else { feedbackMessage = 'Check text/syntax.'; } } else if (missionId === '3') { const l = code.split('\n').map(x => x.trim()); const m = l[0]?.match(/^print\s*\(\s*"AI for Good"\s*\)\s*$/); const c = l[1]?.startsWith('#'); if (l.length >= 2 && m && c && l[1].length > 5) { success = true; outputArea.textContent = `> AI for Good`; } else if (!m) { feedbackMessage = 'Print "AI for Good" exactly.'; } else if (!c || l[1]?.length <= 5) { feedbackMessage = 'Need descriptive comment on line 2.'; } else { feedbackMessage = 'Check print and comment.'; } } /* End Validation */ if (success) { feedbackMessage = 'Mission Accomplished!'; feedbackType = 'correct'; statusIcon.className = 'fas fa-check-circle'; missionDiv.dataset.completed = 'true'; } else { feedbackMessage = feedbackMessage || 'Syntax/logic error.'; feedbackType = 'incorrect'; statusIcon.className = 'fas fa-times-circle'; } showFeedback(feedbackDiv.id, feedbackMessage, feedbackType); updateMissionSummary(); }); }); updateMissionSummary();
         }

        // --- Fade-in animations on scroll ---
         const fadeElements = document.querySelectorAll('.fade-in');
         const animateOnScroll = () => { /* ... Existing correct logic ... */
            const windowHeight = window.innerHeight; fadeElements.forEach(el => { const rect = el.getBoundingClientRect(); if (rect.top < windowHeight - 100 && rect.bottom >= 50) { el.style.opacity = '1'; el.style.transform = 'translateY(0)'; } });
         };
         window.addEventListener('scroll', animateOnScroll);
         animateOnScroll();

    }); // End DOMContentLoaded
    </script>

</body>
</html>
