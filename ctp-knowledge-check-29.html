<!DOCTYPE html>
<!-- Language set by JS -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title set by JS -->
    <title data-translate="page_title">Knowledge Check: OOP Intro - Python Course</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Base Styles & Variables (Copied from Dashboard, slightly adapted) --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-page: #f0f2f5;
            --background-card: #ffffff;
            --text-light: #f8f9fa;
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --accent-color: #ffc107;
            --success-color: #198754;
            --error-color: #dc3545;
            --check-color: #6f42c1; /* Used for correct answers */
            --border-color: #dee2e6;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --transition-speed: 0.3s;
            --font-body: 'Roboto', sans-serif;
            --font-title: 'Orbitron', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: var(--font-body); line-height: 1.6;
            background-color: var(--background-page); color: var(--text-dark);
            padding-bottom: 3rem; /* Ensure space for footer/results */
        }

        /* --- Quiz Page Specific Styles --- */
        .quiz-header {
            background: linear-gradient(135deg, #0d6efd, #0a58ca); /* Similar to dashboard header */
            color: var(--text-light);
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .return-button {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background-color: rgba(255, 255, 255, 0.15);
            color: var(--text-light);
            text-decoration: none;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color var(--transition-speed) ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .return-button i { margin-right: 8px; }
        .return-button:hover { background-color: rgba(255, 255, 255, 0.25); }

        .quiz-header h1 {
            font-family: var(--font-title);
            font-size: 1.6rem;
            margin: 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background-color: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }

        .quiz-instructions {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed var(--border-color);
            font-size: 0.95rem;
            color: var(--text-muted);
        }
        .quiz-instructions strong { color: var(--text-dark); }
        .quiz-instructions code { font-size: 0.9em; background: #eee; padding: 1px 4px; border-radius: 3px;}
        .quiz-instructions i { margin-right: 5px;}

        #quiz-form { display: flex; flex-direction: column; gap: 2rem; }

        .quiz-question {
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: #fdfdff;
            transition: border-color 0.3s ease;
        }

        .quiz-question p {
            font-weight: 500;
            margin-bottom: 1.2rem;
            font-size: 1.05rem;
        }
        .quiz-question p strong { color: var(--primary-color); }
         .quiz-question p code {
             background-color: #e9ecef;
             padding: 0.1em 0.4em;
             border-radius: 3px;
             font-size: 0.9em;
             color: #c7254e;
             font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        }
        .quiz-question pre code { /* Style code blocks */
            display: block;
            background-color: #2d2d2d; /* Dark background for code blocks */
            color: #f0f0f0; /* Light text */
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto; /* Allow horizontal scrolling if needed */
            font-size: 0.9em;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            white-space: pre; /* Preserve whitespace and line breaks */
        }


        .quiz-options { display: flex; flex-direction: column; gap: 0.8rem; }

        .quiz-options label {
            display: block;
            padding: 0.8rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            background-color: #fff;
        }
        .quiz-options label:hover { background-color: #f8f9fa; border-color: var(--secondary-color); }
        .quiz-options input[type="radio"] { margin-right: 10px; accent-color: var(--primary-color); transform: translateY(1px); }
        .quiz-options label.selected { border-color: var(--primary-color); background-color: #e7f1ff; }
        .quiz-options label.correct { border-color: var(--success-color); background-color: #d1e7dd; }
        .quiz-options label.incorrect { border-color: var(--error-color); background-color: #f8d7da; }
        .quiz-options label.correct.selected { font-weight: bold; } /* Bold correct selected answer */
        .quiz-options label.incorrect.selected { font-weight: bold; /* Optional: Style incorrect selected */ }

        .submit-area { text-align: center; margin-top: 2rem; }

        #submit-quiz, #retry-quiz {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color var(--transition-speed) ease, transform 0.1s ease;
        }
        #submit-quiz { background-color: var(--primary-color); color: var(--text-light); }
        #submit-quiz:hover { background-color: #0b5ed7; }
        #submit-quiz:active { transform: scale(0.98); }

        #retry-quiz { background-color: var(--secondary-color); color: var(--text-light); }
        #retry-quiz:hover { background-color: #5a6268; }
        #retry-quiz:active { transform: scale(0.98); }

        #quiz-results {
            margin-top: 2.5rem;
            padding: 1.5rem 2rem;
            border-radius: var(--border-radius);
            text-align: center;
            font-size: 1.1rem;
            border: 1px solid var(--border-color);
        }
        #quiz-results.pass { background-color: #dff0d8; border-color: #d0e9c6; color: #3c763d; }
        #quiz-results.fail { background-color: #f2dede; border-color: #ebccd1; color: #a94442; }
        #quiz-results p { margin-bottom: 0.5rem; }
        #quiz-results strong { font-weight: 700; font-size: 1.2em; }

        .feedback-message { margin-top: 1rem; font-style: italic; font-size: 0.95rem; }
        .final-message { font-weight: bold; margin-top: 1rem;}
        .error-message { color: var(--error-color); font-weight: bold; margin-bottom: 1rem; text-align: center; }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-header h1 { font-size: 1.4rem; }
            .return-button { padding: 0.4rem 0.8rem; font-size: 0.85rem;}
            .quiz-container { padding: 1.5rem; }
            .quiz-question { padding: 1rem; }
            .quiz-options label { padding: 0.7rem 0.9rem; }
        }
        @media (max-width: 576px) {
            html { font-size: 15px; }
             .quiz-header { flex-direction: column; gap: 0.8rem; text-align: center; padding: 0.8rem 1rem;}
             .return-button { margin-bottom: 0.5rem; }
            .quiz-header h1 { font-size: 1.2rem; }
            .quiz-container { padding: 1rem; }
            #quiz-form { gap: 1.5rem; }
             #submit-quiz, #retry-quiz { width: 100%; padding: 0.7rem 1rem; }
            #quiz-results { padding: 1rem 1.5rem; font-size: 1rem; }
        }

    </style>
</head>
<body>

    <header class="quiz-header">
        <a href="ctp-dashboard.html" class="return-button">
            <i class="fas fa-arrow-left"></i> <span data-translate="return_button">Return to Dashboard</span>
        </a>
        <h1 data-translate="quiz_title">Knowledge Check: Module 29</h1>
        <span></span> <!-- Spacer -->
    </header>

    <div class="quiz-container">
        <div class="quiz-instructions">
            <p><i class="fas fa-question-circle"></i> <span data-translate="instructions_1">Answer the 10 questions below about Object-Oriented Programming concepts introduced in Module 29.</span></p>
            <p><i class="fas fa-check-circle"></i> <span data-translate="instructions_2">You need to answer at least <strong>6</strong> questions correctly to pass this check.</span></p>
            <p><i class="fas fa-redo"></i> <span data-translate="instructions_3">You can retry the quiz as many times as you need. Passing updates your progress on the dashboard (<code>localStorage</code>).</span></p>
        </div>

        <div id="error-message-area" class="error-message" style="display: none;"></div>

        <form id="quiz-form">
            <!-- Question 0 -->
            <div class="quiz-question" data-question-id="0">
                <p><strong data-translate="q0_num">1.</strong> <span data-translate="q0_text">Which keyword is used to define a blueprint for creating objects in Python?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q0" value="a"> <span data-translate="q0_opt_a">def</span></label>
                    <label><input type="radio" name="q0" value="b"> <span data-translate="q0_opt_b">object</span></label>
                    <label><input type="radio" name="q0" value="c"> <span data-translate="q0_opt_c">class</span></label>
                    <label><input type="radio" name="q0" value="d"> <span data-translate="q0_opt_d">instance</span></label>
                </div>
            </div>

            <!-- Question 1 -->
            <div class="quiz-question" data-question-id="1">
                <p><strong data-translate="q1_num">2.</strong> <span data-translate="q1_text">What is the special method name used to initialize the attributes of an object when it's created?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q1" value="a"> <span data-translate="q1_opt_a">__init__</span></label>
                    <label><input type="radio" name="q1" value="b"> <span data-translate="q1_opt_b">__create__</span></label>
                    <label><input type="radio" name="q1" value="c"> <span data-translate="q1_opt_c">initialize()</span></label>
                    <label><input type="radio" name="q1" value="d"> <span data-translate="q1_opt_d">setup()</span></label>
                </div>
            </div>

             <!-- Question 2 -->
            <div class="quiz-question" data-question-id="2">
                <p><strong data-translate="q2_num">3.</strong> <span data-translate="q2_text">Inside a class method, what does the conventional parameter name <code>self</code> refer to?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q2" value="a"> <span data-translate="q2_opt_a">The class itself</span></label>
                    <label><input type="radio" name="q2" value="b"> <span data-translate="q2_opt_b">A global variable</span></label>
                    <label><input type="radio" name="q2" value="c"> <span data-translate="q2_opt_c">The specific instance (object) the method was called on</span></label>
                    <label><input type="radio" name="q2" value="d"> <span data-translate="q2_opt_d">The module the class is defined in</span></label>
                </div>
            </div>

             <!-- Question 3 -->
            <div class="quiz-question" data-question-id="3">
                <p><strong data-translate="q3_num">4.</strong> <span data-translate="q3_text">Given a class defined as <code>class Dog: ...</code>, how do you create a new instance (object) of this class?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q3" value="a"> <span data-translate="q3_opt_a"><code>my_dog = new Dog()</code></span></label>
                    <label><input type="radio" name="q3" value="b"> <span data-translate="q3_opt_b"><code>my_dog = Dog.create()</code></span></label>
                    <label><input type="radio" name="q3" value="c"> <span data-translate="q3_opt_c"><code>my_dog = Dog()</code></span></label>
                    <label><input type="radio" name="q3" value="d"> <span data-translate="q3_opt_d"><code>create Dog as my_dog</code></span></label>
                </div>
            </div>

             <!-- Question 4 -->
            <div class="quiz-question" data-question-id="4">
                <p><strong data-translate="q4_num">5.</strong> <span data-translate="q4_text">If an object <code>book</code> has an attribute <code>title</code> assigned within its <code>__init__</code> method (e.g., <code>self.title = "Python Basics"</code>), how would you access this attribute from outside the class?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q4" value="a"> <span data-translate="q4_opt_a"><code>book.getTitle()</code></span></label>
                    <label><input type="radio" name="q4" value="b"> <span data-translate="q4_opt_b"><code>book['title']</code></span></label>
                    <label><input type="radio" name="q4" value="c"> <span data-translate="q4_opt_c"><code>book(title)</code></span></label>
                    <label><input type="radio" name="q4" value="d"> <span data-translate="q4_opt_d"><code>book.title</code></span></label>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="quiz-question" data-question-id="5">
                <p><strong data-translate="q5_num">6.</strong> <span data-translate="q5_text">What is the term for a variable that belongs to a specific instance of a class?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q5" value="a"> <span data-translate="q5_opt_a">Class variable</span></label>
                    <label><input type="radio" name="q5" value="b"> <span data-translate="q5_opt_b">Global variable</span></label>
                    <label><input type="radio" name="q5" value="c"> <span data-translate="q5_opt_c">Function parameter</span></label>
                    <label><input type="radio" name="q5" value="d"> <span data-translate="q5_opt_d">Attribute (or instance variable)</span></label>
                </div>
            </div>

             <!-- Question 6 -->
            <div class="quiz-question" data-question-id="6">
                 <p><strong data-translate="q6_num">7.</strong> <span data-translate="q6_text">Consider the following code:</span></p>
                <pre><code class="language-python">class Car:
    def __init__(self, color):
        self.color = color

my_car = Car("red")</code></pre>
                 <p><span data-translate="q6_text_cont">What does <code>my_car</code> represent?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q6" value="a"> <span data-translate="q6_opt_a">The class definition</span></label>
                    <label><input type="radio" name="q6" value="b"> <span data-translate="q6_opt_b">An instance (or object) of the Car class</span></label>
                    <label><input type="radio" name="q6" value="c"> <span data-translate="q6_opt_c">The string "red"</span></label>
                    <label><input type="radio" name="q6" value="d"> <span data-translate="q6_opt_d">The `__init__` method</span></label>
                </div>
            </div>

             <!-- Question 7 -->
            <div class="quiz-question" data-question-id="7">
                <p><strong data-translate="q7_num">8.</strong> <span data-translate="q7_text">In Object-Oriented Programming, what concept does a 'class' primarily represent?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q7" value="a"> <span data-translate="q7_opt_a">A specific piece of data</span></label>
                    <label><input type="radio" name="q7" value="b"> <span data-translate="q7_opt_b">A sequence of instructions (like a function)</span></label>
                    <label><input type="radio" name="q7" value="c"> <span data-translate="q7_opt_c">A blueprint or template for creating objects with shared properties and behaviors</span></label>
                    <label><input type="radio" name="q7" value="d"> <span data-translate="q7_opt_d">A way to handle errors</span></label>
                </div>
            </div>

             <!-- Question 8 -->
            <div class="quiz-question" data-question-id="8">
                <p><strong data-translate="q8_num">9.</strong> <span data-translate="q8_text">Which part of the following code defines the attributes an `Item` object will have upon creation?</span></p>
                 <pre><code class="language-python">class Item:
    # Part 1
    def __init__(self, name, price):
        # Part 2
        self.name = name
        self.price = price

    # Part 3
    def display_info(self):
        print(f"{self.name}: ${self.price}")

# Part 4
item1 = Item("Book", 15)</code></pre>
                <div class="quiz-options">
                    <label><input type="radio" name="q8" value="a"> <span data-translate="q8_opt_a">Part 1</span></label>
                    <label><input type="radio" name="q8" value="b"> <span data-translate="q8_opt_b">Part 2</span></label>
                    <label><input type="radio" name="q8" value="c"> <span data-translate="q8_opt_c">Part 3</span></label>
                    <label><input type="radio" name="q8" value="d"> <span data-translate="q8_opt_d">Part 4</span></label>
                </div>
            </div>

            <!-- Question 9 -->
            <div class="quiz-question" data-question-id="9">
                <p><strong data-translate="q9_num">10.</strong> <span data-translate="q9_text">Creating multiple objects from the same class is an example of using the class as a what?</span></p>
                <div class="quiz-options">
                    <label><input type="radio" name="q9" value="a"> <span data-translate="q9_opt_a">A function</span></label>
                    <label><input type="radio" name="q9" value="b"> <span data-translate="q9_opt_b">A module</span></label>
                    <label><input type="radio" name="q9" value="c"> <span data-translate="q9_opt_c">A specific, single object</span></label>
                    <label><input type="radio" name="q9" value="d"> <span data-translate="q9_opt_d">A blueprint or template</span></label>
                </div>
            </div>

            <!-- Submit Button Area -->
            <div class="submit-area">
                <button type="submit" id="submit-quiz" data-translate="submit_button">Submit Answers</button>
            </div>
        </form>

        <!-- Results Area (Hidden Initially) -->
        <div id="quiz-results" style="display: none;">
            <p><span data-translate="results_score_label">Your Score:</span> <strong id="score-value">0 / 10</strong></p>
            <p id="pass-fail-message"></p>
             <p id="feedback-message" class="feedback-message"></p>
             <p id="final-message" class="final-message"></p>
            <div class="submit-area"> <!-- Re-using submit-area for consistency -->
                 <button id="retry-quiz" style="display: none;" data-translate="retry_button">Retry Quiz</button>
            </div>
        </div>

    </div><!-- /.quiz-container -->


    <script>
        const MODULE_ID = 29; // Unique ID for this knowledge check
        const KNOWLEDGE_CHECK_STORAGE_KEY = 'knowledgeCheckStatus_v1';
        const LANGUAGE_STORAGE_KEY = 'userLanguage';
        const PASSING_SCORE = 6;

        // --- Quiz Data (Correct Answers) ---
        const quizData = [
            { correctAnswer: "c" }, // Q0
            { correctAnswer: "a" }, // Q1
            { correctAnswer: "c" }, // Q2
            { correctAnswer: "c" }, // Q3
            { correctAnswer: "d" }, // Q4
            { correctAnswer: "d" }, // Q5
            { correctAnswer: "b" }, // Q6
            { correctAnswer: "c" }, // Q7
            { correctAnswer: "b" }, // Q8 (Inside __init__)
            { correctAnswer: "d" }  // Q9
        ];

        // --- Translations Object ---
        const translations = {
            en: {
                "page_title": `Knowledge Check: M${MODULE_ID} OOP Intro - Python Course`,
                "return_button": "Return to Dashboard",
                "quiz_title": `Knowledge Check: Module ${MODULE_ID} - OOP Intro`,
                "instructions_1": "Answer the 10 questions below about Object-Oriented Programming concepts introduced in Module 29.",
                "instructions_2": `You need to answer at least <strong>${PASSING_SCORE}</strong> questions correctly to pass this check.`,
                "instructions_3": "You can retry the quiz as many times as you need. Passing updates your progress on the dashboard (<code>localStorage</code>).",
                "q0_num": "1.", "q0_text": "Which keyword is used to define a blueprint for creating objects in Python?", "q0_opt_a": "def", "q0_opt_b": "object", "q0_opt_c": "class", "q0_opt_d": "instance",
                "q1_num": "2.", "q1_text": "What is the special method name used to initialize the attributes of an object when it's created?", "q1_opt_a": "__init__", "q1_opt_b": "__create__", "q1_opt_c": "initialize()", "q1_opt_d": "setup()",
                "q2_num": "3.", "q2_text": "Inside a class method, what does the conventional parameter name `self` refer to?", "q2_opt_a": "The class itself", "q2_opt_b": "A global variable", "q2_opt_c": "The specific instance (object) the method was called on", "q2_opt_d": "The module the class is defined in",
                "q3_num": "4.", "q3_text": "Given a class defined as `class Dog: ...`, how do you create a new instance (object) of this class?", "q3_opt_a": "`my_dog = new Dog()`", "q3_opt_b": "`my_dog = Dog.create()`", "q3_opt_c": "`my_dog = Dog()`", "q3_opt_d": "`create Dog as my_dog`",
                "q4_num": "5.", "q4_text": "If an object `book` has an attribute `title` assigned within its `__init__` method (e.g., `self.title = \"Python Basics\"`), how would you access this attribute from outside the class?", "q4_opt_a": "`book.getTitle()`", "q4_opt_b": "`book['title']`", "q4_opt_c": "`book(title)`", "q4_opt_d": "`book.title`",
                "q5_num": "6.", "q5_text": "What is the term for a variable that belongs to a specific instance of a class?", "q5_opt_a": "Class variable", "q5_opt_b": "Global variable", "q5_opt_c": "Function parameter", "q5_opt_d": "Attribute (or instance variable)",
                "q6_num": "7.", "q6_text": "Consider the following code:", "q6_text_cont": "What does `my_car` represent?", "q6_opt_a": "The class definition", "q6_opt_b": "An instance (or object) of the Car class", "q6_opt_c": "The string \"red\"", "q6_opt_d": "The `__init__` method",
                "q7_num": "8.", "q7_text": "In Object-Oriented Programming, what concept does a 'class' primarily represent?", "q7_opt_a": "A specific piece of data", "q7_opt_b": "A sequence of instructions (like a function)", "q7_opt_c": "A blueprint or template for creating objects with shared properties and behaviors", "q7_opt_d": "A way to handle errors",
                "q8_num": "9.", "q8_text": "Which part of the following code defines the attributes an `Item` object will have upon creation?", "q8_opt_a": "Part 1", "q8_opt_b": "Part 2", "q8_opt_c": "Part 3", "q8_opt_d": "Part 4",
                "q9_num": "10.", "q9_text": "Creating multiple objects from the same class is an example of using the class as a what?", "q9_opt_a": "A function", "q9_opt_b": "A module", "q9_opt_c": "A specific, single object", "q9_opt_d": "A blueprint or template",
                "submit_button": "Submit Answers",
                "retry_button": "Retry Quiz",
                "results_score_label": "Your Score:",
                "results_pass_message": `Congratulations! You passed with a score of {score}/10.`,
                "results_fail_message": `You scored {score}/10. Keep trying! You need ${PASSING_SCORE} correct answers to pass.`,
                 "feedback_pass": "Your progress for this module has been updated.",
                 "feedback_fail": "Review the concepts and try again!",
                 "final_message_pass": "Great job!",
                 "final_message_fail": "Don't give up!",
                 "error_incomplete": "Please answer all questions before submitting."
            },
            pt: { // Portuguese Translations
                "page_title": `Verificação: M${MODULE_ID} Intro POO - Curso Python`,
                "return_button": "Voltar ao Painel",
                "quiz_title": `Verificação: Módulo ${MODULE_ID} - Intro POO`,
                "instructions_1": "Responda às 10 perguntas abaixo sobre os conceitos de Programação Orientada a Objetos introduzidos no Módulo 29.",
                "instructions_2": `Você precisa acertar pelo menos <strong>${PASSING_SCORE}</strong> perguntas para passar nesta verificação.`,
                "instructions_3": "Você pode refazer o quiz quantas vezes precisar. Passar atualiza seu progresso no painel (<code>localStorage</code>).",
                "q0_num": "1.", "q0_text": "Qual palavra-chave é usada para definir um modelo para criar objetos em Python?", "q0_opt_a": "def", "q0_opt_b": "object", "q0_opt_c": "class", "q0_opt_d": "instance",
                "q1_num": "2.", "q1_text": "Qual é o nome do método especial usado para inicializar os atributos de um objeto quando ele é criado?", "q1_opt_a": "__init__", "q1_opt_b": "__create__", "q1_opt_c": "initialize()", "q1_opt_d": "setup()",
                "q2_num": "3.", "q2_text": "Dentro de um método de classe, a que se refere o nome de parâmetro convencional `self`?", "q2_opt_a": "A própria classe", "q2_opt_b": "Uma variável global", "q2_opt_c": "A instância específica (objeto) na qual o método foi chamado", "q2_opt_d": "O módulo onde a classe está definida",
                "q3_num": "4.", "q3_text": "Dada uma classe definida como `class Dog: ...`, como você cria uma nova instância (objeto) desta classe?", "q3_opt_a": "`my_dog = new Dog()`", "q3_opt_b": "`my_dog = Dog.create()`", "q3_opt_c": "`my_dog = Dog()`", "q3_opt_d": "`create Dog as my_dog`",
                "q4_num": "5.", "q4_text": "Se um objeto `book` tem um atributo `title` atribuído em seu método `__init__` (ex: `self.title = \"Python Básico\"`), como você acessaria esse atributo de fora da classe?", "q4_opt_a": "`book.getTitle()`", "q4_opt_b": "`book['title']`", "q4_opt_c": "`book(title)`", "q4_opt_d": "`book.title`",
                "q5_num": "6.", "q5_text": "Qual é o termo para uma variável que pertence a uma instância específica de uma classe?", "q5_opt_a": "Variável de classe", "q5_opt_b": "Variável global", "q5_opt_c": "Parâmetro de função", "q5_opt_d": "Atributo (ou variável de instância)",
                "q6_num": "7.", "q6_text": "Considere o seguinte código:", "q6_text_cont": "O que `my_car` representa?", "q6_opt_a": "A definição da classe", "q6_opt_b": "Uma instância (ou objeto) da classe Car", "q6_opt_c": "A string \"red\"", "q6_opt_d": "O método `__init__`",
                "q7_num": "8.", "q7_text": "Em Programação Orientada a Objetos, que conceito uma 'classe' representa principalmente?", "q7_opt_a": "Um dado específico", "q7_opt_b": "Uma sequência de instruções (como uma função)", "q7_opt_c": "Um modelo ou molde para criar objetos com propriedades e comportamentos compartilhados", "q7_opt_d": "Uma forma de tratar erros",
                "q8_num": "9.", "q8_text": "Qual parte do código a seguir define os atributos que um objeto `Item` terá ao ser criado?", "q8_opt_a": "Parte 1", "q8_opt_b": "Parte 2", "q8_opt_c": "Parte 3", "q8_opt_d": "Parte 4",
                "q9_num": "10.", "q9_text": "Criar múltiplos objetos da mesma classe é um exemplo de usar a classe como o quê?", "q9_opt_a": "Uma função", "q9_opt_b": "Um módulo", "q9_opt_c": "Um objeto específico e único", "q9_opt_d": "Um modelo ou molde",
                "submit_button": "Enviar Respostas",
                "retry_button": "Tentar Novamente",
                "results_score_label": "Sua Pontuação:",
                "results_pass_message": `Parabéns! Você passou com {score}/10 pontos.`,
                "results_fail_message": `Você fez {score}/10 pontos. Continue tentando! Você precisa de ${PASSING_SCORE} respostas corretas para passar.`,
                "feedback_pass": "Seu progresso para este módulo foi atualizado.",
                "feedback_fail": "Revise os conceitos e tente novamente!",
                "final_message_pass": "Bom trabalho!",
                "final_message_fail": "Não desista!",
                "error_incomplete": "Por favor, responda todas as perguntas antes de enviar."
            },
            zh: { // Chinese Translations
                "page_title": `知识测验: M${MODULE_ID} OOP 简介 - Python 课程`,
                "return_button": "返回仪表板",
                "quiz_title": `知识测验: 模块 ${MODULE_ID} - OOP 简介`,
                "instructions_1": "回答以下关于模块 29 中介绍的面向对象编程概念的 10 个问题。",
                "instructions_2": `您至少需要答对 <strong>${PASSING_SCORE}</strong> 题才能通过本次测验。`,
                "instructions_3": "您可以根据需要重试任意次数。通过测验会更新您在仪表板上的进度 (<code>localStorage</code>)。",
                "q0_num": "1.", "q0_text": "在 Python 中，使用哪个关键字来定义创建对象的蓝图？", "q0_opt_a": "def", "q0_opt_b": "object", "q0_opt_c": "class", "q0_opt_d": "instance",
                "q1_num": "2.", "q1_text": "创建对象时，用于初始化对象属性的特殊方法名称是什么？", "q1_opt_a": "__init__", "q1_opt_b": "__create__", "q1_opt_c": "initialize()", "q1_opt_d": "setup()",
                "q2_num": "3.", "q2_text": "在类方法内部，常规参数名 `self` 指代什么？", "q2_opt_a": "类本身", "q2_opt_b": "全局变量", "q2_opt_c": "调用该方法的特定实例（对象）", "q2_opt_d": "定义该类的模块",
                "q3_num": "4.", "q3_text": "给定一个定义为 `class Dog: ...` 的类，您如何创建这个类的新实例（对象）？", "q3_opt_a": "`my_dog = new Dog()`", "q3_opt_b": "`my_dog = Dog.create()`", "q3_opt_c": "`my_dog = Dog()`", "q3_opt_d": "`create Dog as my_dog`",
                "q4_num": "5.", "q4_text": "如果一个对象 `book` 在其 `__init__` 方法中分配了一个属性 `title`（例如 `self.title = \"Python 基础\"`），您如何在类外部访问此属性？", "q4_opt_a": "`book.getTitle()`", "q4_opt_b": "`book['title']`", "q4_opt_c": "`book(title)`", "q4_opt_d": "`book.title`",
                "q5_num": "6.", "q5_text": "属于类的特定实例的变量的术语是什么？", "q5_opt_a": "类变量", "q5_opt_b": "全局变量", "q5_opt_c": "函数参数", "q5_opt_d": "属性（或实例变量）",
                "q6_num": "7.", "q6_text": "思考以下代码：", "q6_text_cont": "`my_car` 代表什么？", "q6_opt_a": "类定义", "q6_opt_b": "Car 类的一个实例（或对象）", "q6_opt_c": "字符串 \"red\"", "q6_opt_d": "`__init__` 方法",
                "q7_num": "8.", "q7_text": "在面向对象编程中，“类”主要代表什么概念？", "q7_opt_a": "一个特定的数据片段", "q7_opt_b": "一系列指令（像函数一样）", "q7_opt_c": "用于创建具有共享属性和行为的对象的蓝图或模板", "q7_opt_d": "处理错误的方法",
                "q8_num": "9.", "q8_text": "以下代码的哪一部分定义了 `Item` 对象在创建时将具有的属性？", "q8_opt_a": "第 1 部分", "q8_opt_b": "第 2 部分", "q8_opt_c": "第 3 部分", "q8_opt_d": "第 4 部分",
                "q9_num": "10.", "q9_text": "从同一个类创建多个对象是将该类用作什么的示例？", "q9_opt_a": "一个函数", "q9_opt_b": "一个模块", "q9_opt_c": "一个特定的、单一的对象", "q9_opt_d": "一个蓝图或模板",
                "submit_button": "提交答案",
                "retry_button": "重试测验",
                "results_score_label": "你的分数:",
                "results_pass_message": `恭喜！你以 {score}/10 的分数通过了测验。`,
                "results_fail_message": `你的得分是 {score}/10。继续努力！你需要答对 ${PASSING_SCORE} 题才能通过。`,
                "feedback_pass": "您在此模块的学习进度已更新。",
                "feedback_fail": "复习一下概念再试一次吧！",
                "final_message_pass": "做得好！",
                "final_message_fail": "不要放弃！",
                "error_incomplete": "提交前请回答所有问题。"
            }
        };


        // --- Quiz Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const quizForm = document.getElementById('quiz-form');
            const submitButton = document.getElementById('submit-quiz');
            const resultsDiv = document.getElementById('quiz-results');
            const scoreValueSpan = document.getElementById('score-value');
            const passFailMessageP = document.getElementById('pass-fail-message');
            const feedbackMessageP = document.getElementById('feedback-message');
            const finalMessageP = document.getElementById('final-message');
            const retryButton = document.getElementById('retry-quiz');
            const errorMessageArea = document.getElementById('error-message-area');

            let currentLanguage = 'en'; // Default

             // --- Translation Functions ---
             function getStoredLanguage() { const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY); return translations[storedLang] ? storedLang : 'en'; }
             function getTranslation(key, lang, replacements = {}) { let text = translations[lang]?.[key] ?? translations['en']?.[key] ?? `[${key}]`; for (const placeholder in replacements) { const regex = new RegExp(`\\{${placeholder}\\}`, 'g'); text = text.replace(regex, replacements[placeholder]); } return text; }
             function translatePage(lang) { currentLanguage = lang; if (!translations[lang]) lang = 'en'; document.documentElement.lang = lang; document.querySelectorAll('[data-translate]').forEach(el => { const key = el.getAttribute('data-translate'); const translation = getTranslation(key, lang); if (el.tagName === 'TITLE') { document.title = translation; } else if (translation.includes('<') && translation.includes('>')) { el.innerHTML = translation; } else { el.textContent = translation; } }); /* Add placeholder/aria translations if needed */ }

             // Set initial language
             setLanguage(getStoredLanguage());


            function handleSubmit(event) {
                event.preventDefault();
                clearFeedback();
                errorMessageArea.style.display = 'none'; // Hide previous errors

                let score = 0;
                const totalQuestions = quizData.length;
                let allAnswered = true;

                for (let i = 0; i < totalQuestions; i++) {
                    const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
                    const questionBlock = quizForm.querySelector(`.quiz-question[data-question-id="${i}"]`);
                    const optionLabels = questionBlock.querySelectorAll('.quiz-options label');

                    if (selectedOption) {
                        const userAnswer = selectedOption.value;
                        const correctAnswer = quizData[i].correctAnswer;
                        const selectedLabel = selectedOption.closest('label');

                        selectedLabel.classList.add('selected'); // Mark selected

                        if (userAnswer === correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct');
                        } else {
                            selectedLabel.classList.add('incorrect');
                            // Highlight the correct answer as well
                             const correctInput = questionBlock.querySelector(`input[value="${correctAnswer}"]`);
                             if(correctInput) {
                                 correctInput.closest('label').classList.add('correct');
                             }
                        }
                        // Disable radio buttons for this question after submission
                        questionBlock.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
                    } else {
                        allAnswered = false;
                    }
                }

                if (!allAnswered) {
                     errorMessageArea.textContent = getTranslation('error_incomplete', currentLanguage);
                     errorMessageArea.style.display = 'block';
                     // Re-enable submission if needed or keep disabled until retry
                     // submitButton.disabled = false;
                    return; // Stop processing if not all questions answered
                }

                // All answered, display results
                displayResults(score);
                submitButton.style.display = 'none'; // Hide submit button
                retryButton.style.display = 'inline-block'; // Show retry button
            }

            function displayResults(score) {
                const passed = score >= PASSING_SCORE;
                scoreValueSpan.textContent = `${score} / ${quizData.length}`;
                resultsDiv.className = passed ? 'pass' : 'fail'; // Add pass/fail class for styling

                if (passed) {
                     passFailMessageP.innerHTML = getTranslation('results_pass_message', currentLanguage, {score: score});
                     feedbackMessageP.textContent = getTranslation('feedback_pass', currentLanguage);
                     finalMessageP.textContent = getTranslation('final_message_pass', currentLanguage);
                     updateLocalStorageProgress();
                     retryButton.textContent = getTranslation('return_button', currentLanguage); // Change retry to return
                     retryButton.onclick = () => { window.location.href = 'ctp-dashboard.html'; }; // Go back to dashboard
                } else {
                     passFailMessageP.innerHTML = getTranslation('results_fail_message', currentLanguage, {score: score});
                     feedbackMessageP.textContent = getTranslation('feedback_fail', currentLanguage);
                     finalMessageP.textContent = getTranslation('final_message_fail', currentLanguage);
                     retryButton.textContent = getTranslation('retry_button', currentLanguage);
                     retryButton.onclick = handleRetry; // Keep retry function
                }

                resultsDiv.style.display = 'block';
                resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'end' });
            }

             function clearFeedback() {
                 // Remove selection and result styling from all options
                 quizForm.querySelectorAll('.quiz-options label').forEach(label => {
                     label.classList.remove('selected', 'correct', 'incorrect');
                 });
                 // Re-enable all radio buttons
                 quizForm.querySelectorAll('input[type="radio"]').forEach(input => input.disabled = false);
             }

            function handleRetry() {
                quizForm.reset(); // Clear selected answers
                clearFeedback(); // Remove visual feedback
                resultsDiv.style.display = 'none'; // Hide results
                errorMessageArea.style.display = 'none'; // Hide errors
                submitButton.style.display = 'inline-block'; // Show submit button
                retryButton.style.display = 'none'; // Hide retry button
                 // Ensure retry button's function is set back to retry if it was changed
                 retryButton.onclick = handleRetry;
                 retryButton.textContent = getTranslation('retry_button', currentLanguage);
                 window.scrollTo({ top: quizForm.offsetTop - 80, behavior: 'smooth' }); // Scroll back up
            }

             function updateLocalStorageProgress() {
                 try {
                     let status = JSON.parse(localStorage.getItem(KNOWLEDGE_CHECK_STORAGE_KEY) || '{}');
                     if (typeof status !== 'object' || status === null) { status = {}; } // Ensure it's an object
                     status[MODULE_ID] = true; // Mark this module as complete
                     localStorage.setItem(KNOWLEDGE_CHECK_STORAGE_KEY, JSON.stringify(status));
                     console.log(`Knowledge Check ${MODULE_ID} passed. Updated localStorage.`);
                 } catch (e) {
                     console.error("Failed to update localStorage:", e);
                     // Optionally display an error to the user
                     errorMessageArea.textContent = "Error saving progress. Please try again later.";
                     errorMessageArea.style.display = 'block';
                 }
             }

            // Add event listener
            quizForm.addEventListener('submit', handleSubmit);

             // Language Setting Function (needed for dynamic text like errors/results)
             function setLanguage(lang) { translatePage(lang); /* Potentially update retry/submit button text if visible */ }

             // --- Initial Setup ---
             setLanguage(getStoredLanguage()); // Translate page on load


        }); // End DOMContentLoaded
    </script>

</body>
</html>
